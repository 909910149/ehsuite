Ext.ns("Ext.ux");Ext.ux.TabScrollerMenu=Ext.extend(Object,{pageSize:10,maxText:15,menuPrefixText:"Items",constructor:function(b){b=b||{};Ext.apply(this,b);},init:function(c){Ext.apply(c,this.parentOverrides);c.tabScrollerMenu=this;var d=this;c.on({render:{scope:c,single:true,fn:function(){var a=c.createScrollers.createSequence(d.createPanelsMenu,this);c.createScrollers=a;}}});},createPanelsMenu:function(){var h=this.stripWrap.dom.offsetHeight;var e=this.header.dom.firstChild;Ext.fly(e).applyStyles({right:"18px"});var f=Ext.get(this.strip.dom.parentNode);f.applyStyles({"margin-right":"36px"});var g=this.header.insertFirst({cls:"x-tab-tabmenu-right"});g.setHeight(h);g.addClassOnOver("x-tab-tabmenu-over");g.on("click",this.showTabsMenu,this);this.scrollLeft.show=this.scrollLeft.show.createSequence(function(){g.show();});this.scrollLeft.hide=this.scrollLeft.hide.createSequence(function(){g.hide();});},getPageSize:function(){return this.pageSize;},setPageSize:function(b){this.pageSize=b;},getMaxText:function(){return this.maxText;},setMaxText:function(b){this.maxText=b;},getMenuPrefixText:function(){return this.menuPrefixText;},setMenuPrefixText:function(b){this.menuPrefixText=b;},parentOverrides:{showTabsMenu:function(f){if(this.tabsMenu){this.tabsMenu.destroy();this.un("destroy",this.tabsMenu.destroy,this.tabsMenu);this.tabsMenu=null;}this.tabsMenu=new Ext.menu.Menu();this.on("destroy",this.tabsMenu.destroy,this.tabsMenu);this.generateTabMenuItems();var d=Ext.get(f.getTarget());var e=d.getXY();e[1]+=24;this.tabsMenu.showAt(e);},generateTabMenuItems:function(){var v=this.getActiveTab();var i=this.items.getCount();var p=this.tabScrollerMenu.getPageSize();if(i>p){var s=Math.floor(i/p);var n=i%p;for(var r=0;r<s;r++){var q=(r+1)*p;var u=[];for(var o=0;o<p;o++){index=o+q-p;var m=this.items.get(index);u.push(this.autoGenMenuItem(m));}this.tabsMenu.add({text:this.tabScrollerMenu.getMenuPrefixText()+" "+(q-p+1)+" - "+q,menu:u});}if(n>0){var t=s*p;u=[];for(var r=t;r<i;r++){var m=this.items.get(r);u.push(this.autoGenMenuItem(m));}this.tabsMenu.add({text:this.tabScrollerMenu.menuPrefixText+" "+(t+1)+" - "+(t+u.length),menu:u});}}else{this.items.each(function(a){if(a.id!=v.id&&!a.hidden){u.push(this.autoGenMenuItem(a));}},this);}},autoGenMenuItem:function(d){var e=this.tabScrollerMenu.getMaxText();var f=Ext.util.Format.ellipsis(d.title,e);return{text:f,handler:this.showTabFromMenu,scope:this,disabled:d.disabled,tabToShow:d,iconCls:d.iconCls};},showTabFromMenu:function(b){this.setActiveTab(b.tabToShow);}}});Ext.reg("tabscrollermenu",Ext.ux.TabScrollerMenu);