Ext.ns("Ext.ux.data");Ext.ux.data.PagingStore=Ext.extend(Ext.data.Store,{destroy:function(){if(this.storeId||this.id){Ext.StoreMgr.unregister(this);}delete this.data;delete this.allData;delete this.snapshot;this.purgeListeners();},add:function(e){e=[].concat(e);if(e.length<1){return;}for(var g=0,f=e.length;g<f;g++){e[g].join(this);}var h=this.data.length;this.data.addAll(e);if(this.allData){this.allData.addAll(e);}if(this.snapshot){this.snapshot.addAll(e);}this.fireEvent("add",this,e,h);},remove:function(d){var c=this.data.indexOf(d);this.data.removeAt(c);if(this.allData){this.allData.remove(d);}if(this.snapshot){this.snapshot.remove(d);}if(this.pruneModifiedRecords){this.modified.remove(d);}this.fireEvent("remove",this,d,c);},removeAll:function(){this.data.clear();if(this.allData){this.allData.clear();}if(this.snapshot){this.snapshot.clear();}if(this.pruneModifiedRecords){this.modified=[];}this.fireEvent("clear",this);},insert:function(h,e){e=[].concat(e);for(var g=0,f=e.length;g<f;g++){this.data.insert(h,e[g]);e[g].join(this);}if(this.allData){this.allData.addAll(e);}if(this.snapshot){this.snapshot.addAll(e);}this.fireEvent("add",this,e,h);},getById:function(b){return(this.snapshot||this.allData||this.data).key(b);},load:function(d){d=d||{};if(this.fireEvent("beforeload",this,d)!==false){this.storeOptions(d);var f=Ext.apply({},d.params,this.baseParams);if(this.sortInfo&&this.remoteSort){var e=this.paramNames;f[e["sort"]]=this.sortInfo.field;f[e["dir"]]=this.sortInfo.direction;}if(this.isPaging(f)){(function(){if(this.allData){this.data=this.allData;delete this.allData;}this.applyPaging();this.fireEvent("datachanged",this);var a=[].concat(this.data.items);this.fireEvent("load",this,a,d);if(d.callback){d.callback.call(d.scope||this,a,d,true);}}).defer(1,this);return true;}this.proxy.load(f,this.reader,this.loadRecords,this,d);return true;}else{return false;}},loadRecords:function(j,h,k){if(!j||k===false){if(k!==false){this.fireEvent("load",this,[],h);}if(h.callback){h.callback.call(h.scope||this,[],h,false);}return;}var l=j.records,m=j.totalRecords||l.length;if(!h||h.add!==true){if(this.pruneModifiedRecords){this.modified=[];}for(var n=0,i=l.length;n<i;n++){l[n].join(this);}if(this.allData){this.data=this.allData;delete this.allData;}if(this.snapshot){this.data=this.snapshot;delete this.snapshot;}this.data.clear();this.data.addAll(l);this.totalLength=m;this.applySort();if(!this.allData){this.applyPaging();}if(l.length!=this.getCount()){l=[].concat(this.data.items);}this.fireEvent("datachanged",this);}else{this.totalLength=Math.max(m,this.data.length+l.length);this.add(l);}this.fireEvent("load",this,l,h);if(h.callback){h.callback.call(h.scope||this,l,h,true);}},loadData:function(f,e){this.isPaging(Ext.apply({},this.lastOptions?this.lastOptions.params:null,this.baseParams));var d=this.reader.readRecords(f);this.loadRecords(d,{add:e},true);},getTotalCount:function(){return this.allData?this.allData.getCount():this.totalLength||0;},filterBy:function(c,d){this.snapshot=this.snapshot||this.allData||this.data;delete this.allData;this.data=this.queryBy(c,d||this);this.applyPaging();this.fireEvent("datachanged",this);},queryBy:function(d,e){var f=this.snapshot||this.allData||this.data;return f.filterBy(d,e||this);},collect:function(n,l,s){var o=(s===true?this.snapshot||this.allData||this.data:this.data).items;var i,d,t=[],r={};for(var q=0,p=o.length;q<p;q++){i=o[q].data[n];d=String(i);if((l||!Ext.isEmpty(i))&&!r[d]){r[d]=true;t[t.length]=i;}}return t;},clearFilter:function(b){if(this.isFiltered()){this.data=this.snapshot;delete this.allData;delete this.snapshot;this.applyPaging();if(b!==true){this.fireEvent("datachanged",this);}}},isFiltered:function(){return this.snapshot&&this.snapshot!=(this.allData||this.data);},isPaging:function(j){var g=this.paramNames,i=j[g.start],h=j[g.limit];if((typeof i!="number")||(typeof h!="number")){delete this.start;delete this.limit;this.lastParams=j;return false;}this.start=i;this.limit=h;delete j[g.start];delete j[g.limit];var l=this.lastParams;this.lastParams=j;if(!this.proxy){return true;}if(!l){return false;}for(var k in j){if(j.hasOwnProperty(k)&&(j[k]!==l[k])){return false;}}for(k in l){if(l.hasOwnProperty(k)&&(j[k]!==l[k])){return false;}}return true;},applyPaging:function(){var k=this.start,i=this.limit;if((typeof k=="number")&&(typeof i=="number")){var n=this.data,m=new Ext.util.MixedCollection(n.allowFunctions,n.getKey);m.items=n.items.slice(k,k+i);m.keys=n.keys.slice(k,k+i);var j=m.length=m.items.length;var l={};for(var p=0;p<j;p++){var o=m.items[p];l[m.getKey(o)]=o;}m.map=l;this.allData=n;this.data=m;}}});Ext.ux.data.SimplePagingStore=function(b){Ext.ux.data.SimplePagingStore.superclass.constructor.call(this,Ext.apply(b,{reader:new Ext.data.ArrayReader(b)}));};Ext.extend(Ext.ux.data.SimplePagingStore,Ext.ux.data.PagingStore,{loadData:function(h,f){if(this.expandData===true){var i=[];for(var j=0,g=h.length;j<g;j++){i[i.length]=[h[j]];}h=i;}Ext.ux.data.SimplePagingStore.superclass.loadData.call(this,h,f);}});Ext.ux.data.JsonPagingStore=function(b){Ext.ux.data.JsonPagingStore.superclass.constructor.call(this,Ext.apply(b,{reader:new Ext.data.JsonReader(b)}));};Ext.extend(Ext.ux.data.JsonPagingStore,Ext.ux.data.PagingStore);