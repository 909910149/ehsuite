Ext.tree.ColumnResizer=Ext.extend(Ext.util.Observable,{minWidth:14,constructor:function(b){Ext.apply(this,b);Ext.tree.ColumnResizer.superclass.constructor.call(this);},init:function(b){this.tree=b;b.on("render",this.initEvents,this);},initEvents:function(b){b.mon(b.innerHd,"mousemove",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(b.innerHd);b.on("beforedestroy",this.tracker.destroy,this.tracker);},handleHdMove:function(p,l){var o=5,m=p.getPageX(),q=p.getTarget(".x-treegrid-hd",3,true);if(q){var s=q.getRegion(),e=q.dom.style,r=q.dom.parentNode;if(m-s.left<=o&&q.dom!==r.firstChild){var t=q.dom.previousSibling;while(t&&Ext.fly(t).hasClass("x-treegrid-hd-hidden")){t=t.previousSibling;}if(t){this.activeHd=Ext.get(t);e.cursor=Ext.isWebKit?"e-resize":"col-resize";}}else{if(s.right-m<=o){var n=q.dom;while(n&&Ext.fly(n).hasClass("x-treegrid-hd-hidden")){n=n.previousSibling;}if(n){this.activeHd=Ext.get(n);e.cursor=Ext.isWebKit?"w-resize":"col-resize";}}else{delete this.activeHd;e.cursor="";}}}},onBeforeStart:function(b){this.dragHd=this.activeHd;return !!this.dragHd;},onStart:function(c){this.tree.headersDisabled=true;this.proxy=this.tree.body.createChild({cls:"x-treegrid-resizer"});this.proxy.setHeight(this.tree.body.getHeight());var d=this.tracker.getXY()[0];this.hdX=this.dragHd.getX();this.hdIndex=this.tree.findHeaderIndex(this.dragHd);this.proxy.setX(this.hdX);this.proxy.setWidth(d-this.hdX);this.maxWidth=this.tree.outerCt.getWidth()-this.tree.innerBody.translatePoints(this.hdX).left;},onDrag:function(c){var d=this.tracker.getXY()[0];this.proxy.setWidth((d-this.hdX).constrain(this.minWidth,this.maxWidth));},onEnd:function(f){var d=this.proxy.getWidth(),e=this.tree;this.proxy.remove();delete this.dragHd;e.columns[this.hdIndex].width=d;e.updateColumnWidths();setTimeout(function(){e.headersDisabled=false;},100);}});