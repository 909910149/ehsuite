ArchTemplateSelector=Ext.extend(Ext.Window,{curTypeId:null,constructor:function(b){Ext.applyIf(this,b);this.initUIComponents();ArchiveTypeTempView.superclass.constructor.call(this,{title:"公文模板选择",iconCls:"menu-archive-template",layout:"border",maximizable:true,width:800,height:500,modal:true,closeAction:"hide",scope:this,items:[this.leftTypePanel,this.archTemplateView],buttonAlign:"center",buttons:[{text:"选择模板",iconCls:"menu-archive-template",scope:this,handler:function(){if(this.callback!=null){var a=this.archTemplateView.gridPanel.getSelectionModel().getSelections();if(a.length==0){Ext.ux.Toast.msg("信息","请选择模板！");return;}this.callback.call(this,a[0].data.fileId);this.close();}}},{text:"取消",iconCls:"btn-cancel",scope:this,handler:function(){this.close();}}]});},initUIComponents:function(){this.archTemplateView=new ArchTemplateView({allowEdit:false,singleSelect:true});var b=this.archTemplateView;this.leftTypePanel=new htsoft.ux.TreePanelEditor({region:"west",title:"公文分类",collapsible:true,split:true,width:200,url:__ctxPath+"/system/flowTreeGlobalType.do?catKey=ARC_TEM_TYPE",scope:this,onclick:function(e){var f=e.id;if(e.id==0){b.setTitle("所有模板");f=null;}else{b.setTitle("["+e.text+"]模板列表");}b.setTypeId(e.id);var a=b.gridPanel.getStore();a.url=__ctxPath+"/archive/listArchTemplate.do";a.baseParams={"Q_archivesType.proTypeId_L_EQ":f};a.params={start:0,limit:25};a.reload({params:{start:0,limit:25}});}});}});