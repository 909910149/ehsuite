ArchiveTypeTempView=Ext.extend(Ext.Panel,{curTypeId:null,constructor:function(b){Ext.applyIf(this,b);this.initUIComponents();ArchiveTypeTempView.superclass.constructor.call(this,{id:"ArchiveTypeTempView",title:"公文分类及模板管理",layout:"border",iconCls:"menu-archive-template",scope:this,items:[this.leftTypePanel,this.archTemplateView]});},initUIComponents:function(){this.archTemplateView=new ArchTemplateView({allowEdit:true});var d=this.archTemplateView;var c=[{text:"新建分类",scope:this,iconCls:"btn-add",handler:function(){var a=this.leftTypePanel.selectedNode.id;var f="ARC_TEM_TYPE";var b=new GlobalTypeForm({parentId:a,catKey:f,callback:function(){Ext.getCmp("archivesTypeTree").root.reload();}});b.show();}},{text:"修改分类",scope:this,iconCls:"btn-edit",handler:function(){var b=this.leftTypePanel.selectedNode.id;var a=new GlobalTypeForm({proTypeId:b,callback:function(){Ext.getCmp("archivesTypeTree").root.reload();}});a.show();}}];this.leftTypePanel=new htsoft.ux.TreePanelEditor({region:"west",id:"archivesTypeTree",title:"公文分类",collapsible:true,split:true,width:200,url:__ctxPath+"/system/flowTreeGlobalType.do?catKey=ARC_TEM_TYPE",scope:this,onclick:function(a){var b=a.id;if(a.id==0){d.setTitle("所有模板");b=null;}else{d.setTitle("["+a.text+"]模板列表");}d.setTypeId(a.id);d.setTypeName(a.text);var f=d.gridPanel.getStore();f.url=__ctxPath+"/archive/listArchTemplate.do";f.baseParams={"Q_archivesType.proTypeId_L_EQ":b};f.params={start:0,limit:25};f.reload({params:{start:0,limit:25}});},contextMenuItems:c});}});