TaskDueDateWindow=Ext.extend(Ext.Window,{constructor:function(b){Ext.applyIf(this,b);TaskDueDateWindow.superclass.constructor.call(this,{title:"为任务设置限期时间",height:120,width:350,layout:"form",modal:true,bodyStyle:"padding:5px",buttonAlign:"center",items:[{fieldLabel:"限期时间",xtype:"datetimefield",format:"Y-m-d H:i:s",name:"dueDate",anchor:"98%,98%",value:this.dueDate?this.dueDate:""}],buttons:[{text:"保存",iconCls:"btn-save",scope:this,handler:this.save},{text:"关闭",iconCls:"btn-cancel",scope:this,handler:this.close}]});},save:function(){var l=this.getCmpByName("dueDate");var h=this.taskGrid?this.taskGrid:Ext.getCmp("allTaskGrid");var g=h.getSelectionModel().getSelections();var i="";for(var k=0;k<g.length;k++){if(k>0){i+=",";}i+=g[k].data.taskId;}if(l.getValue()==""){Ext.ux.Toast.msg("操作信息","请填写日期数据！");return;}var j=Ext.util.Format.date(l.getValue(),"Y-m-d H:i:s");Ext.Ajax.request({url:__ctxPath+"/flow/dueTask.do",method:"POST",scope:this,params:{taskIds:i,dueDate:j},success:function(b,a){h.getStore().reload();},failure:function(b,a){this.close();}});this.close();}});