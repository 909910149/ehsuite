ViewFileWindow=Ext.extend(Ext.Window,{index:0,constructor:function(b){Ext.applyIf(this,b);this.index=this.startIndex;this.initUIComponents();ViewFileWindow.superclass.constructor.call(this,{id:"ViewFileWindowWin",region:"center",layout:"form",frame:true,border:true,modal:true,height:600,width:550,maximizable:true,title:"附件预览",buttonAlign:"center",buttons:[{text:"",iconCls:"btn-top",scope:this,handler:this.up},{text:"",iconCls:"btn-down",scope:this,handler:this.down}],items:[{xtype:"iframepanel",id:"ViewFileWindow.iframepanel",frame:false,border:false,style:"margin:0 auto",loadMask:true,autoLoad:false,listeners:{afterrender:function(a){}}},{xtype:"panel",id:"ViewFileWindow.panel",height:30,frame:false,border:false,autoLoad:false}],listeners:{"afterrender":function(l){var m=Ext.getCmp("ViewFileWindow.iframepanel");var o=Ext.getCmp("ViewFileWindow.panel");var p=l.getInnerHeight();var j=o.getHeight();m.setHeight(p-j);if(l.viewConfig&&l.viewConfig.length>0){var n=l.viewConfig[l.index].fileName.lastIndexOf(".");var k=l.viewConfig[l.index].fileName.length;var a=l.viewConfig[l.index].fileName.substring((n+1),k);if(a=="png"||a=="PNG"||a=="gif"||a=="GIF"||a=="jpg"||a=="JPG"||a=="bmp"||a=="BMP"||a=="xml"||a=="XML"||a=="txt"||a=="TXT"||a=="html"||a=="HTML"){m.setSrc(__ctxPath+"/attachFiles/"+l.viewConfig[l.index].filePath);}o.body.update('<div align="center">'+this.viewConfig[this.index].fileName+"</div>"+'<div align="center">'+'<a href="'+__ctxPath+"/attachFiles/"+this.viewConfig[this.index].filePath+'" target="_blank">下载</a>'+"</div>");}}}});},initUIComponents:function(){},up:function(){this.index=this.index-1;if(this.index>=0){var i=Ext.getCmp("ViewFileWindow.iframepanel");var j=this.viewConfig[this.index].fileName.lastIndexOf(".");var h=this.viewConfig[this.index].fileName.length;var f=this.viewConfig[this.index].fileName.substring((j+1),h);if(f=="png"||f=="PNG"||f=="gif"||f=="GIF"||f=="jpg"||f=="JPG"||f=="bmp"||f=="BMP"||f=="xml"||f=="XML"||f=="txt"||f=="TXT"||f=="html"||f=="HTML"){i.setSrc(__ctxPath+"/attachFiles/"+this.viewConfig[this.index].filePath);}else{i.resetFrame();}var g=Ext.getCmp("ViewFileWindow.panel");g.body.update('<div align="center">'+this.viewConfig[this.index].fileName+"</div>"+'<div align="center">'+'<a href="'+__ctxPath+"/attachFiles/"+this.viewConfig[this.index].filePath+'" target="_blank">下载</a>'+"</div>");}else{this.index=0;Ext.ux.Toast.msg("操作信息","已是第一张！");}},down:function(){this.index=this.index+1;if(this.index<this.viewConfig.length){var i=Ext.getCmp("ViewFileWindow.iframepanel");var j=this.viewConfig[this.index].fileName.lastIndexOf(".");var h=this.viewConfig[this.index].fileName.length;var f=this.viewConfig[this.index].fileName.substring((j+1),h);if(f=="png"||f=="PNG"||f=="gif"||f=="GIF"||f=="jpg"||f=="JPG"||f=="bmp"||f=="BMP"||f=="xml"||f=="XML"||f=="txt"||f=="TXT"||f=="html"||f=="HTML"){i.setSrc(__ctxPath+"/attachFiles/"+this.viewConfig[this.index].filePath);}else{i.resetFrame();}var g=Ext.getCmp("ViewFileWindow.panel");g.body.update('<div align="center">'+this.viewConfig[this.index].fileName+"</div>"+'<div align="center">'+'<a href="'+__ctxPath+"/attachFiles/"+this.viewConfig[this.index].filePath+'" target="_blank">下载</a>'+"</div>");}else{this.index=this.viewConfig.length-1;Ext.ux.Toast.msg("操作信息","已是最后一张！");}}});