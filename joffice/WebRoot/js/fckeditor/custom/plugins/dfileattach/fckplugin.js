FCKCommands.RegisterCommand("dfileattach",new FCKDialogCommand("dfileattach",FCKLang.FileAttachDlgTitle,FCKPlugins.Items["dfileattach"].Path+"fck_dfileattach.html",380,210));var oSItem=new FCKToolbarButton("dfileattach",FCKLang.FileAttachBtn);oSItem.IconPath=FCKPlugins.Items["dfileattach"].Path+"file.png";FCKToolbarItems.RegisterItem("dfileattach",oSItem);FCK.ContextMenu.RegisterListener({AddItems:function(f,e,d){if(d=="INPUT"&&e.getAttribute("isfileattach")){f.RemoveAllItems();f.AddItem("Cut",FCKLang.Cut,7,FCKCommands.GetCommand("Cut").GetState()==FCK_TRISTATE_DISABLED);f.AddItem("Copy",FCKLang.Copy,8,FCKCommands.GetCommand("Copy").GetState()==FCK_TRISTATE_DISABLED);f.AddItem("Paste",FCKLang.Paste,9,FCKCommands.GetCommand("Paste").GetState()==FCK_TRISTATE_DISABLED);f.AddItem("dfileattach",FCKLang.FileAttachDlgTitle,FCKToolbarItems.GetItem("dfileattach").IconPath);}}});