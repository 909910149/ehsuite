var FCKSpecialCombo=function(g,f,j,h,i){this.FieldWidth=f||100;this.PanelWidth=j||150;this.PanelMaxHeight=h||150;this.Label="&nbsp;";this.Caption=g;this.Tooltip=g;this.Style=FCK_TOOLBARITEM_ICONTEXT;this.Enabled=true;this.Items=new Object();this._Panel=new FCKPanel(i||window);this._Panel.AppendStyleSheet(FCKConfig.SkinEditorCSS);this._PanelBox=this._Panel.MainNode.appendChild(this._Panel.Document.createElement("DIV"));this._PanelBox.className="SC_Panel";this._PanelBox.style.width=this.PanelWidth+"px";this._PanelBox.innerHTML='<table cellpadding="0" cellspacing="0" width="100%" style="TABLE-LAYOUT: fixed"><tr><td nowrap></td></tr></table>';this._ItemsHolderEl=this._PanelBox.getElementsByTagName("TD")[0];if(FCK.IECleanup){FCK.IECleanup.AddItem(this,FCKSpecialCombo_Cleanup);}};function FCKSpecialCombo_ItemOnMouseOver(){this.className+=" SC_ItemOver";}function FCKSpecialCombo_ItemOnMouseOut(){this.className=this.originalClass;}function FCKSpecialCombo_ItemOnClick(d,e,f){this.className=this.originalClass;e._Panel.Hide();e.SetLabel(this.FCKItemLabel);if(typeof(e.OnSelect)=="function"){e.OnSelect(f,this);}}FCKSpecialCombo.prototype.ClearItems=function(){if(this.Items){this.Items={};}var b=this._ItemsHolderEl;while(b.firstChild){b.removeChild(b.firstChild);}};FCKSpecialCombo.prototype.AddItem=function(h,j,f,i){var g=this._ItemsHolderEl.appendChild(this._Panel.Document.createElement("DIV"));g.className=g.originalClass="SC_Item";g.innerHTML=j;g.FCKItemLabel=f||h;g.Selected=false;if(FCKBrowserInfo.IsIE){g.style.width="100%";}if(i){g.style.backgroundColor=i;}FCKTools.AddEventListenerEx(g,"mouseover",FCKSpecialCombo_ItemOnMouseOver);FCKTools.AddEventListenerEx(g,"mouseout",FCKSpecialCombo_ItemOnMouseOut);FCKTools.AddEventListenerEx(g,"click",FCKSpecialCombo_ItemOnClick,[this,h]);this.Items[h.toString().toLowerCase()]=g;return g;};FCKSpecialCombo.prototype.SelectItem=function(b){if(typeof b=="string"){b=this.Items[b.toString().toLowerCase()];}if(b){b.className=b.originalClass="SC_ItemSelected";b.Selected=true;}};FCKSpecialCombo.prototype.SelectItemByLabel=function(h,e){for(var g in this.Items){var f=this.Items[g];if(f.FCKItemLabel==h){f.className=f.originalClass="SC_ItemSelected";f.Selected=true;if(e){this.SetLabel(h);}}}};FCKSpecialCombo.prototype.DeselectAll=function(c){for(var d in this.Items){if(!this.Items[d]){continue;}this.Items[d].className=this.Items[d].originalClass="SC_Item";this.Items[d].Selected=false;}if(c){this.SetLabel("");}};FCKSpecialCombo.prototype.SetLabelById=function(c){c=c?c.toString().toLowerCase():"";var d=this.Items[c];this.SetLabel(d?d.FCKItemLabel:"");};FCKSpecialCombo.prototype.SetLabel=function(c){c=(!c||c.length==0)?"&nbsp;":c;if(c==this.Label){return;}this.Label=c;var d=this._LabelEl;if(d){d.innerHTML=c;FCKTools.DisableSelection(d);}};FCKSpecialCombo.prototype.SetEnabled=function(b){this.Enabled=b;if(this._OuterTable){this._OuterTable.className=b?"":"SC_FieldDisabled";}};FCKSpecialCombo.prototype.Create=function(n){var h=FCKTools.GetElementDocument(n);var i=this._OuterTable=n.appendChild(h.createElement("TABLE"));i.cellPadding=0;i.cellSpacing=0;i.insertRow(-1);var j;var l;switch(this.Style){case FCK_TOOLBARITEM_ONLYICON:j="TB_ButtonType_Icon";l=false;break;case FCK_TOOLBARITEM_ONLYTEXT:j="TB_ButtonType_Text";l=false;break;case FCK_TOOLBARITEM_ICONTEXT:l=true;break;}if(this.Caption&&this.Caption.length>0&&l){var k=i.rows[0].insertCell(-1);k.innerHTML=this.Caption;k.className="SC_FieldCaption";}var m=FCKTools.AppendElement(i.rows[0].insertCell(-1),"div");if(l){m.className="SC_Field";m.style.width=this.FieldWidth+"px";m.innerHTML='<table width="100%" cellpadding="0" cellspacing="0" style="TABLE-LAYOUT: fixed;"><tbody><tr><td class="SC_FieldLabel"><label>&nbsp;</label></td><td class="SC_FieldButton">&nbsp;</td></tr></tbody></table>';this._LabelEl=m.getElementsByTagName("label")[0];this._LabelEl.innerHTML=this.Label;}else{m.className="TB_Button_Off";m.innerHTML='<table title="'+this.Tooltip+'" class="'+j+'" cellspacing="0" cellpadding="0" border="0">'+"<tr>"+'<td><img class="TB_Button_Padding" src="'+FCK_SPACER_PATH+'" /></td>'+'<td class="TB_Text">'+this.Caption+"</td>"+'<td><img class="TB_Button_Padding" src="'+FCK_SPACER_PATH+'" /></td>'+'<td class="TB_ButtonArrow"><img src="'+FCKConfig.SkinPath+'images/toolbar.buttonarrow.gif" width="5" height="3"></td>'+'<td><img class="TB_Button_Padding" src="'+FCK_SPACER_PATH+'" /></td>'+"</tr>"+"</table>";}FCKTools.AddEventListenerEx(m,"mouseover",FCKSpecialCombo_OnMouseOver,this);FCKTools.AddEventListenerEx(m,"mouseout",FCKSpecialCombo_OnMouseOut,this);FCKTools.AddEventListenerEx(m,"click",FCKSpecialCombo_OnClick,this);FCKTools.DisableSelection(this._Panel.Document.body);};function FCKSpecialCombo_Cleanup(){this._LabelEl=null;this._OuterTable=null;this._ItemsHolderEl=null;this._PanelBox=null;if(this.Items){for(var b in this.Items){this.Items[b]=null;}}}function FCKSpecialCombo_OnMouseOver(c,d){if(d.Enabled){switch(d.Style){case FCK_TOOLBARITEM_ONLYICON:this.className="TB_Button_On_Over";break;case FCK_TOOLBARITEM_ONLYTEXT:this.className="TB_Button_On_Over";break;case FCK_TOOLBARITEM_ICONTEXT:this.className="SC_Field SC_FieldOver";break;}}}function FCKSpecialCombo_OnMouseOut(c,d){switch(d.Style){case FCK_TOOLBARITEM_ONLYICON:this.className="TB_Button_Off";break;case FCK_TOOLBARITEM_ONLYTEXT:this.className="TB_Button_Off";break;case FCK_TOOLBARITEM_ICONTEXT:this.className="SC_Field";break;}}function FCKSpecialCombo_OnClick(j,e){if(e.Enabled){var k=e._Panel;var l=e._PanelBox;var i=e._ItemsHolderEl;var h=e.PanelMaxHeight;if(e.OnBeforeClick){e.OnBeforeClick(e);}if(FCKBrowserInfo.IsIE){k.Preload(0,this.offsetHeight,this);}if(i.offsetHeight>h){l.style.height=h+"px";}else{l.style.height="";}k.Show(0,this.offsetHeight,this);}}