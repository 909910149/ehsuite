var FCKDocumentProcessor=new Object();FCKDocumentProcessor._Items=new Array();FCKDocumentProcessor.AppendNew=function(){var b=new Object();this._Items.push(b);return b;};FCKDocumentProcessor.Process=function(f){var e=FCK.IsDirty();var g,h=0;while((g=this._Items[h++])){g.ProcessDocument(f);}if(!e){FCK.ResetIsDirty();}};var FCKDocumentProcessor_CreateFakeImage=function(e,d){var f=FCKTools.GetElementDocument(d).createElement("IMG");f.className=e;f.src=FCKConfig.BasePath+"images/spacer.gif";f.setAttribute("_fckfakelement","true",0);f.setAttribute("_fckrealelement",FCKTempBin.AddElement(d),0);return f;};if(FCKBrowserInfo.IsIE||FCKBrowserInfo.IsOpera){var FCKAnchorsProcessor=FCKDocumentProcessor.AppendNew();FCKAnchorsProcessor.ProcessDocument=function(g){var f=g.getElementsByTagName("A");var h;var j=f.length-1;while(j>=0&&(h=f[j--])){if(h.name.length>0){if(h.innerHTML!==""){if(FCKBrowserInfo.IsIE){h.className+=" FCK__AnchorC";}}else{var i=FCKDocumentProcessor_CreateFakeImage("FCK__Anchor",h.cloneNode(true));i.setAttribute("_fckanchor","true",0);h.parentNode.insertBefore(i,h);h.parentNode.removeChild(h);}}}};}var FCKPageBreaksProcessor=FCKDocumentProcessor.AppendNew();FCKPageBreaksProcessor.ProcessDocument=function(g){var h=g.getElementsByTagName("DIV");var f;var i=h.length-1;while(i>=0&&(f=h[i--])){if(f.style.pageBreakAfter=="always"&&f.childNodes.length==1&&f.childNodes[0].style&&f.childNodes[0].style.display=="none"){var j=FCKDocumentProcessor_CreateFakeImage("FCK__PageBreak",f.cloneNode(true));f.parentNode.insertBefore(j,f);f.parentNode.removeChild(f);}}};var FCKEmbedAndObjectProcessor=(function(){var h=[];var f=function(b){var a=b.cloneNode(true);var d;var i=d=FCKDocumentProcessor_CreateFakeImage("FCK__UnknownObject",a);FCKEmbedAndObjectProcessor.RefreshView(i,b);for(var c=0;c<h.length;c++){d=h[c](b,d)||d;}if(d!=i){FCKTempBin.RemoveElement(i.getAttribute("_fckrealelement"));}b.parentNode.replaceChild(d,b);};var g=function(c,a){var d=a.getElementsByTagName(c);for(var b=d.length-1;b>=0;b--){f(d[b]);}};var e=function(a){g("object",a);g("embed",a);};return FCKTools.Merge(FCKDocumentProcessor.AppendNew(),{ProcessDocument:function(a){if(FCKBrowserInfo.IsGecko){FCKTools.RunFunction(e,this,[a]);}else{e(a);}},RefreshView:function(a,b){if(b.getAttribute("width")>0){a.style.width=FCKTools.ConvertHtmlSizeToStyle(b.getAttribute("width"));}if(b.getAttribute("height")>0){a.style.height=FCKTools.ConvertHtmlSizeToStyle(b.getAttribute("height"));}},AddCustomHandler:function(a){h.push(a);}});})();FCK.GetRealElement=function(d){var c=FCKTempBin.Elements[d.getAttribute("_fckrealelement")];if(d.getAttribute("_fckflash")){if(d.style.width.length>0){c.width=FCKTools.ConvertStyleSizeToHtml(d.style.width);}if(d.style.height.length>0){c.height=FCKTools.ConvertStyleSizeToHtml(d.style.height);}}return c;};if(FCKBrowserInfo.IsIE){FCKDocumentProcessor.AppendNew().ProcessDocument=function(g){var i=g.getElementsByTagName("HR");var h;var f=i.length-1;while(f>=0&&(h=i[f--])){var j=g.createElement("hr");j.mergeAttributes(h,true);FCKDomTools.InsertAfterNode(h,j);h.parentNode.removeChild(h);}};}FCKDocumentProcessor.AppendNew().ProcessDocument=function(g){var h=g.getElementsByTagName("INPUT");var i;var f=h.length-1;while(f>=0&&(i=h[f--])){if(i.type=="hidden"){var j=FCKDocumentProcessor_CreateFakeImage("FCK__InputHidden",i.cloneNode(true));j.setAttribute("_fckinputhidden","true",0);i.parentNode.insertBefore(j,i);i.parentNode.removeChild(i);}}};FCKEmbedAndObjectProcessor.AddCustomHandler(function(c,d){if(!(c.nodeName.IEquals("embed")&&(c.type=="application/x-shockwave-flash"||/\.swf($|#|\?)/i.test(c.src)))){return;}d.className="FCK__Flash";d.setAttribute("_fckflash","true",0);});if(FCKBrowserInfo.IsSafari){FCKDocumentProcessor.AppendNew().ProcessDocument=function(f){var d=f.getElementsByClassName?f.getElementsByClassName("Apple-style-span"):Array.prototype.filter.call(f.getElementsByTagName("span"),function(a){return a.className=="Apple-style-span";});for(var e=d.length-1;e>=0;e--){FCKDomTools.RemoveNode(d[e],true);}};}