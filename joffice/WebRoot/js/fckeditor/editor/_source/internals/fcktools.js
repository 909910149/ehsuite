var FCKTools=new Object();FCKTools.CreateBogusBR=function(d){var c=d.createElement("br");c.setAttribute("type","_moz");return c;};FCKTools.FixCssUrls=function(d,c){if(!d||d.length==0){return c;}return c.replace(/url\s*\(([\s'"]*)(.*?)([\s"']*)\)/g,function(h,g,b,a){if(/^\/|^\w?:/.test(b)){return h;}else{return"url("+g+d+b+a+")";}});};FCKTools._GetUrlFixedCss=function(f,d){var e=f.match(/^([^|]+)\|([\s\S]*)/);if(e){return FCKTools.FixCssUrls(e[1],e[2]);}else{return f;}};FCKTools.AppendStyleSheet=function(g,h){if(!h){return[];}if(typeof(h)=="string"){if(/[\\\/\.][^{}]*$/.test(h)){return this.AppendStyleSheet(g,h.split(","));}else{return[this.AppendStyleString(g,FCKTools._GetUrlFixedCss(h))];}}else{var e=[];for(var f=0;f<h.length;f++){e.push(this._AppendStyleSheet(g,h[f]));}return e;}};FCKTools.GetStyleHtml=(function(){var d=function(a,b){if(a.length==0){return"";}var f=b?' _fcktemp="true"':"";return"<"+'style type="text/css"'+f+">"+a+"<"+"/style>";};var c=function(f,a){if(f.length==0){return"";}var b=a?' _fcktemp="true"':"";return"<"+'link href="'+f+'" type="text/css" rel="stylesheet" '+b+"/>";};return function(a,b){if(!a){return"";}if(typeof(a)=="string"){if(/[\\\/\.][^{}]*$/.test(a)){return this.GetStyleHtml(a.split(","),b);}else{return d(this._GetUrlFixedCss(a),b);}}else{var g="";for(var h=0;h<a.length;h++){g+=c(a[h],b);}return g;}};})();FCKTools.GetElementDocument=function(b){return b.ownerDocument||b.document;};FCKTools.GetElementWindow=function(b){return this.GetDocumentWindow(this.GetElementDocument(b));};FCKTools.GetDocumentWindow=function(b){if(FCKBrowserInfo.IsSafari&&!b.parentWindow){this.FixDocumentParentWindow(window.top);}return b.parentWindow||b.defaultView;};FCKTools.FixDocumentParentWindow=function(c){if(c.document){c.document.parentWindow=c;}for(var d=0;d<c.frames.length;d++){FCKTools.FixDocumentParentWindow(c.frames[d]);}};FCKTools.HTMLEncode=function(b){if(!b){return"";}b=b.replace(/&/g,"&amp;");b=b.replace(/</g,"&lt;");b=b.replace(/>/g,"&gt;");return b;};FCKTools.HTMLDecode=function(b){if(!b){return"";}b=b.replace(/&gt;/g,">");b=b.replace(/&lt;/g,"<");b=b.replace(/&amp;/g,"&");return b;};FCKTools._ProcessLineBreaksForPMode=function(n,c,p,w,t){var i=0;var u="<p>";var s="</p>";var r="<br />";if(p){u="<li>";s="</li>";i=1;}while(w&&w!=n.FCK.EditorDocument.body){if(w.tagName.toLowerCase()=="p"){i=1;break;}w=w.parentNode;}for(var v=0;v<c.length;v++){var q=c.charAt(v);if(q=="\r"){continue;}if(q!="\n"){t.push(q);continue;}var x=c.charAt(v+1);if(x=="\r"){v++;x=c.charAt(v+1);}if(x=="\n"){v++;if(i){t.push(s);}t.push(u);i=1;}else{t.push(r);}}};FCKTools._ProcessLineBreaksForDivMode=function(m,c,n,t,q){var i=0;var r="<div>";var p="</div>";if(n){r="<li>";p="</li>";i=1;}while(t&&t!=m.FCK.EditorDocument.body){if(t.tagName.toLowerCase()=="div"){i=1;break;}t=t.parentNode;}for(var s=0;s<c.length;s++){var o=c.charAt(s);if(o=="\r"){continue;}if(o!="\n"){q.push(o);continue;}if(i){if(q[q.length-1]==r){q.push("&nbsp;");}q.push(p);}q.push(r);i=1;}if(i){q.push(p);}};FCKTools._ProcessLineBreaksForBrMode=function(m,c,n,t,q){var i=0;var r="<br />";var p="";if(n){r="<li>";p="</li>";i=1;}for(var s=0;s<c.length;s++){var o=c.charAt(s);if(o=="\r"){continue;}if(o!="\n"){q.push(o);continue;}if(i&&p.length){q.push(p);}q.push(r);i=1;}};FCKTools.ProcessLineBreaks=function(l,n,k){var p=n.EnterMode.toLowerCase();var j=[];var m=0;var i=new l.FCKDomRange(l.FCK.EditorWindow);i.MoveToSelection();var o=i._Range.startContainer;while(o&&o.nodeType!=1){o=o.parentNode;}if(o&&o.tagName.toLowerCase()=="li"){m=1;}if(p=="p"){this._ProcessLineBreaksForPMode(l,k,m,o,j);}else{if(p=="div"){this._ProcessLineBreaksForDivMode(l,k,m,o,j);}else{if(p=="br"){this._ProcessLineBreaksForBrMode(l,k,m,o,j);}}}return j.join("");};FCKTools.AddSelectOption=function(f,g,h){var e=FCKTools.GetElementDocument(f).createElement("OPTION");e.text=g;e.value=h;f.options.add(e);return e;};FCKTools.RunFunction=function(h,f,g,e){if(h){this.SetTimeout(h,0,f,g,e);}};FCKTools.SetTimeout=function(i,j,g,h,f){return(f||window).setTimeout(function(){if(h){i.apply(g,[].concat(h));}else{i.apply(g);}},j);};FCKTools.SetInterval=function(i,j,g,h,f){return(f||window).setInterval(function(){i.apply(g,h||[]);},j);};FCKTools.ConvertStyleSizeToHtml=function(b){return b.EndsWith("%")?b:parseInt(b,10);};FCKTools.ConvertHtmlSizeToStyle=function(b){return b.EndsWith("%")?b:(b+"px");};FCKTools.GetElementAscensor=function(e,f){var h=e;var g=","+f.toUpperCase()+",";while(h){if(g.indexOf(","+h.nodeName.toUpperCase()+",")!=-1){return h;}h=h.parentNode;}return null;};FCKTools.CreateEventListener=function(e,f){var d=function(){var a=[];for(var b=0;b<arguments.length;b++){a.push(arguments[b]);}e.apply(this,a.concat(f));};return d;};FCKTools.IsStrictMode=function(b){return("CSS1Compat"==(b.compatMode||(FCKBrowserInfo.IsSafari?"CSS1Compat":null)));};FCKTools.ArgumentsToArray=function(f,h,g){h=h||0;g=g||f.length;var i=new Array();for(var j=h;j<h+g&&j<f.length;j++){i.push(f[j]);}return i;};FCKTools.CloneObject=function(c){var d=function(){};d.prototype=c;return new d;};FCKTools.AppendBogusBr=function(d){if(!d){return;}var e=this.GetLastItem(d.getElementsByTagName("br"));if(!e||(e.getAttribute("type",2)!="_moz"&&e.getAttribute("_moz_dirty")==null)){var f=this.GetElementDocument(d);if(FCKBrowserInfo.IsOpera){d.appendChild(f.createTextNode(""));}else{d.appendChild(this.CreateBogusBR(f));}}};FCKTools.GetLastItem=function(b){if(b.length>0){return b[b.length-1];}return null;};FCKTools.GetDocumentPosition=function(p,m){var j=0;var k=0;var n=m;var i=null;var o=FCKTools.GetElementWindow(n);while(n&&!(o==p&&(n==p.document.body||n==p.document.documentElement))){j+=n.offsetLeft-n.scrollLeft;k+=n.offsetTop-n.scrollTop;if(!FCKBrowserInfo.IsOpera){var l=i;while(l&&l!=n){j-=l.scrollLeft;k-=l.scrollTop;l=l.parentNode;}}i=n;if(n.offsetParent){n=n.offsetParent;}else{if(o!=p){n=o.frameElement;i=null;if(n){o=n.contentWindow.parent;}}else{n=null;}}}if(FCKDomTools.GetCurrentElementStyle(p.document.body,"position")!="static"||(FCKBrowserInfo.IsIE&&FCKDomTools.GetPositionedAncestor(m)==null)){j+=p.document.body.offsetLeft;k+=p.document.body.offsetTop;}return{"x":j,"y":k};};FCKTools.GetWindowPosition=function(e,h){var g=this.GetDocumentPosition(e,h);var f=FCKTools.GetScrollPosition(e);g.x-=f.X;g.y-=f.Y;return g;};FCKTools.ProtectFormStyles=function(i){if(!i||i.nodeType!=1||i.tagName.toLowerCase()!="form"){return[];}var j=[];var k=["style","className"];for(var l=0;l<k.length;l++){var g=k[l];if(i.elements.namedItem(g)){var h=i.elements.namedItem(g);j.push([h,h.nextSibling]);i.removeChild(h);}}return j;};FCKTools.RestoreFormStyles=function(h,i){if(!h||h.nodeType!=1||h.tagName.toLowerCase()!="form"){return;}if(i.length>0){for(var g=i.length-1;g>=0;g--){var j=i[g][0];var f=i[g][1];if(f){h.insertBefore(j,f);}else{h.appendChild(j);}}}};FCKTools.GetNextNode=function(d,f){if(d.firstChild){return d.firstChild;}else{if(d.nextSibling){return d.nextSibling;}else{var e=d.parentNode;while(e){if(e==f){return null;}if(e.nextSibling){return e.nextSibling;}else{e=e.parentNode;}}}}return null;};FCKTools.GetNextTextNode=function(e,d,f){node=this.GetNextNode(e,d);if(f&&node&&f(node)){return null;}while(node&&node.nodeType!=3){node=this.GetNextNode(node,d);if(f&&node&&f(node)){return null;}}return node;};FCKTools.Merge=function(){var f=arguments;var h=f[0];for(var j=1;j<f.length;j++){var g=f[j];for(var i in g){h[i]=g[i];}}return h;};FCKTools.IsArray=function(b){return(b instanceof Array);};FCKTools.AppendLengthProperty=function(h,e){var f=0;for(var g in h){f++;}return h[e||"length"]=f;};FCKTools.NormalizeCssText=function(d){var c=document.createElement("span");c.style.cssText=d;return c.style.cssText;};FCKTools.Bind=function(d,c){return function(){return c.apply(d,arguments);};};FCKTools.GetVoidUrl=function(){if(FCK_IS_CUSTOM_DOMAIN){return"javascript: void( function(){"+"document.open();"+"document.write('<html><head><title></title></head><body></body></html>');"+"document.domain = '"+FCK_RUNTIME_DOMAIN+"';"+"document.close();"+"}() ) ;";}if(FCKBrowserInfo.IsIE){if(FCKBrowserInfo.IsIE7||!FCKBrowserInfo.IsIE6){return"";}else{return"javascript: '';";}}return"javascript: void(0);";};FCKTools.ResetStyles=function(b){b.style.cssText="margin:0;"+"padding:0;"+"border:0;"+"background-color:transparent;"+"background-image:none;";};