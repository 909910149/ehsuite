var FormDefSelector={getView:function(j,p){var l=new Ext.data.JsonStore({url:__ctxPath+"/flow/listFormDef.do?Q_status_SN_EQ=1",root:"result",totalProperty:"totalCounts",remoteSort:true,fields:[{name:"formDefId",type:"int"},"formTitle","formDesp","status"]});l.setDefaultSort("formDefId","desc");l.load({params:{start:0,limit:25}});var o=new Ext.ux.grid.RowActions({header:"管理",width:80,actions:[{iconCls:"btn-showDetail",qtip:"查看",style:"margin:0 3px 0 3px"}]});var r=new Ext.grid.CheckboxSelectionModel({singleSelect:true});var k=new Ext.grid.ColumnModel({columns:[r,new Ext.grid.RowNumberer(),{header:"formDefId",dataIndex:"formDefId",hidden:true},{header:"表单标题",dataIndex:"formTitle"},{header:"描述",dataIndex:"formDesp",sortable:false},o],defaults:{sortable:true,menuDisabled:false,width:100}});var q=new Ext.FormPanel({id:"FormDefSelectorSearchPanel",layout:"hbox",region:"north",anchor:"98%",url:__ctxPath+"/flow/formDef.do",height:40,frame:false,layoutConfig:{padding:"5px",align:"middle"},keys:{key:Ext.EventObject.ENTER,fn:this.search,scope:this},defaults:{xtype:"label",margins:{top:4,bottom:4,left:10,right:10}},items:[{text:"表单名称："},{anchor:"30%",xtype:"textfield",name:"Q_formTitle_S_LK",maxLength:128},{xtype:"button",text:"搜索",iconCls:"search",handler:this.search,scope:this}]});var n=new Ext.grid.GridPanel({id:"FormDefGrid",region:"center",stripeRows:true,store:l,trackMouseOver:true,disableSelection:false,loadMask:true,plugins:o,cm:k,sm:r,viewConfig:{forceFit:true,autoFill:true,forceFit:true},bbar:new HT.PagingBar({store:l})});o.on("action",this.onRowAction,this);var m=new Ext.Window({id:"FormDefSelectorWin",title:"流程表单选择",iconCls:"menu-form",maximizable:true,modal:true,width:650,height:400,layout:"border",items:[q,n],buttonAlign:"center",buttons:[{text:"确定",iconCls:"btn-ok",handler:function(){var a=Ext.getCmp("FormDefGrid").getSelectionModel().getSelections();if(a!=null&&a.length>0){if(j!=null){j.call(this,a[0].data.formDefId,a[0].data.formTitle);}}else{j.call(this,null,null);}m.close();}},{text:"取消",iconCls:"btn-cancel",handler:function(){m.close();}}]});return m;},search:function(){var c=Ext.getCmp("FormDefSelectorSearchPanel");var d=Ext.getCmp("FormDefGrid");if(c.getForm().isValid()){$search({searchPanel:c,gridPanel:d});}},onRowAction:function(j,g,i,h,f){switch(i){case"btn-showDetail":this.show(g.data.formDefId);break;}},show:function(b){FormDefDetailForm.show(b);}};