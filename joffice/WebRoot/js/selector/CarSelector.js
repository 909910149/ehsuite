var CarSelector={getView:function(j,o,p){var q=null;if(o){var q=new Ext.grid.CheckboxSelectionModel({singleSelect:true});}else{q=new Ext.grid.CheckboxSelectionModel();}var k=new Ext.grid.ColumnModel({columns:[q,new Ext.grid.RowNumberer(),{header:"carId",dataIndex:"carId",hidden:true},{header:"车辆车牌号",dataIndex:"carNo",width:60}]});var l=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:__ctxPath+"/admin/listCar.do"}),reader:new Ext.data.JsonReader({root:"result",totalProperty:"totalCounts",id:"carId",fields:[{name:"carId",type:"int"},"carNo"]}),remoteSort:true});var n=new Ext.grid.GridPanel({id:"CarSelectorGrid",width:400,height:300,region:"center",title:"车辆列表",store:l,shim:true,trackMouseOver:true,disableSelection:false,loadMask:true,cm:k,sm:q,viewConfig:{forceFit:true,enableRowBody:false,showPreview:false},bbar:new HT.PagingBar({store:l})});l.load({params:{start:0,limit:10,"Q_status_SN_EQ":p}});var r=new Ext.FormPanel({width:400,region:"north",id:"CarSearchForm",height:40,frame:false,border:false,layout:"hbox",layoutConfig:{padding:"5",align:"middle"},defaults:{xtype:"label",margins:{top:0,right:4,bottom:4,left:4}},items:[{text:"请输入查询条件:"},{text:"车辆车牌号"},{xtype:"textfield",name:"Q_carNo_S_LK"},{xtype:"button",text:"查询",iconCls:"search",handler:function(){var b=Ext.getCmp("CarSearchForm");var a=Ext.getCmp("CarSelectorGrid");if(b.getForm().isValid()){b.getForm().submit({waitMsg:"正在提交查询",url:__ctxPath+"/admin/listCar.do",params:{start:0,limit:10,"Q_status_SN_EQ":p},method:"post",success:function(c,e){var d=Ext.util.JSON.decode(e.response.responseText);a.getStore().loadData(d);}});}}}]});var m=new Ext.Window({title:"车辆选择",iconCls:"menu-car",width:630,height:380,layout:"border",border:false,items:[r,n],modal:true,buttonAlign:"center",buttons:[{iconCls:"btn-ok",text:"确定",handler:function(){var a=Ext.getCmp("CarSelectorGrid");var e=a.getSelectionModel().getSelections();var d="";var c="";for(var b=0;b<e.length;b++){if(b>0){d+=",";c+=",";}d+=e[b].data.carId;c+=e[b].data.carNo;}if(j!=null){j.call(this,d,c);}m.close();}},{text:"取消",iconCls:"btn-cancel",handler:function(){m.close();}}]});return m;}};