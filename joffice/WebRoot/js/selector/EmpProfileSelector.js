var EmpProfileSelector={getView:function(j){var k=new Ext.grid.CheckboxSelectionModel({singleSelect:true});var h=new Ext.grid.ColumnModel({columns:[k,new Ext.grid.RowNumberer(),{header:"profileId",dataIndex:"profileId",hidden:true},{header:"档案编号",dataIndex:"profileNo"},{header:"员工姓名",dataIndex:"fullname"}]});var n=new Ext.data.JsonStore({url:__ctxPath+"/hrm/listEmpProfile.do",root:"result",baseParams:{"Q_approvalStatus_SN_EQ":1},totalProperty:"totalCounts",remoteSort:true,fields:[{name:"profileId",type:"int"},"profileNo","fullname","jobId","position","standardMiNo","standardMoney","standardName","standardId","approvalStatus","depName","depId","delFlag","userId","idCard"]});var m=new Ext.grid.GridPanel({id:"EmpProfileSelectorGrid",width:400,height:300,region:"center",title:"档案列表",store:n,shim:true,trackMouseOver:true,disableSelection:false,loadMask:true,cm:h,sm:k,viewConfig:{forceFit:true,enableRowBody:false,showPreview:false},bbar:new HT.PagingBar({store:n})});n.setDefaultSort("profileId","desc");n.load({params:{start:0,limit:10}});var i=new Ext.FormPanel({width:400,region:"north",id:"EmpProfileForm",height:40,frame:false,border:false,layout:"hbox",layoutConfig:{padding:"5",align:"middle"},defaults:{xtype:"label",margins:{top:0,right:4,bottom:4,left:4}},items:[{text:"请输入查询条件:"},{text:"姓名"},{xtype:"textfield",name:"Q_fullname_S_LK"},{xtype:"button",text:"查询",iconCls:"search",handler:function(){var b=Ext.getCmp("EmpProfileForm");var a=Ext.getCmp("EmpProfileSelectorGrid");if(b.getForm().isValid()){b.getForm().submit({waitMsg:"正在提交查询",url:__ctxPath+"/hrm/listEmpProfile.do",params:{start:0,limit:10,"Q_approvalStatus_SN_EQ":1},method:"post",success:function(e,c){var f=Ext.util.JSON.decode(c.response.responseText);var d=a.getStore();d.loadData(f);d.setDefaultSort("profileId","desc");}});}}}]});var l=new Ext.Window({title:"档案选择",iconCls:"menu-profile",width:630,height:380,layout:"border",border:false,items:[i,m],modal:true,buttonAlign:"center",buttons:[{iconCls:"btn-ok",text:"确定",handler:function(){var c=Ext.getCmp("EmpProfileSelectorGrid");var b=c.getSelectionModel().getSelections();var a=Array();a.push(b[0].data.profileId);a.push(b[0].data.profileNo);a.push(b[0].data.fullname);a.push(b[0].data.jobId);a.push(b[0].data.position);a.push(b[0].data.depId);a.push(b[0].data.depName);a.push(b[0].data.standardMiNo);a.push(b[0].data.standardName);a.push(b[0].data.standardMoney);a.push(b[0].data.standardId);a.push(b[0].data.idCard);a.push(b[0].data.userId);if(j!=null){j.call(this,a);}l.close();}},{text:"取消",iconCls:"btn-cancel",handler:function(){l.close();}}]});return l;}};