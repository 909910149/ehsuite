var FlowSelector={getView:function(k,m){var l=null;if(m){var l=new Ext.grid.CheckboxSelectionModel({singleSelect:true});}else{l=new Ext.grid.CheckboxSelectionModel();}var i=new Ext.grid.ColumnModel({columns:[l,new Ext.grid.RowNumberer(),{header:"defId",dataIndex:"defId",hidden:true},{header:"流程的名称",dataIndex:"name"},{header:"描述",dataIndex:"description"}]});var p=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:__ctxPath+"/flow/listProDefinition.do",params:{typeId:this.typeId==null?0:this.typeId}}),reader:new Ext.data.JsonReader({root:"result",totalProperty:"totalCounts",id:"id",fields:[{name:"defId",type:"int"},"proType","name","description","createtime","deployId","processName"]}),remoteSort:true});p.setDefaultSort("defId","desc");var o=new Ext.grid.GridPanel({id:"FlowSelectorGrid",width:400,height:300,region:"center",title:"流程列表",store:p,shim:true,trackMouseOver:true,disableSelection:false,loadMask:true,cm:i,sm:l,viewConfig:{forceFit:true,enableRowBody:false,showPreview:false},bbar:new HT.PagingBar({store:p})});p.load({params:{start:0,limit:10}});var j=new Ext.FormPanel({width:400,region:"north",id:"FlowSearchForm",height:40,frame:false,border:false,layout:"hbox",layoutConfig:{padding:"5",align:"middle"},defaults:{xtype:"label",margins:{top:0,right:4,bottom:4,left:4}},items:[{text:"请输入查询条件:"},{text:"流程的名称"},{xtype:"textfield",name:"Q_name_S_LK"},{xtype:"button",text:"查询",iconCls:"search",handler:function(){if(j.getForm().isValid()){j.getForm().submit({waitMsg:"正在提交查询",url:__ctxPath+"/flow/listProDefinition.do",success:function(b,a){var c=Ext.util.JSON.decode(a.response.responseText);o.getStore().loadData(c);}});}}}]});var n=new Ext.Window({title:"流程选择",iconCls:"menu-flow",width:630,height:380,layout:"border",border:false,items:[j,o],modal:true,buttonAlign:"center",buttons:[{iconCls:"btn-ok",text:"确定",handler:function(){var c=Ext.getCmp("FlowSelectorGrid");var a=c.getSelectionModel().getSelections();var f="";var e="";var b="";for(var d=0;d<a.length;d++){if(d>0){f+=",";e+=",";b+=",";}f+=a[d].data.defId;e+=a[d].data.name;b+=a[d].data.processName;}if(k!=null){k.call(this,f,e,b);}n.close();}},{text:"取消",iconCls:"btn-cancel",handler:function(){n.close();}}]});return n;}};