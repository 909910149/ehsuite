xds.PropertyRecord=Ext.data.Record.create([{name:"name",type:"string"},"value","group"]);xds.PropGrid=Ext.extend(Ext.grid.EditorGridPanel,{enableColumnMove:false,stripeRows:false,trackMouseOver:false,clicksToEdit:1,enableHdMenu:false,baseCls:"x-plain",hideHeaders:true,cls:"grouped-prop-grid",cacheSizes:false,initComponent:function(){this.lastEditRow=null;var c=new xds.PropGrid.Store(this);this.propStore=c;var d=new xds.PropGrid.ColumnModel(this,c);this.selModel=new Ext.grid.CellSelectionModel({onEditorKey:function(r,s){var o=s.getKey(),b,t=this.grid,a=t.activeEditor;if(o==s.TAB){if(s.shiftKey){b=t.walkCells(a.row,a.col-1,-1,this.acceptsNav,this);}else{b=t.walkCells(a.row,a.col+1,1,this.acceptsNav,this);}s.stopEvent();}else{if(o==s.ENTER){var n=a.record.id,q=s.ctrlKey,p=s.shiftKey;a.completeEdit();s.stopEvent();if(q){var m=t.component.getNode();if(m.nextSibling){m.nextSibling.select();t.startEditById(n);}}else{if(p){m=t.component.getNode();if(m.previousSibling){m.previousSibling.select();t.startEditById(n);}}}}else{if(o==s.ESC){s.stopEvent();a.cancelEdit();}}}if(b){t.startEditing(b[0],b[1]);}}});c.store.sort("name","ASC");this.addEvents("beforepropertychange","propertychange");this.cm=d;this.store=c.store;this.view=new Ext.grid.GroupingView({forceFit:true,showGroupName:false,scrollOffset:18,getRowClass:function(a){return a.data.value===undefined?"":"has-value";}});this.tbar=new Ext.Toolbar({cls:this.tbCls||"xds-toolbar",items:[{tooltip:"分组排序",pressed:true,iconCls:"icon-grouped",enableToggle:true,toggleGroup:"prop-group",toggleHandler:function(b,a){if(a){this.setGrouped(true);}},scope:this}," ",{tooltip:"按字母排序",pressed:false,iconCls:"icon-sorted",enableToggle:true,toggleGroup:"prop-group",toggleHandler:function(b,a){if(a){this.setGrouped(false);}},scope:this},"-",{tooltip:"显示通用配置组",pressed:true,iconCls:"icon-common",enableToggle:true,toggleHandler:function(b,a){this.setShowCommon(a);},scope:this},"-",{tooltip:"隐藏继承配置",pressed:false,iconCls:"icon-hide-inherited",enableToggle:true,toggleHandler:function(b,a){this.setHideInherited(a);},scope:this}]});xds.PropGrid.superclass.initComponent.call(this);this.selModel.on("beforecellselect",function(b,a,f){if(f===0){this.startEditing.defer(200,this,[a,1]);return false;}},this);},setGrouped:function(b){if(!b){this.view.enableGrouping=false;this.propStore.store.clearGrouping();}else{this.view.enableGrouping=true;this.propStore.store.groupBy("group");}},setHideInherited:function(c,d){this.propStore.filterGroup=c?this.component.xcls:undefined;if(d!==false){this.propStore.refresh();}},setShowCommon:function(c,d){this.propStore.showCommon=c;if(d!==false){this.propStore.refresh();}},setComponent:function(b){this.stopEditing();this.component=b;if(this.propStore.filterGroup){this.propStore.filterGroup=b.xcls;}this.propStore.setComponent(b);},getComponent:function(){return this.component;},clear:function(){delete this.component;this.propStore.clear();},onRender:function(){xds.PropGrid.superclass.onRender.apply(this,arguments);this.getGridEl().addClass("x-props-grid");this.view.mainBody.on("mousedown",this.onChecked,this);},onChecked:function(h,e){if(e=h.getTarget("span.bcheck",2)){h.stopPropagation();var g=e.firstChild.className,f=this.propStore.store.getById(g);if(f){f.set("value",!e.firstChild.checked);}}},startEditById:function(d){var f=this.propStore.store.getById(d);if(f){var e=this.propStore.store.indexOf(f);this.startEditing(e,1);}}});xds.PropGrid.Store=function(d,c){this.grid=d;this.store=new Ext.data.GroupingStore({recordType:xds.PropertyRecord,groupField:"group"});this.store.on("update",this.onUpdate,this);xds.PropGrid.Store.superclass.constructor.call(this);};Ext.extend(xds.PropGrid.Store,Ext.util.Observable,{showCommon:true,getConfigByType:function(f,e){if(f=="Common"){return this.grid.component.getConfigObject(e);}var d=this.grid.component["get"+f+"Configs"]();return d.map[e];},getConfig:function(b){if(b.configType){return this.getConfigByType(b.configType,b.data.name);}return this.grid.component.getConfigObject(b.data.name);},getConfigAt:function(b){return this.getConfig(this.store.getAt(b));},setComponent:function(v){this.component=v;this.store.removeAll();var r=[],n=v.configs.items,o=v.getConfig();for(var q=0,l=n.length,s,p;q<l;q++){s=n[q].name;p=n[q].group;if(!this.filterGroup||this.filterGroup==p){r.push(new xds.PropertyRecord({name:s,value:o[s],group:p},s));}}var t=v.getLayoutConfigs();if(t){t=t.items;for(q=0,l=t.length;q<l;q++){s=t[q].name;r.push(new xds.PropertyRecord({name:s,value:o[s],group:t[q].group},s));}}n=v.getContainerConfigs();if(n){n=n.items;for(q=0,l=n.length;q<l;q++){s=n[q].name;var u=new xds.PropertyRecord({name:s,value:n[q].getValue(v),group:n[q].group},"Container-"+s);u.configType="Container";r.push(u);}}if(this.showCommon){n=v.getCommonConfigs();if(n){n=n.items;for(q=0,l=n.length;q<l;q++){s=n[q].name;u=new xds.PropertyRecord({name:s,value:n[q].getValue(v),group:"(Common)"},"Common-"+s);u.configType="Common";r.push(u);}}}var m=v.getEditorConfigs();if(m){m=m.items;for(q=0,l=m.length;q<l;q++){s=m[q].name;r.push(new xds.PropertyRecord({name:s,value:m[q].getValue(v),group:m[q].group},s));}}this.store.loadRecords({records:r},{},true);},onUpdate:function(l,k,h){if(h==Ext.data.Record.EDIT){var i=k.data.value,j=k.modified.value;if(this.grid.fireEvent("beforepropertychange",this.component,k.data.name,i,j)!==false){this.getConfig(k).setValue(this.component,i);if(k.configType=="Common"){this.store.getById(k.data.name).set("value",i);}else{var g=this.store.getById("Common-"+k.data.name);if(g){g.set("value",i);}}k.commit();this.grid.fireEvent("propertychange",this.component,k.data.name,i,j);}else{k.reject();}}},clear:function(){this.component=null;this.store.removeAll();},refresh:function(){this.setComponent(this.component);}});xds.PropGrid.ColumnModel=Ext.extend(Ext.grid.ColumnModel,{nameText:"Name",valueText:"Value",dateFormat:"Y-m-d",constructor:function(c,d){this.grid=c;xds.PropGrid.ColumnModel.superclass.constructor.call(this,[{header:this.nameText,width:50,sortable:true,dataIndex:"name",id:"name",menuDisabled:true},{header:this.valueText,width:50,resizable:false,dataIndex:"value",id:"value",menuDisabled:true},{header:"",hidden:true,width:10,resizable:false,locked:true,dataIndex:"group",menuDisabled:true}]);this.store=d;this.renderCellDelegate=this.renderCell.createDelegate(this);this.renderPropDelegate=this.renderProp.createDelegate(this);},isCellEditable:function(d,c){return d==1;},getRenderer:function(b){return b==1?this.renderCellDelegate:this.renderPropDelegate;},renderProp:function(b){return b;},renderCell:function(i,h,j,g){var l=this.store.getConfigAt(g),k=l.render(i,h,j,g);return l.htmlEncode?Ext.util.Format.htmlEncode(k):k;},getCellEditor:function(d,c){return this.store.getConfigAt(c).getEditor();}});Ext.ux.SelectBox=function(b){this.searchResetDelay=1000;b=b||{};b=Ext.apply(b||{},{editable:false,forceSelection:true,rowHeight:false,lastSearchTerm:false,triggerAction:"all",mode:"local"});Ext.ux.SelectBox.superclass.constructor.apply(this,arguments);this.lastSelectedIndex=this.selectedIndex||0;};Ext.extend(Ext.ux.SelectBox,Ext.form.ComboBox,{lazyInit:false,initEvents:function(){Ext.ux.SelectBox.superclass.initEvents.apply(this,arguments);this.el.on("keydown",this.keySearch,this,true);this.cshTask=new Ext.util.DelayedTask(this.clearSearchHistory,this);},keySearch:function(l,h,i){var k=l.getKey(),j=String.fromCharCode(k),g=0;if(!this.store.getCount()){return;}switch(k){case Ext.EventObject.HOME:l.stopEvent();this.selectFirst();return;case Ext.EventObject.END:l.stopEvent();this.selectLast();return;case Ext.EventObject.PAGEDOWN:this.selectNextPage();l.stopEvent();return;case Ext.EventObject.PAGEUP:this.selectPrevPage();l.stopEvent();return;}if((l.hasModifier()&&!l.shiftKey)||l.isNavKeyPress()||l.isSpecialKey()){return;}if(this.lastSearchTerm==j){g=this.lastSelectedIndex;}this.search(this.displayField,j,g);this.cshTask.delay(this.searchResetDelay);},onRender:function(c,d){this.store.on("load",this.calcRowsPerPage,this);Ext.ux.SelectBox.superclass.onRender.apply(this,arguments);if(this.mode=="local"){this.calcRowsPerPage();}},onSelect:function(e,d,f){if(this.fireEvent("beforeselect",this,e,d)!==false){this.setValue(e.data[this.valueField||this.displayField]);if(!f){this.collapse();}this.lastSelectedIndex=d+1;this.fireEvent("select",this,e,d);}},render:function(b){Ext.ux.SelectBox.superclass.render.apply(this,arguments);if(Ext.isSafari){this.el.swallowEvent("mousedown",true);}this.el.unselectable();this.innerList.unselectable();this.trigger.unselectable();this.innerList.on("mouseup",function(e,a,f){if(a.id&&a.id==this.innerList.id){return;}this.onViewClick();},this);this.innerList.on("mouseover",function(e,a,f){if(a.id&&a.id==this.innerList.id){return;}this.lastSelectedIndex=this.view.getSelectedIndexes()[0]+1;this.cshTask.delay(this.searchResetDelay);},this);this.trigger.un("click",this.onTriggerClick,this);this.trigger.on("mousedown",function(e,a,f){e.preventDefault();this.onTriggerClick();},this);this.on("collapse",function(e,a,f){Ext.getDoc().un("mouseup",this.collapseIf,this);},this,true);this.on("expand",function(e,a,f){Ext.getDoc().on("mouseup",this.collapseIf,this);},this,true);},clearSearchHistory:function(){this.lastSelectedIndex=0;this.lastSearchTerm=false;},selectFirst:function(){this.focusAndSelect(this.store.data.first());},selectLast:function(){this.focusAndSelect(this.store.data.last());},selectPrevPage:function(){if(!this.rowHeight){return;}var b=Math.max(this.selectedIndex-this.rowsPerPage,0);this.focusAndSelect(this.store.getAt(b));},selectNextPage:function(){if(!this.rowHeight){return;}var b=Math.min(this.selectedIndex+this.rowsPerPage,this.store.getCount()-1);this.focusAndSelect(this.store.getAt(b));},search:function(f,e,h){f=f||this.displayField;this.lastSearchTerm=e;var g=this.store.find.apply(this.store,arguments);if(g!==-1){this.focusAndSelect(g);}},focusAndSelect:function(d){var c=typeof d==="number"?d:this.store.indexOf(d);this.select(c,this.isExpanded());this.onSelect(this.store.getAt(d),c,this.isExpanded());},calcRowsPerPage:function(){if(this.store.getCount()){this.rowHeight=Ext.fly(this.view.getNode(0)).getHeight();this.rowsPerPage=this.maxHeight/this.rowHeight;}else{this.rowHeight=false;}}});xds.FlyoutSelect=Ext.extend(Ext.ux.SelectBox,{listClass:"x-combo-list-small",width:120,displayField:"text",initComponent:function(){this.store=new Ext.data.SimpleStore({fields:["text"],expandData:true,data:this.data});delete this.data;xds.FlyoutSelect.superclass.initComponent.call(this);},initList:function(){Ext.form.ComboBox.prototype.initList.call(this);this.list.setZIndex(80005);}});Ext.reg("flyoutselect",xds.FlyoutSelect);Ext.ux.TileView=Ext.extend(Ext.DataView,{categoryName:"category",imagePath:"imagePath",imageName:"imageName",itemName:"text",itemDescription:"description",itemIconCls:"iconCls",itemSelector:"dd",initComponent:function(){this.tpl=new Ext.XTemplate(this.getMarkup(),{getCategory:this.getCategory,openCategory:this.openCategory,view:this});Ext.ux.TileView.superclass.initComponent.call(this);},getMarkup:function(){return['<div class="x-tile-ct">','<tpl for=".">','<tpl if="this.openCategory(values, xindex, xcount)">','<tpl if="xindex != 1">','<div style="clear:left"></div></dl>',"</tpl>",'<h2><div unselectable="on" class="x-unselectable">{[this.getCategory(values)]}</div></h2>',"<dl>","</tpl>",'<dd><img title="{text:htmlEncode}" src="',Ext.BLANK_IMAGE_URL,'" class="{',this.itemIconCls,'}"/>',"<div><h4>{",this.itemName,"}</h4><p>{",this.itemDescription,"}</p></div>","</dd>",'<tpl if="xindex == xcount">','<div style="clear:left"></div></dl>',"</tpl>","</tpl>","</div>"].join("");},openCategory:function(e,f,h){var g=this.getCategory(e);if(this.lastCat!=g){this.lastCat=g;return true;}return false;},getCategory:function(b){return b[this.view.categoryName];},onClick:function(c){var d=c.getTarget("h2",3,true);if(d){d.toggleClass("collapsed");d.next("dl").toggleClass("collapsed");}else{return Ext.ux.TileView.superclass.onClick.apply(this,arguments);}}});xds.MoreField=Ext.extend(Ext.BoxComponent,{defaultAutoCreate:{tag:"div",cls:"x-more-field",cn:[{tag:"span"},{tag:"a",href:"#"}]},fieldClass:"x-form-text",isFormField:true,value:undefined,getName:function(){return this.name||this.id;},onRender:function(d,e){xds.MoreField.superclass.onRender.call(this,d,e);if(!this.el){var f=this.getAutoCreate();this.el=d.createChild(f,e);}this.el.addClass([this.fieldClass,this.cls]);this.valueEl=this.el.child("span");this.btnEl=this.el.child("a");this.btnEl.swallowEvent("click",true);this.btnEl.on("click",this.onMoreClick,this);this.initValue();},onMoreClick:Ext.emptyFn,afterRender:function(c,d){xds.MoreField.superclass.afterRender.call(this);this.originalValue=this.getRawValue();},initValue:function(){if(this.value!==undefined){this.setValue(this.value);}},isDirty:function(){return false;},isValid:function(){return true;},validate:function(){return true;},processValue:function(b){return b;},validateValue:function(b){return true;},reset:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getRawValue:function(){return this.value;},getValue:function(){return this.value;},setRawValue:function(b){this.value=b;if(this.valueEl){this.valueEl.dom.innerHTML=b;}},setValue:function(b){this.setRawValue(b);}});Ext.reg("morefield",xds.MoreField);xds.Project=Ext.extend(Ext.util.Observable,{constructor:function(b){Ext.apply(this,b);},save:function(d,c){if(!xds.Project.file){this.saveAs(d,c);return;}xds.File.saveProject(this.getData(),d,c);},saveAs:function(d,c){xds.File.saveProjectAs(this.getData(),d,c);},open:function(){xds.inspector.root.beginUpdate();var h=xds.inspector.root;while(h.firstChild){h.removeChild(h.firstChild);}var f=this.components||[];for(var g=0,e;e=f[g];g++){xds.inspector.restore(e,h);}xds.inspector.root.endUpdate();if(h.firstChild){h.firstChild.select();}},getData:function(){var f={name:this.name,file:this.file,components:[]},e=xds.inspector.root,d=e.firstChild;while(d){f.components.push(d.component.getInternals(true));d=d.nextSibling;}return f;},viewJoson:function(){var b=new xds.CJsonWindow({title:"查看Json源代码",jdb:this.getJson()});b.show();},viewFormJson:function(){var b=new xds.CJsonWindow({title:"查看Json源代码",jdb:this.getJson()});alert(b.getJsonSource());},getFormJsonCode:function(){var d=new xds.CJsonWindow({title:"查看Json源代码",jdb:this.getJson()}),c=d.getJsonSource();return c;},getFormItems:function(){var e=xds.inspector.root.firstChild,f=e.childNodes,h="";for(var g=0;g<f.length;g++){if(g>0){h+=",";}h+=Ext.util.JSON.encode(f[g].component.config);}return h;},getJson:function(){var i=xds.inspector.root,g=i.firstChild,l={components:[]};while(g){l.components.push(g.component.getJsonConfig(true));g=g.nextSibling;}function h(a){if(typeof(a.cn)!="undefined"){a.fields=a.cn;delete a.cn;}}function k(d){if(d.xtype=="grid"){d.columns=[];}if(typeof(d.cn)!="undefined"){var b=0,a=d.cn.length,c=0;while(b<a){if(typeof(d.cn[b].dock)!="undefined"){d[d.cn[b].dock]=d.cn[b].cn||[];delete d.cn[b];c++;b++;continue;}switch(d.cn[b].xtype){case"gridcolumn":case"booleancolumn":case"stringcolumn":case"datecolumn":case"numbercolumn":delete d.cn[b].xtype;d.columns.push(d.cn[b]);delete d.cn[b];c++;break;case"jsonstore":case"arraystore":case"xmlstore":h(d.cn[b]);d.store=Ext.apply({},d.cn[b]);delete d.cn[b];c++;break;}b++;}if(c<a){d.items=d.cn;delete d.cn;}else{delete d.cn;}if(typeof(d.items)!="undefined"){a=d.items.length;for(b=0;b<a;b++){if(typeof(d.items[b])!="undefined"){k(d.items[b]);}}}if(typeof(d.tbar)!="undefined"){a=d.tbar.length;for(b=0;b<a;b++){if(typeof(d.tbar[b])!="undefined"){k(d.tbar[b]);}}}if(typeof(d.fbar)!="undefined"){a=d.fbar.length;for(b=0;b<a;b++){if(typeof(d.fbar[b])!="undefined"){k(d.fbar[b]);}}}if(typeof(d.bbar)!="undefined"){a=d.bbar.length;for(b=0;b<a;b++){if(typeof(d.bbar[b])!="undefined"){k(d.bbar[b]);}}}if(typeof(d.store)!="undefined"){if(typeof(d.store)!="object"){delete d.store;}}}}for(var j=0;j<l.components.length;j++){k(l.components[j]);}return(l.components);},setData:function(b){Ext.apply(this,b);},doClose:function(){var d=xds.inspector.root;while(d.firstChild){var c=d.removeChild(d.firstChild);c.destroy();}delete xds.Project.file;xds.canvas.clear();},close:function(d,c){if(xds.inspector.root.firstChild){Ext.Msg.show({title:"Confirm",msg:"save this project?",buttons:Ext.Msg.YESNOCANCEL,fn:function(a){if(a=="yes"){this.save({callback:function(){this.doClose();},scope:this});d();}else{if(a=="no"){this.doClose();d();}}},scope:this});}else{this.doClose();if(d){Ext.callback(d,this);}}}});xds.Config=function(b){Ext.apply(this,b);if(!xds.Config.editors.string){Ext.apply(xds.Config.editors,{options:new Ext.grid.GridEditor(new Ext.ux.SelectBox({listClass:"x-combo-list-small",store:new Ext.data.SimpleStore({fields:["text"],expandData:true}),displayField:"text"})),date:new Ext.grid.GridEditor(new Ext.form.DateField({selectOnFocus:true})),string:new Ext.grid.GridEditor(new Ext.form.TextField({selectOnFocus:true})),code:new Ext.grid.GridEditor(new Ext.form.TextArea({width:250,height:100}),{constrain:true}),object:new Ext.grid.GridEditor(new Ext.form.TextArea({width:250,height:100}),{constrain:true}),number:new Ext.grid.GridEditor(new Ext.form.NumberField({selectOnFocus:true,style:"text-align:left;"}))});}};xds.Config.prototype={name:"",defautValue:"",type:"String",htmlEncode:true,editor:"string",setFn:"setConfig",getFn:"getConfigValue",getValue:function(b){return b[this.getFn](this.name);},setValue:function(e,f){var g=e[this.getFn](this.name);e[this.setFn](this.name,f);if(String(g)!==String(f)){if(typeof this.updateFn=="string"){var h=e.getExtComponent();h[this.updateFn](f);}else{if(typeof this.updateFn=="function"){this.updateFn(e.getExtComponent(),f,e);}else{xds.fireEvent("componentchanged");}}}},getEditor:function(){if(this.editor=="options"){var b=xds.Config.editors.options;b.field.store.loadData(this.options);return b;}return xds.Config.editors[this.editor];},render:function(e,d,f){return e;}};xds.Config.String=Ext.extend(xds.Config,{type:"String",defaultValue:"",htmlEncode:true,editor:"string"});xds.Config.Number=Ext.extend(xds.Config,{type:"Number",defaultValue:0,htmlEncode:false,editor:"number"});xds.Config.Boolean=Ext.extend(xds.Config,{type:"Boolean",defaultValue:false,editor:"boolean",htmlEncode:false,render:function(e,d,f){e=e===undefined?this.defaultValue:e;return'<span class="bcheck"><input type="checkbox" class="'+f.id+'"'+(e?" checked":"")+"></span>";}});xds.Config.Object=Ext.extend(xds.Config.String,{type:"Object",defaultValue:null,editor:"object",render:function(){return"[object]...";},setValue:function(c,value){if(typeof value!="object"){value=Ext.util.Format.trim(value);var o;eval("o = "+(value.length>0?value:"null")+";");c.setConfig(this,o);}else{c.setConfig(this,value);}xds.fireEvent("componentchanged");}});xds.Config.Array=Ext.extend(xds.Config.Object,{});xds.Config.types={string:xds.Config.String,number:xds.Config.Number,"boolean":xds.Config.Boolean,object:xds.Config.Object};xds.Config.editors={};xds.editorConfigs=new Ext.util.MixedCollection(false,function(b){return b.name;});xds.editorConfigs.addAll([new xds.Config.String({name:"name",ctype:"string",group:"(Designer)",getValue:function(b){return(b.name==b.defaultName)?b.id:b.name;},setValue:function(e,f){var g=e.id,h=xds.inspector.getNodeById(e.id);if(xds.canvas.selectedId==g){xds.canvas.selectedId=f;}h.setNodeId(f);h.setText(f);}}),new xds.Config.String({name:"userXType",ctype:"string",group:"(Designer)",getValue:function(b){return b.userXType;},setValue:function(c,d){c.userXType=d;}})]);xds.dockConfigs=new Ext.util.MixedCollection(false,function(b){return b.name;});xds.dockConfigs.addAll([new xds.Config.String({name:"dock",ctype:"string",group:"(Designer)",editor:"options",options:["(none)","bbar","tbar","fbar"],getValue:function(b){return b.dock;},setValue:function(c,d){if(d=="(none)"){d=undefined;}c.dock=d;c.setSuffix(d);xds.fireEvent("componentchanged");}})]);xds.commonConfigs=["id","itemId","title","text","layout","width","height","autoScroll","url","name","fieldLabel","iconCls"];xds.MainMenu=Ext.extend(Ext.Toolbar,{id:"app-menu",defaults:{minWidth:42},initComponent:function(){this.items=[{text:"File",menu:[xds.actions.newAction,"-",xds.actions.openAction,"-",xds.actions.saveAction,xds.actions.saveAsAction]},{text:"Project",menu:[xds.actions.newCmpAction,xds.actions.deleteCmpAction]},{text:"Help",menu:[xds.actions.help,"-",xds.actions.aboutXds]}];xds.MainMenu.superclass.initComponent.call(this);}});xds.actions={saveAction:new Ext.Action({iconCls:"icon-project-save",itemText:"Save Project",tooltip:"Save Project",handler:function(){xds.project.save();}}),saveAsAction:new Ext.Action({iconCls:"icon-project-saveas",itemText:"Save Project As...",tooltip:"Save Project As",handler:function(){xds.project.saveAs();}}),newAction:new Ext.Action({iconCls:"icon-project-new",itemText:"New Project",tooltip:"New Project",handler:function(){xds.project.close(function(){var b=new xds.Project();b.open();});}}),openAction:new Ext.Action({iconCls:"icon-project-open",itemText:"Open Project...",tooltip:"Open Project",handler:function(){xds.project.close(function(){xds.File.openProject(function(c){var d=new xds.Project(c);d.open();});});}}),newCmpAction:new Ext.Action({iconCls:"icon-cmp-new",tooltip:"New Component",itemText:"New Component...",handler:function(){var b=new xds.CWindow({title:"New Component"});b.show();}}),deleteCmpAction:new Ext.Action({iconCls:"icon-cmp-delete",tooltip:"Delete Component",disabled:true,itemText:"Delete Component",handler:function(){xds.inspector.removeComponent(xds.active.component);}}),help:new Ext.Action({iconCls:"icon-about",tooltip:"Visit the forum",itemText:"Visit the forum",handler:function(){window.parentSandboxBridge.openURL("http://bbs.extgui.cn");}}),aboutXds:new Ext.Action({tooltip:"About Ext Designer",itemText:"About",handler:function(){Ext.Msg.alert("About ","Ext Designer is a tool to assist in the rapid development of Ext Applications.");}}),viewJson:new Ext.Action({iconCls:"icon-view-json",itemText:"查看源代码",tooltip:"查看源代码",handler:function(){xds.project.viewJoson();}})};xds.Component=Ext.extend(Ext.util.Observable,{isContainer:false,isVisual:true,nameSuffix:"",filmCls:"",flyoutCls:"",minWidth:10,minHeight:10,snapToGrid:10,showGrid:true,constructor:function(b){Ext.apply(this,b);this.defaultName=this.nextName();this.name=this.name||this.defaultName;this.id=this.id||this.nextId();this.userConfig=this.userConfig||{name:this.name};if(this.enableFlyout){this.flyoutCls="xds-flyout";}},setOwner:function(b){if(this.owner&&!b){this.setName(this.id);}this.owner=b;delete this.config;},setConfig:function(d,c){this.userConfig[d]=c;if(this.config){this.config[d]=c;}if(d=="id"||d=="itemId"||(d=="name"&&!this.getConfigValue("id")&&!this.getConfigValue("itemId"))){this.setName(c);}if(d=="layout"){delete this.layoutConfig;xds.props.refresh.defer(100,xds.props);if(xds.Layouts[c]&&xds.Layouts[c].onInit){xds.Layouts[c].onInit(this.getNode());}}},getSnapToGrid:function(b){return !this.snapToGrid?"(none)":this.snapToGrid;},setSnapToGrid:function(c,d){this.snapToGrid=d=="(none)"?0:parseInt(d,10);},setName:function(b){this.name=b;this.getNode().setText(b+this.nameSuffix);},getConfig:function(){if(!this.config){this.config=Ext.apply({xtype:this.xtype},this.defaultConfig);this.initConfig(this.config,this.owner);Ext.apply(this.config,this.userConfig);}return this.config;},getJsonConfig:function(i){var h=null;if(!h){h=Ext.apply({xtype:this.xtype,dock:this.dock,name:(this.name==this.defaultName)?this.id:(this.name||this.defaultName),id:this.id,xcls:this.xcls},this.defaultConfig);this.initConfig(h,this.owner);Ext.apply(h,this.userConfig);}if(this.userXType){h.userXType=this.userXType;}if(i){var j=this.getNode();if(j.hasChildNodes()){h.cn=[];for(var g=0,f;f=j.childNodes[g];g++){h.cn.push(f.component.getJsonConfig(true));}}}return h;},getConfigValue:function(b){return this.getConfig()[b];},isSet:function(b){return this.userConfig[b]!==undefined;},initConfig:function(c,d){},nextName:function(){return Ext.getCmp("structure").nextId(this.naming);},nextId:function(){return Ext.getCmp("structure").nextId(this.naming);},getNode:function(){if(!this.node){var b=this.attrs={id:this.id,text:(this.name==this.defaultName)?(this.id||this.defaultName):this.name,iconCls:this.iconCls,leaf:true};if(this.isContainer){b.leaf=false;b.children=[];b.expanded=true;}this.node=new Ext.tree.TreeNode(b);this.node.component=this;}return this.node;},getFilm:function(){return Ext.get("film-for-"+this.id);},isValidChild:function(d,c){if(this.isContainer){if(this.validChildTypes){return this.validChildTypes.contains(d);}return xds.Registry.get(d).prototype.isVisual!==false;}return false;},isValidParent:function(b){return this.isVisual?true:!!b;},getConfigs:function(){return this.configs;},getConfigObject:function(e){if(this.configs.map[e]){return this.configs.map[e];}else{var h=this.getLayoutConfigs();if(h&&h.map[e]){return h.map[e];}else{var g=this.getEditorConfigs();if(g&&g.map[e]){return g.map[e];}else{var f=this.getContainerConfigs();if(f){return f.map[e];}}}}},getContainerConfigs:function(){var b=this.getConfigValue("layout");if(b&&b!="auto"){return xds.Layouts[b].layoutConfigs;}return null;},setContainerConfig:function(d,c){this.layoutConfig=this.layoutConfig||{};this.layoutConfig[d]=c;},getContainerConfigValue:function(b){return this.layoutConfig?this.layoutConfig[b]:undefined;},getLayoutConfigs:function(){if(this.owner){var b=this.owner.getConfigValue("layout");if(b&&b!="auto"){return xds.Layouts[b].configs;}}return null;},getCommonConfigs:function(){if(!this.configs.common){this.configs.common=this.configs.filterBy(function(b){return xds.commonConfigs.indexOf(b.name)!==-1;});}return this.configs.common;},getEditorConfigs:function(){if(this.owner){return false;}return xds.editorConfigs;},createCanvasConfig:function(j){var g=Ext.apply({},this.getConfig());g.xtype=this.dtype;g.stateful=false;g.viewerNode=j;if(this.layoutConfig){g.layoutConfig=Ext.apply({},this.layoutConfig);}if(this.snapToGrid&&this.showGrid&&g.layout=="absolute"){var h="xds-grid-"+this.snapToGrid;g.bodyCssClass=g.bodyCssClass?g.bodyCssClass+h:h;}this.activeCmpId=g.id=Ext.id();if(j.hasChildNodes()){g.items=[];for(var f=0,i=j.childNodes.length;f<i;f++){if(!this.assignDocked(g,j.childNodes[f])){g.items.push(j.childNodes[f].component.createCanvasConfig(j.childNodes[f]));}}if(g.items.length<1){delete g.items;}}return g;},getActions:function(){return null;},setSuffix:function(c,d){d=d||"loaded";if(!c){delete this.nameSuffix;}else{this.nameSuffix=' <i class="xds-suffix-'+d+'">&nbsp;'+c+"&nbsp;</i>";}this.setName(this.name);},assignDocked:function(d,c){c=c.component?c.component:c;if(c.dock){d[c.dock]=c.createCanvasConfig(c.getNode());return true;}return false;},syncFilm:function(){if(this.isVisual!==false){var b=Ext.getCmp(this.activeCmpId);if(b){b.syncFilm();}}},getExtComponent:function(){return Ext.getCmp(this.activeCmpId);},isResizable:function(){return false;},onFilmClick:Ext.emptyFn,getLabel:function(j){var i,f=this.getExtComponent();if(f){var h=f.el.up(".x-form-item",3);if(h){i=h.down(".x-form-item-label");}var g=f.el.next(".x-form-cb-label");if(i&&i.getRegion().contains(j.getPoint())){return{el:i,name:"fieldLabel"};}else{if(g&&g.getRegion().contains(j.getPoint())){return{el:g,name:"boxLabel"};}}}return null;},onFilmDblClick:function(c){var d=this.getLabel(c);if(d){xds.canvas.startEdit(this,d.el,this.getConfigObject(d.name));}},onSelectChange:function(b){this.selected=b;},onFilmMouseDown:function(b){if(this.enableFlyout&&b.getTarget("b",1)){this.delegateFlyout(b);}},delegateFlyout:function(b){if(this.enableFlyout){if(!this.flyout){this.getNode().select();this.flyout=this.onFlyout(b);if(this.flyout&&!this.flyout.isVisible()){this.flyout.showBy(this.getFlyoutButton(),"tl-tr?");}}else{this.flyout.destroy();}}},getFlyoutButton:function(){var b=this.getFilm();return b?b.child("b"):null;},hasConfig:function(d,c){return this.getConfigValue(d)===c;},getInternals:function(i){var f={cid:this.cid,name:(this.name==this.defaultName)?this.id:this.name,dock:this.dock,layoutConfig:xds.copy(this.layoutConfig),userConfig:xds.copy(this.userConfig)};if(this.userXType){f.userXType=this.userXType;}if(i){var j=this.getNode();if(j.hasChildNodes()){f.cn=[];for(var h=0,g;g=j.childNodes[h];h++){f.cn.push(g.component.getInternals(true));}}}return f;},getDefaultInternals:function(){return{cid:this.cid};},getSpec:function(){return this.spec||this.getDefaultInternals();},beforeRemove:function(){if(this.flyout){this.flyout.destroy();}},isAnchored:function(){var b=this.owner?this.owner.getConfigValue("layout"):"";return b&&this.getConfigValue("anchor")&&(b=="form"||b=="anchor"||b=="absolute");},isFit:function(){var b=this.owner?this.owner.getConfigValue("layout"):"";return b=="fit"||b=="card";},setComponentX:function(c,d){c.setPosition(d);},setComponentY:function(d,c){d.setPosition(undefined,c);}});xds.Component.getFilmEl=function(){var b=this.getPositionEl();if(this.fieldLabel){return this.el.up(".x-form-item")||b;}return b;};xds.Component.isValidDrop=function(d,c){return d!=c&&(!d||d.isValidChild(c.cid))&&c.isValidParent(d);};xds.Registry=function(){var e=new Ext.util.MixedCollection(true,function(a){return a.prototype.cid;}),f=Ext.extend(Ext.data.JsonStore,{constructor:function(){f.superclass.constructor.call(this,{id:"cid",fields:[{name:"id",mapping:"cid"},"xtype","xcls","typeDef","text","iconCls","naming","category","isVisual"]});}}),d=null;return{register:function(c){e.add(c);c.prototype.__xdclass=c;var h=c.prototype.configs||[];c.prototype.configs=c.configs=new Ext.util.MixedCollection(false,function(g){return g.name;});for(var b=0,a=h.length;b<a;b++){c.configs.add(new xds.Config.types[h[b].ctype](h[b]));}},unregister:function(a){e.remove(a);},get:function(a){return e.get(a);},all:e,createStore:function(b){if(!d){d=[];for(var h=0,c=e.items.length;h<c;h++){d.push(e.items[h].prototype);}}var a=new f();a.loadData(d);if(b){a.filter("isVisual",true);}return a;},addUserType:function(a){this.userTypes=this.userTypes||[];this.userTypes.push(a);}};}();xds.Canvas=Ext.extend(Ext.Panel,{constructor:function(){xds.canvas=this;xds.on("componentselect",this.onComponentSelect,this,{delay:10});xds.Canvas.superclass.constructor.call(this,{id:"canvas",region:"center",baseCls:"x-plain",layout:"auto",bodyStyle:"padding:5px;position:relative;left:0;top:0;",items:new Ext.Panel({baseCls:"x-plain"}),autoScroll:true,bregion:new Ext.lib.Region(0,0,0,0),rregion:new Ext.lib.Region(0,0,0,0),cregion:new Ext.lib.Region(0,0,0,0)});},afterRender:function(){xds.Canvas.superclass.afterRender.call(this);this.body.on("mousedown",this.onBodyMouseDown,this);this.body.on("click",this.onBodyClick,this);this.body.on("contextmenu",this.onBodyContextMenu,this);this.body.on("mouseover",this.onBodyOver,this,{buffer:50});this.body.on("mousemove",this.onBodyMove,this);this.body.on("dblclick",this.onBodyDblClick,this);Ext.getBody().on("mouseover",this.onDocOver,this);this.dropZone=new xds.Canvas.DropZone(this);this.dragTracker=new xds.Canvas.DragTracker({el:this.body});},isFlyoutBtnClick:function(f){if(this.selectedId){var d=xds.inspector.getNodeById(this.selectedId);if(d){var e=d.component.getFlyoutButton();if(e&&e.getRegion().contains(f.getPoint())){return d.component;}}}return false;},onBodyMouseDown:function(d,e,f){if(f=this.isFlyoutBtnClick(d)){f.delegateFlyout(d);return;}f=this.findTarget(d);if(f){f.component.onFilmMouseDown(d);}},onBodyDblClick:function(d,e){var f=this.findTarget(d);if(f){f.component.onFilmDblClick(d);}},onBodyClick:function(e,f){if(this.isFlyoutBtnClick(e)){return;}if(e.target==this.body.dom){xds.inspector.getSelectionModel().clearSelections();return;}var h=this.findTarget(e);if(h){var g=h.component.selected;if(h.component.onFilmClick(e,g)!==false){xds.fireEvent("componentclick",{component:h.component,node:h,event:e});}}},onBodyOver:function(c,d){if(d=c.getTarget(".el-film",2)){if(d!=this.overFilm){this.overFilm=Ext.get(d);this.overFilm.addClass("el-film-over");}}},onBodyMove:function(n,l){if((l=n.getTarget(".el-film",2))){if(n.getTarget("b",1)){var k=Ext.get(l);k.setStyle("cursor","default");this.dragTracker.setDragMode("Absolute");return;}var m=this.getTargetComponent(l);if(m){var k=Ext.get(l),p=k.lastRegion,q=7,s=n.getPoint(),t=m.component.isResizable("Corner",n),o=this.bregion;o.top=p.bottom-q;o.left=p.left;o.right=p.right-(t?q:0);o.bottom=p.bottom;if(o.contains(s)&&m.component.isResizable("Bottom",n)){this.dragTracker.setDragMode("Bottom");k.setStyle("cursor",Ext.isAir?"move":"s-resize");return;}var r=this.rregion;r.top=p.top;r.left=p.right-q;r.right=p.right;r.bottom=p.bottom-(t?q:0);if(r.contains(s)&&m.component.isResizable("Right",n)){this.dragTracker.setDragMode("Right");k.setStyle("cursor",Ext.isAir?"move":"e-resize");return;}m=this.cregion;m.top=p.bottom-q;m.left=p.right-q;m.right=p.right;m.bottom=p.bottom;if(t&&m.contains(s)){this.dragTracker.setDragMode("Corner");k.setStyle("cursor",Ext.isAir?"move":"se-resize");return;}k.setStyle("cursor","default");}this.dragTracker.setDragMode("Absolute");}},onBodyContextMenu:function(e){e.preventDefault();var f=this.findTarget(e,false);if(f){var h=this.getTargetComponent(f);if(h){var g=xds.inspector.getContextMenu();h.select();g.node=h;g.showAt(e.getXY());}}},onDocOver:function(b){if(this.overFilm&&!b.within(this.overFilm)){this.overFilm.removeClass("el-film-over");delete this.overFilm;}},beginUpdate:function(){this.updating=true;},endUpdate:function(b){this.updating=false;if(this.updateCmp&&b!==true){this.setComponent(this.updateCmp);}},setComponent:function(d){if(this.updating){this.updateCmp=d;return;}if(d&&d.getOwnerTree){d=this.createConfig(d);}var e=this.items.items[0];if(e){if(e.viewerNode){e.viewerNode.component.beforeRemove();}this.remove(e);}if(d){var f=this.add(d);Ext.lib.Event.suspend();this.doLayout();f.show();Ext.lib.Event.resume();this.syncAll.defer(50,this);}},clear:function(){this.setComponent(null);},setComponentFromNode:function(b){this.setComponent(this.createConfig(b));},createConfig:function(b){return b.component.createCanvasConfig(b);},onComponentSelect:function(b){this.setSelected(b.node?b.node.id:null);if(b.component&&this.editData&&b.component!=this.editData.component){this.stopEdit();}},setSelected:function(h){if(this.selectedId!=h){var g=Ext.get("film-for-"+this.selectedId);if(g){g.removeClass("el-film-selected");g.setStyle(g.getStyle("z-index")-1);}else{var f=Ext.get("chld-for-"+this.selectedId);if(f){f.up(".xds-floater").removeClass("chld-selected");}}}this.selectedId=h;if(h){var e=Ext.get("film-for-"+this.selectedId);if(e){e.addClass("el-film-selected");e.setStyle(e.getStyle("z-index")+1);}else{f=Ext.get("chld-for-"+this.selectedId);if(f){f.up(".xds-floater").addClass("chld-selected");}}}},syncAll:function(){if(xds.active&&xds.active.topNode){xds.active.topNode.cascade(function(){this.component.syncFilm();});}this.setSelected(this.selectedId);},getTargetComponent:function(c){var d=c.id.substr(9);return xds.inspector.getNodeById(d);},findTarget:function(d,f){var e=d.getTarget(".el-film",2)||d.getTarget(".xds-child-target",2);if(e&&f!==false){return this.getTargetComponent(e);}return e;},getInlineEditor:function(){if(!this.inlineEd){this.inlineEd=new Ext.Editor({alignment:"l-l?",completeOnEnter:true,autoSize:"width",zIndex:60000,shadow:"drop",shadowOffset:3,cls:"x-small-editor",field:{selectOnFocus:true},ignoreNoChange:false,doAutoSize:function(){if(typeof this.requestedWidth=="number"){this.setSize(this.requestedWidth);}else{this.setSize(this.boundEl.getWidth());}}});this.inlineEd.on("complete",this.onEditComplete,this);}return this.inlineEd;},stopEdit:function(){if(this.inlineEd&&this.inlineEd.editing){this.inlineEd.completeEdit();}},startEdit:function(l,h,k,j){var g=this.editData;if(g&&g.component==l&&g.el==h&&g.config==k){return;}this.stopEdit();this.editData={component:l,el:h,config:k};var i=this.getInlineEditor();i.requestedWidth=j;i.startEdit(h,k.getValue(l));},onEditComplete:function(e,f,d){if(String(f)!=String(d)){if(xds.active&&xds.active.component==this.editData.component){xds.props.setValue(this.editData.config.name,f);}else{this.editData.config.setValue(this.editData.component,f);}}delete this.editData;}});xds.Canvas.DropZone=Ext.extend(Ext.dd.DropZone,{constructor:function(b){this.allowContainerDrop=false;xds.Canvas.DropZone.superclass.constructor.call(this,b.bwrap,{});this.canvas=b;this.dragOverData={};this.lastInsertClass="xds-no-status";},ddGroup:"TreeDD",getTargetFromEvent:function(b){return b.getTarget(".xds-child-target",2)||b.getTarget(".el-film",2)||this.canvas;},isValidDropPoint:function(f,h,g){var i=f?f.component:null,j=h.node.component||h.node.instance;return xds.Component.isValidDrop(i,j);},onNodeEnter:function(h,g,f,e){},onNodeOver:function(k,j,l,h){var g=this.canvas.getTargetComponent(k);if(k==this.canvas){return this.isValidDropPoint(g,h,l)?"xds-dd-new":this.dropNotAllowed;}var i=h.node;if(this.isValidDropPoint(g,h,l)){return"xds-dd-add";}else{return this.dropNotAllowed;}},onNodeOut:function(h,g,f,e){},onNodeDrop:function(k,j,l,h){var g=k==this.canvas?null:this.canvas.getTargetComponent(k),i=h.node;if(this.isValidDropPoint(g,h,l)){this.canvas.lastDropPoint=l.getPoint();xds.fireEvent("componentevent",{type:i.component?"move":"new",parentId:g?g.id:null,component:i.component?i.component:i.instance.getSpec()});delete this.canvas.lastDropPoint;return true;}else{return false;}}});xds.Canvas.DragTracker=Ext.extend(Ext.dd.DragTracker,{autoStart:true,preventDefault:false,dragMode:"Absolute",setDragMode:function(b){if(!this.active&&!this.waiting){this.dragMode=b;}},onMouseUp:function(b){this.waiting=false;xds.Canvas.DragTracker.superclass.onMouseUp.call(this,b);},isAbsolute:function(b){return(b.component.owner&&b.component.owner.getConfigValue("layout")=="absolute");},onBeforeStart:function(c){var d=c.getTarget(".el-film",2);this.snapValue=false;if(d&&!c.getTarget("b",1)){this.node=xds.canvas.getTargetComponent(d);this.cmp=this.node.component;if(this.dragMode=="Absolute"){if(this.isAbsolute(this.node)){this.pos=this.cmp.getExtComponent().getPosition(true);this.snapValue=this.node.component.owner.snapToGrid;this.startX=this.pos[0];this.startY=this.pos[1];this.waiting=true;return true;}}else{this.startSize=this.cmp.getExtComponent().getSize();this.waiting=true;if(this.isAbsolute(this.node)){this.snapValue=this.node.component.owner.snapToGrid;}return true;}}return false;},onStart:function(b){this.waiting=false;this.node.select();this.cmp.getExtComponent().film.addClass("el-film-drag");},onDrag:function(b){this["onDrag"+this.dragMode](b,this.getOffset(),this.cmp.getExtComponent());},onDragAbsolute:function(f,d,e){e.setPosition(this.snap(this.startX-d[0]),this.snap(this.startY-d[1]));e.syncFilm();},onDragRight:function(f,d,e){e.setWidth(Math.max(this.cmp.minWidth,this.snap(this.startSize.width-d[0])));e.syncFilm();},onDragBottom:function(f,d,e){e.setHeight(Math.max(this.cmp.minHeight,this.snap(this.startSize.height-d[1])));e.syncFilm();},onDragCorner:function(f,d,e){e.setSize(Math.max(this.cmp.minWidth,this.snap(this.startSize.width-d[0])),Math.max(this.cmp.minHeight,this.snap(this.startSize.height-d[1])));e.syncFilm();},onEnd:function(c){var d=this.cmp.getExtComponent();d.film.removeClass("el-film-drag");this["onEnd"+this.dragMode](c,this.getOffset(),d);if(d.ownerCt&&d.ownerCt.layout){delete d.anchorSpec;d.ownerCt.doLayout();}},onEndAbsolute:function(e,f,g){var h=g.getPosition(true);h[0]=this.snap(h[0]);h[1]=this.snap(h[1]);xds.canvas.beginUpdate();this.cmp.setConfig("x",h[0]);this.cmp.setConfig("y",h[1]);xds.props.setValue("x",h[0]);xds.props.setValue("y",h[1]);xds.canvas.endUpdate(true);xds.fireEvent("componentchanged");},onEndRight:function(f,h,e){xds.canvas.beginUpdate();var g=e.getWidth();this.cmp.setConfig("width",g);xds.props.setValue("width",g);xds.canvas.endUpdate(true);xds.fireEvent("componentchanged");},onEndBottom:function(f,h,e){xds.canvas.beginUpdate();var g=e.getHeight();this.cmp.setConfig("height",g);xds.props.setValue("height",g);xds.canvas.endUpdate(true);xds.fireEvent("componentchanged");},onEndCorner:function(f,j,h){xds.canvas.beginUpdate();var g=h.getWidth();this.cmp.setConfig("width",g);xds.props.setValue("width",g);var i=h.getHeight();this.cmp.setConfig("height",i);xds.props.setValue("height",i);xds.canvas.endUpdate(true);xds.fireEvent("componentchanged");},snap:function(h,g){g=g||this.snapValue;if(g<1||!h){return h;}var f=h,j=g,i=h%j;if(i>0){if(i>(j/2)){f=h+(j-i);}else{f=h-i;}}return f;}});xds.ConfigEditor=Ext.extend(Ext.Panel,{constructor:function(){this.grid=new xds.PropGrid();this.grid.on("rowcontextmenu",this.onRowContext,this);xds.ConfigEditor.superclass.constructor.call(this,{id:"props",region:"south",margins:"0 0 0 0",title:"组件配置",layout:"fit",border:false,items:this.grid,disabled:true,split:true,height:Math.round(Ext.lib.Dom.getViewportHeight()*0.4),tools:[{id:"expand-all",handler:function(){this.grid.view.expandAllGroups();},qtip:"展开",scope:this},{id:"collapse-all",handler:function(){this.grid.view.collapseAllGroups();},qtip:"收起",scope:this}]});},findRecord:function(c){var d=null;this.grid.store.each(function(a){if(a.data.name==c){d=a;return false;}});return d;},findType:function(f){var e=xds.configs[xds.active.component.xcls].configs;for(var h=0,g=e.length;h<g;h++){if(e[h].name==f){return e[h].type;}}return"String";},addAndEdit:function(h,j,f){var g=xds.active.component.config;if(f!==undefined||g[h]===undefined){g[h]=f!==undefined?this.convertForType(j,f):this.getDefaultForType(j);this.grid.setComponent(g);}if(f===undefined){var i=this.findRecord(h);if(i){this.grid.startEditing.defer(10,this.grid,[this.grid.store.indexOf(i),1]);}}else{xds.fireEvent("componentchanged");}},getDefaultForType:function(b){b=b.toLowerCase();switch(b){case"string":return"";case"boolean":return false;case"number":return 0;default:return"";}},convertForType:function(d,c){d=d.toLowerCase();switch(d){case"string":return""+c;case"boolean":return !(c===false||c==="0"||c==="false");case"number":return c===""?0:parseInt(c,10);default:return c;}},onRowContext:function(e,d,f){if(!this.contextMenu){this.contextMenu=new Ext.menu.Menu({items:[{text:"删除",iconCls:"icon-delete",handler:function(){xds.active.component.getConfigObject(this.contextProperty).setValue(xds.active.component,undefined);this.refresh();xds.fireEvent("componentchanged");},scope:this},"-",{text:"Refresh values",iconCls:"icon-refresh",handler:this.refresh,scope:this}]});}this.contextProperty=this.grid.store.getAt(d).data.name;this.contextMenu.items.items[0].setText("Delete "+this.contextProperty);this.contextMenu.showAt(f.getXY());f.stopEvent();},refresh:function(){if(xds.active){var b=xds.active.component;this.grid.setComponent(b);}else{this.grid.clear();}},setValue:function(d,f){var e=this.grid.propStore.store.getById(d);if(e){e.set("value",f);}}});xds.Inspector=Ext.extend(Ext.tree.TreePanel,{constructor:function(){xds.inspector=this;xds.Inspector.superclass.constructor.call(this,{id:"structure",region:"center",split:true,height:300,minHeight:120,autoScroll:true,margins:"0 0 0 0",title:"组件视图",trackMouseOver:false,animate:false,autoScroll:true,useArrows:true,enableDD:true,border:false,rootVisible:false,tools:[{id:"expand-all",qtip:"展开",handler:function(){this.root.expand(true);},scope:this},{id:"collapse-all",qtip:"收起",handler:function(){this.root.collapse(true);},scope:this},{id:"refresh",qtip:"刷新",handler:function(){xds.fireEvent("componentchanged");}}],keys:[{key:Ext.EventObject.DELETE,fn:function(){if(xds.active){Ext.Msg.confirm("删除组件","确定删除该组件？",function(b){if(b=="yes"&&xds.active){xds.inspector.removeComponent(xds.active.component);}});}}}]});},initComponent:function(){this.loader=new xds.Inspector.DemoLoader();this.root={id:"croot",async:true,expanded:true,allowDrag:false,text:"croot",allowDrop:false};this.on("nodedragover",this.onDragOver,this);this.on("beforeappend",this.onBeforeAppend,this);this.on("beforenodedrop",this.onBeforeDrop,this);this.on("nodedrop",this.onAfterDrop,this);this.on("contextmenu",this.onNodeContext,this);xds.on("componentevent",this.onComponentEvent,this);xds.on("componentclick",this.onComponentClick,this);this.getSelectionModel().on("selectionchange",function(d,f){var e=f;while(e&&e.parentNode!=this.root){e=e.parentNode;}if(this.prevSelection){this.prevSelection.onSelectChange(false);delete this.prevSelection;}if(f&&f.component){f.component.onSelectChange(true);this.prevSelection=f.component;}xds.fireEvent("componentselect",{component:f?f.component:null,node:f,top:e?e.component:null,topNode:e});},this);xds.Inspector.superclass.initComponent.call(this);},onBeforeEdit:function(d,f,e){return !this.getNodeById(f);},onEdit:function(f,e,g){var h=this.editor.editNode;},onComponentClick:function(b){if(b.node){b.node.select();}},onBeforeAppend:function(g,e,h){var f;if(e.component&&(f=e.component.getConfigValue("layout"))){if(xds.Layouts[f]&&xds.Layouts[f].onBeforeAdd){xds.Layouts[f].onBeforeAdd(e,h);}}},removeComponent:function(c){var d=c.attributes?c:this.getNodeById(c.id);if(d){if(d.isSelected()){if(d.nextSibling){d.nextSibling.select();}else{if(d.previousSibling){d.previousSibling.select();}else{if(d.parentNode.component){d.parentNode.select();}else{xds.canvas.clear();}}}}d.parentNode.removeChild(d);if(!this.root.hasChildNodes()){xds.canvas.clear();}}},getContextMenu:function(){if(!this.contextMenu){var b=this.contextMenu=new Ext.menu.Menu({zIndex:80000,items:[{text:"选择组件",iconCls:"icon-cmp-view",handler:function(){b.node.select();}},"-",{itemId:"move-up",text:"上移",handler:function(){b.node.parentNode.insertBefore(b.node,b.node.previousSibling);b.node.select();xds.fireEvent("componentchanged");}},{itemId:"move-down",text:"下移",handler:function(){b.node.parentNode.insertBefore(b.node,b.node.nextSibling.nextSibling);b.node.select();xds.fireEvent("componentchanged");}},"-",{text:"删除",iconCls:"icon-delete",handler:function(){xds.inspector.removeComponent(b.node.component);xds.fireEvent("componentchanged");}}],onContextShow:function(){this.items.get("move-up").setDisabled(!b.node.previousSibling);this.items.get("move-down").setDisabled(!b.node.nextSibling);b.node.ui.addClass("xds-context-node");var f=b.node.component.getActions();if(f){b.add(new Ext.menu.Separator({id:"actions-sep"}));for(var e=0,a=f.length;e<a;e++){b.add(f[e]);}}},onContextClose:function(){var f=b.node.component.getActions();if(f){b.remove(b.items.get("actions-sep"));for(var e=0,a=f.length;e<a;e++){b.remove(b.items.get(f[e].initialConfig.itemId));}}b.node.ui.removeClass("xds-context-node");}});b.on("beforeshow",b.onContextShow,b);b.on("hide",b.onContextClose,b);}return this.contextMenu;},onNodeContext:function(d,f){var e=this.getContextMenu();e.node=d;e.showAt(f.getXY());f.stopEvent();},nextId:function(c){if(!this.getNodeById(c)){return c;}var d=0;while(this.getNodeById(c+(++d))){}return c+d;},onDragOver:function(b){return xds.Component.isValidDrop(this.getDropPosition(b.target,b.point).parent.component,b.dropNode.component||b.dropNode.instance);},onBeforeDrop:function(h){if(!xds.Component.isValidDrop(this.getDropPosition(h.target,h.point).parent.component,h.dropNode.component||h.dropNode.instance)){return false;}if(h.tree==h.source.tree){if(!h.dropNode.component.owner){this.initCopy(h.dropNode,h.target,h.point);h.dropStatus=true;return false;}return true;}else{if(h.dropNode){h.dropStatus=true;var f=this.getDropPosition(h.target,h.point),e=h.dropNode.instance.getSpec(),g=this.restore(e,f.parent,f.before);g.select();xds.fireEvent("componentchanged");}}return false;},getDropPosition:function(f,e){var d={};switch(e){case"above":d.parent=f.parentNode;d.before=f;break;case"below":d.parent=f.parentNode;d.before=f.nextSibling;break;default:d.parent=f;}return d;},onAfterDrop:function(b){b.dropNode.select();b.dropNode.component.setOwner(b.dropNode.parentNode.component);xds.fireEvent("componentchanged");},onComponentEvent:function(d){var f=d.parentId?this.getNodeById(d.parentId):this.root;if(d.type=="new"){this.restore(d.spec||d.component,f).select();xds.fireEvent("componentchanged");}else{if(d.type=="move"){d.component.setOwner(f.component);var e=d.component.getNode();f.appendChild(e);e.select();xds.fireEvent("componentchanged");}}},initCopy:function(d,f,e){Ext.Msg.show({title:"复制",msg:"Dropping a root level component here can not be undone. Would you like to copy it instead?",buttons:Ext.Msg.YESNOCANCEL,fn:function(b){if(b=="yes"){var c=d.component.getInternals(true),a=this.getDropPosition(f,e);this.restore(c,a.parent,a.before).select();}else{if(b=="no"){a=this.getDropPosition(f,e);d.component.setOwner(a.parent.component);a.parent.insertBefore(d,a.before);d.select();xds.fireEvent("componentchanged");}}},scope:this});},restore:function(m,k,n){k=k||this.root;var j=xds.create(m);delete j.cn;if(k){j.setOwner(k.component);}var i=j.getNode();if(k){k.insertBefore(i,n);}if(m.cn){for(var l=0,h;h=m.cn[l];l++){this.restore(h,i);}}return i;}});xds.Inspector.DemoLoader=Ext.extend(Ext.tree.TreeLoader,{load:function(d,c){c();}});xds.Toolbox=Ext.extend(Ext.tree.TreePanel,{constructor:function(){xds.Toolbox.superclass.constructor.call(this,{width:200,region:"west",split:true,id:"toolbox",border:false,margins:"0 0 0 0",cmargins:"0 1 0 0",title:"工具栏",layout:"fit",collapsible:true,rootVisible:false,animate:false,autoScroll:true,useArrows:true,minWidth:150,enableDrag:true,collapseFirst:false,animCollapse:false,animFloat:false,tools:[{id:"expand-all",handler:function(){this.root.expand(true);},qtip:"展开",scope:this},{id:"collapse-all",handler:function(){this.root.collapse(true);},qtip:"收起",scope:this}]});xds.toolbox=this;},initComponent:function(){this.loader=new xds.Toolbox.DemoLoader();this.root={id:"troot",async:true,expanded:true,text:"troot"};xds.Toolbox.superclass.initComponent.call(this);this.getSelectionModel().on("beforeselect",function(d,c){if(c&&!c.isLeaf()){c.toggle();return false;}});this.on("dblclick",this.onDblClick,this);},onDblClick:function(b){if(b.isLeaf()&&xds.active&&xds.Component.isValidDrop(xds.active.component,b.instance)){xds.inspector.restore(b.instance.getSpec(),xds.active.node);xds.fireEvent("componentchanged");}},loadUserTypes:function(){var i=xds.Registry.userTypes;if(i){var h=this.getNodeById("User_Components");if(h){while(h.firstChild){h.removeChild(h.firstChild);}}else{h=this.root.appendChild({cls:"toolbox-ct",allowDrag:false,text:"User Components",id:"User_Components",leaf:false});}h.beginUpdate();for(var j=0,k;k=i[j];j++){var g=xds.Registry.get(k.cid);if(g){var l=new Ext.tree.TreeNode({text:k.name,iconCls:g.prototype.iconCls,leaf:true,user:true});h.appendChild(l);l.type=g;l.spec=k;l.instance=new g();l.instance.spec=k;}}h.endUpdate();h.expand();}},onRender:function(c,d){xds.Toolbox.superclass.onRender.call(this,c,d);this.innerCt.setStyle("padding-bottom","20px");}});xds.Toolbox.Loader=Ext.extend(Ext.tree.TreeLoader,{load:Ext.emptyFn});xds.Toolbox.WebLoader=Ext.extend(xds.Toolbox.Loader,{});xds.Toolbox.DemoLoader=Ext.extend(xds.Toolbox.Loader,{load:function(t,m){if(t.id!="troot"){m();return;}var k=t.getOwnerTree();t.beginUpdate();var l=xds.Registry.all.items;for(var s=0,q=l.length,n,p,r;s<q;s++){p=l[s];r="xdc"+p.prototype.category.replace(/\s/g,"_");n=k.getNodeById(r);if(!n){n=t.appendChild({cls:"toolbox-ct",allowDrag:false,text:p.prototype.category,id:r,leaf:false});}var o=new Ext.tree.TreeNode({text:p.prototype.text,iconCls:p.prototype.iconCls,leaf:true});n.appendChild(o);o.type=p;o.instance=new p();}k.loadUserTypes();t.endUpdate();t.expand.defer(10,t,[true]);m();xds.fireEvent("componentsloaded");}});xds.Layouts={form:{id:"form",xcls:"Ext.layout.FormLayout",text:"Form Layout",configs:[{name:"anchor",group:"Ext.layout.FormLayout",ctype:"string"},{name:"clearCls",group:"Ext.layout.FormLayout",ctype:"string"},{name:"fieldLabel",group:"Ext.layout.FormLayout",ctype:"string"},{name:"hideLabel",group:"Ext.layout.FormLayout",ctype:"boolean"},{name:"itemCls",group:"Ext.layout.FormLayout",ctype:"string"},{name:"labelSeparator",group:"Ext.layout.FormLayout",ctype:"string"},{name:"labelStyle",group:"Ext.layout.FormLayout",ctype:"string"}],layoutConfigs:[{name:"labelAlign",group:"(Layout)",ctype:"string",editor:"options",options:["left","right","top"]},{name:"labelSeparator",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"string"},{name:"labelPad",group:"Ext.layout.FormLayout",ctype:"number"},{name:"labelWidth",group:"Ext.layout.FormLayout",ctype:"number"}]},table:{id:"table",xcls:"Ext.layout.TableLayout",text:"Table Layout",configs:[{name:"cellId",group:"Ext.layout.TableLayout",ctype:"string"},{name:"cellCls",group:"Ext.layout.TableLayout",ctype:"string"},{name:"colspan",group:"Ext.layout.TableLayout",ctype:"number"},{name:"rowspan",group:"Ext.layout.TableLayout",ctype:"number"}],layoutConfigs:[{name:"columns",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"number"}]},card:{id:"card",xcls:"Ext.layout.CardLayout",text:"Card Layout",configs:[],layoutConfigs:[{name:"deferredRender",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:false}]},accordion:{id:"accordion",xcls:"Ext.layout.AccordionLayout",text:"Accordion Layout",configs:[],layoutConfigs:[{name:"fill",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:true},{name:"autoWidth",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:true},{name:"titleCollapse",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:true},{name:"hideCollapseTool",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:false},{name:"collapseFirst",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:false},{name:"animate",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:false},{name:"sequence",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:false},{name:"activeOnTop",group:"(Layout)",ctype:"boolean",setFn:"setContainerConfig",getFn:"getContainerConfigValue",defaultValue:false}]},border:{id:"border",xcls:"Ext.layout.BorderLayout",text:"Border Layout",configs:[{name:"animFloat",group:"Ext.layout.BorderLayout",ctype:"boolean"},{name:"autoHide",group:"Ext.layout.BorderLayout",ctype:"boolean"},{name:"cmargins",group:"Ext.layout.BorderLayout",ctype:"string"},{name:"collapseMode",group:"Ext.layout.BorderLayout",ctype:"string",editor:"options",options:["standard","mini"]},{name:"floatable",group:"Ext.layout.BorderLayout",ctype:"boolean"},{name:"margins",group:"Ext.layout.BorderLayout",ctype:"string"},{name:"minHeight",group:"Ext.layout.BorderLayout",ctype:"number"},{name:"minWidth",group:"Ext.layout.BorderLayout",ctype:"number"},{name:"region",group:"Ext.layout.BorderLayout",ctype:"string",editor:"options",options:["center","east","north","south","west"]},{name:"split",group:"Ext.layout.BorderLayout",ctype:"boolean"}],onBeforeAdd:function(g,j){var l=["center","west","east","north","south"],h=g.firstChild;while(h){var i=h.component.getConfigValue("region");if(i){var k=l.indexOf(i);if(k!=-1){l.splice(k,1);}}h=h.nextSibling;}j.component.setConfig("region",l[0]);},onInit:function(d){var c=d.firstChild;while(c){this.onBeforeAdd(d,c);c=c.nextSibling;}}},anchor:{id:"anchor",xcls:"Ext.layout.AnchorLayout",text:"Anchor Layout",configs:[{name:"anchor",group:"Ext.layout.AnchorLayout",ctype:"string"}]},absolute:{id:"absolute",xcls:"Ext.layout.AbsoluteLayout",text:"Absolute Layout",configs:[{name:"anchor",group:"Ext.layout.AbsoluteLayout",ctype:"string"},{name:"x",group:"Ext.layout.AbsoluteLayout",ctype:"number"},{name:"y",group:"Ext.layout.AbsoluteLayout",ctype:"number"}],layoutConfigs:[{name:"snapToGrid",group:"Ext.layout.AbsoluteLayout",setFn:"setSnapToGrid",getFn:"getSnapToGrid",ctype:"string",editor:"options",options:["(none)","5","10","15","20"],defaultValue:"10"}],onBeforeAdd:function(e,g){if(xds.canvas.lastDropPoint){var h=e.component.getExtComponent();if(h){var f=h.getLayoutTarget().translatePoints(xds.canvas.lastDropPoint);f.left=xds.canvas.dragTracker.snap(f.left,e.component.snapToGrid);f.top=xds.canvas.dragTracker.snap(f.top,e.component.snapToGrid);g.component.userConfig.x=f.left;g.component.userConfig.y=f.top;}}}},column:{id:"column",xcls:"Ext.layout.ColumnLayout",text:"Column Layout",configs:[{name:"columnWidth",group:"Ext.layout.ColumnLayout",ctype:"number"}],layoutConfigs:[{name:"scrollOffset",group:"(Layout)",ctype:"number"}]},fit:{id:"fit",xcls:"Ext.layout.FitLayout",text:"Fit Layout",configs:[]},hbox:{id:"hbox",xcls:"Ext.layout.HBoxLayout",text:"HBox Layout",configs:[{name:"flex",group:"Ext.layout.HBoxLayout",ctype:"number"},{name:"margins",group:"Ext.layout.HBoxLayout",ctype:"string"}],layoutConfigs:[{name:"align",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"string",editor:"options",options:["top","middle","stretch","stretchmax"],defaultValue:"top"},{name:"pack",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"string",editor:"options",options:["start","center","end"],defaultValue:"start"},{name:"padding",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"string",defaultValue:"0"},{name:"scrollOffset",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"number",defaultValue:0}]},vbox:{id:"vbox",xcls:"Ext.layout.VBoxLayout",text:"VBox Layout",configs:[{name:"flex",group:"Ext.layout.VBoxLayout",ctype:"number"},{name:"margins",group:"Ext.layout.VBoxLayout",ctype:"string"}],layoutConfigs:[{name:"align",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"string",editor:"options",options:["left","center","stretch","stretchmax"],defaultValue:"top"},{name:"pack",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"string",editor:"options",options:["start","center","end"],defaultValue:"start"},{name:"padding",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"string",defaultValue:"0"},{name:"scrollOffset",group:"(Layout)",setFn:"setContainerConfig",getFn:"getContainerConfigValue",ctype:"number",defaultValue:0}]}};xds.layouts=["auto","absolute","accordion","anchor","border","card","column","fit","form","hbox","table","vbox"];(function(){for(var b in xds.Layouts){if(xds.Layouts.hasOwnProperty(b)){xds.initConfigs("configs",xds.Layouts[b]);xds.initConfigs("layoutConfigs",xds.Layouts[b]);}}})();xds.StoreCache=new Ext.util.MixedCollection(false,function(b){return b.component.id;});Ext.intercept(Ext.StoreMgr,"register",function(b){if(b.cache===false){return false;}if(b.component){xds.StoreCache.replace(b);}});xds.Flyout=Ext.extend(Ext.Tip,{floating:{shadow:true,shim:true,useDisplay:false,constrain:false,zindex:80001},cls:"component-info x-small-editor",width:170,layout:"form",labelAlign:"top",initComponent:function(){xds.Flyout.superclass.initComponent.call(this);this.component.flyout=this;this.component.flyoutCls="xds-flyout xds-flyout-open";this.component.getFlyoutButton().addClass("xds-flyout-open");this.mon(xds.canvas.el,"mousedown",this.doAutoClose,this);this.mon(xds.east.el,"mousedown",this.doAutoClose,this);this.mon(xds.toolbox.el,"mousedown",this.doAutoClose,this);this.syncTask=Ext.TaskMgr.start({run:function(){var b=this.component.getFlyoutButton();if(b){this.showBy(b,"tl-tr?");}},scope:this,interval:100});},beforeDestroy:function(){delete this.component.flyout;this.component.flyoutCls="xds-flyout";xds.un("componentselect",this.doAutoClose,this);if(this.component.getFlyoutButton()){this.component.getFlyoutButton().removeClass("xds-flyout-open");}Ext.TaskMgr.stop(this.syncTask);xds.Flyout.superclass.beforeDestroy.call(this);},doAutoClose:function(b){if(!b.within(this.el)&&b.target!=this.component.getFlyoutButton().dom){this.destroy();}},doAutoWidth:Ext.emptyFn});xds.CJsonWindow=Ext.extend(Ext.Window,{iconCls:"icon-cmp",width:620,height:400,modal:true,plain:true,layout:"border",initComponent:function(){this.fbar=["->",{text:"确定",handler:this.onAccept,scope:this},{text:"取消",handler:this.close,scope:this}];var p=new Ext.tree.TreeNode({leaf:false,text:"组件树"}),j={NOID:true,CLASS:true};this.cfg=j;function n(f){var d=new Ext.tree.TreeNode({leaf:false,text:f.id,js:f});if(typeof(f.tbar)!="undefined"){var g=f.tbar.length,c=new Ext.tree.TreeNode({expand:true,leaf:false,text:"tbar",iconCls:"icon-toolbar",js:f.tbar});for(var b=0;b<g;b++){if(typeof(f.tbar[b])!="undefined"){c.appendChild(n(f.tbar[b]));}}d.appendChild(c);}if(typeof(f.bbar)!="undefined"){var g=f.bbar.length,a=new Ext.tree.TreeNode({leaf:false,text:"bbar",iconCls:"icon-toolbar",js:f.bbar});for(b=0;b<g;b++){if(typeof(f.bbar[b])!="undefined"){a.appendChild(n(f.bbar[b]));}}d.appendChild(a);}if(typeof(f.fbar)!="undefined"){var g=f.fbar.length,e=new Ext.tree.TreeNode({leaf:false,text:"fbar",iconCls:"icon-toolbar",js:f.fbar});for(b=0;b<g;b++){if(typeof(f.fbar[b])!="undefined"){e.appendChild(n(f.fbar[b]));}}d.appendChild(e);}if(typeof(f.columns)!="undefined"){g=f.columns.length;for(b=0;b<g;b++){if(typeof(f.columns[b])!="undefined"){d.appendChild(new Ext.tree.TreeNode({leaf:true,text:f.columns[b].header,iconCls:"icon-grid",js:f.columns[b]}));}}}if(typeof(f.store)!="undefined"){d.appendChild(new Ext.tree.TreeNode({leaf:true,text:"store",iconCls:"icon-json",js:f.store}));}if(typeof(f.items)!="undefined"){g=f.items.length;for(b=0;b<g;b++){if(typeof(f.items[b])!="undefined"){d.appendChild(n(f.items[b]));}}}return d;}function k(a){return Object.prototype.toString.call(a)==="[object Array]";}function r(a,e){var d=true;for(var c in a){switch(c){case"name":case"xcls":case"xtype":case"storeId":case"id":case"dock":break;case"type":if(a[c]!="auto"){d=false;}break;default:d=false;}}if(d){return"'"+a.name+"'";}var b=[];for(c in a){switch(c){case"xtype":case"xcls":case"storeId":case"id":break;case"type":if(a[c]!="auto"){b.push(c+':"'+a[c]+'"');}break;default:switch(typeof(a[c])){case"string":b.push(c+':"'+a[c]+'"');break;}break;}}return"{\n"+e+"\t"+b.join(",\n"+e+"\t")+"\n"+e+"}";}function q(e,c){if(k(e)){var d=e.length,b=[];for(var a=0;a<d;a++){b.push(r(e[a],c));}return"["+"\n"+c+b.join(",\n"+c)+"\n"+c+"]";}return"[]";}function o(b,e,a){var d="",g=b.name.split(".");if(g.length>2){d='Ext.ns("';var f=[];for(var c=0;c<g.length-1;c++){f.push(g[c]);}d+=f.join(".")+'");\n';}if(g.length==1){b.name="Ext."+b.name;}d+=b.name+"=Ext.extend("+b.xcls+" ,{\n";var h=[];for(var i in b){switch(i){case"name":break;case"xcls":break;case"userXType":break;case"id":if(j.NOID){break;}case"items":case"tbar":case"fbar":case"bbar":break;break;default:switch(typeof(b[i])){case"string":h.push(i+':"'+b[i].replace('"','\\"')+'"');break;case"number":h.push(i+":"+b[i]);break;case"boolean":h.push(i+":"+(b[i]?"true":"false"));break;case"object":h.push(i+":"+m(b[i],null,a+"\t",false));break;}}}d+=h.join(",\n"+a);if(h.length>0){d+=",\n"+a;}d+="initComponent: function(){\n";if(typeof(b.tbar)!="undefined"){d+=a+"\tthis.tbar="+m(b.tbar,"button",a+"\t\t",false)+"\n";}if(typeof(b.fbar)!="undefined"){d+=a+"\tthis.fbar="+m(b.fbar,"button",a+"\t\t",false)+"\n";}if(typeof(b.bbar)!="undefined"){d+=a+"\tthis.bbar="+m(b.bbar,"button",a+"\t\t",false)+"\n";}if(typeof(b.items)!="undefined"){if(typeof(b.defaultType)=="string"){d+=a+"\tthis.items="+m(b.items,b.defaultType,a+"\t\t",false)+"\n";}else{d+=a+"\tthis.items="+m(b.items,null,a+"\t\t",false)+"\n";}}d+="\t"+a+b.name+".superclass.initComponent.call(this);\n"+a+"}\n})";if(typeof(b.userXType)=="string"){d+='\nExt.reg("'+b.userXType+'",'+b.name+");";}return d;}function m(c,g,b,i,h){if(!b){b="";}var f="",u=k(c);if(!u&&h&&typeof(c.name)=="string"){return o(c,g,b,false);}if(i){if(u){f="["+"\n"+b;}else{f="var "+c.name+"=new "+c.xcls+"({"+"\n"+b;}}else{if(u){f="["+"\n"+b;}else{f="{"+"\n"+b;}}var v=[];if(u){var d=c.length;for(var e=0;e<d;e++){switch(typeof(c[e])){case"string":v.push('"'+c[e].replace('"','\\"')+'"');break;case"number":v.push(c[e]);break;case"boolean":v.push(c[e]?"true":"false");break;case"object":v.push(m(c[e],g,b+"\t",false));break;}}}else{for(var a in c){switch(a){case"xcls":break;case"id":if(j.NOID){break;}case"name":v.push(a+':"'+c.name+'"');break;case"xtype":if(!i){switch(c[a]){case"tbfill":return'"->"';case"tbseparator":return'"-"';case"tbspacer":return'" "';}}if(typeof(g)=="string"&&g==c[a]){break;}if(i){break;}default:switch(typeof(c[a])){case"string":v.push(a+':"'+c[a].replace('"','\\"')+'"');break;case"number":v.push(a+":"+c[a]);break;case"boolean":v.push(a+":"+(c[a]?"true":"false"));break;case"object":switch(a){case"items":if(typeof(c.defaultType)=="string"){v.push(a+":"+m(c[a],c.defaultType,b+"\t",false));break;}switch(c.xtype){case"buttongroup":v.push(a+":"+m(c[a],"button",b+"\t",false));break;default:v.push(a+":"+m(c[a],null,b+"\t",false));break;}break;case"bbar":case"tbar":case"fbar":v.push(a+":"+m(c[a],"button",b+"\t",false));break;case"fields":v.push(a+":"+q(c[a],b+"\t"));break;default:v.push(a+":"+m(c[a],null,b+"\t",false));}break;}break;}}}if(i){if(u){f+=v.join(",\n"+b)+"\n"+b.substring(0,b.length-1)+"]";}else{f+=v.join(",\n"+b)+"\n"+b.substring(0,b.length-1)+"})";}}else{if(u){f+=v.join(",\n"+b)+"\n"+b.substring(0,b.length-1)+"]";}else{f+=v.join(",\n"+b)+"\n"+b.substring(0,b.length-1)+"}";}}return f;}this.objToString=m;for(var l=0;l<this.jdb.length;l++){p.appendChild(n(this.jdb[l]));}this.items=[new Ext.Panel({region:"center",plain:true,border:false,layout:"fit",margins:"3 3 3 0",items:[{xtype:"textarea",id:"textarea-viewjson-value",fieldLabel:"Text",name:"textarea",value:this.getJsonSource()}],tbar:[{iconCls:"icon-copy",itemText:"Copy Code",tooltip:"Copy the code to clipboard.",handler:function(){var b=window.parentSandboxBridge,a=Ext.getCmp("textarea-viewjson-value");b.toClipboard(a.getValue());}},{iconCls:"icon-save",handler:function(b,a){var c=Ext.getCmp("textarea-viewjson-value");window.parentSandboxBridge.saveJSAs({contents:c.getValue()});}},"-",{iconCls:"icon-noid",enableToggle:true,pressed:true,text:"NoID",handler:function(b,a){j.NOID=b.pressed;}}," ",{iconCls:"icon-class",enableToggle:true,pressed:true,text:"class",handler:function(b,a){j.CLASS=b.pressed;}}]}),new Ext.Panel({region:"west",plain:true,width:180,margins:"3 3 3 3",items:[new Ext.tree.TreePanel({useArrows:true,animate:true,containerScroll:true,border:false,root:p,listeners:{click:function(a,c){var b=Ext.getCmp("textarea-viewjson-value");if(!a.parentNode){b.setValue("/*click the treenode to view json data.*/");}else{var d=a.attributes.js;b.setValue(m(d,null,"\t",true,j.CLASS));}}},scope:this})]})];xds.CJsonWindow.superclass.initComponent.call(this);},onAccept:function(){this.close();},getJsonSource:function(){if(this.jdb.length>0){return this.objToString(this.jdb[0],null,"\t",true,this.cfg.CLASS);}return"";}});xds.CWindow=Ext.extend(Ext.Window,{iconCls:"icon-cmp",width:500,height:350,layout:"border",plain:true,modal:true,initComponent:function(){this.items=[this.view=new Ext.ux.TileView({style:"background:#fff;overflow:auto",region:"center",categoryName:"category",store:new xds.Registry.createStore(true),singleSelect:true,trackOver:true,overClass:"x-tile-over"}),{layout:"form",region:"south",height:29,bodyStyle:"padding:3px;border-top:1px solid #B7CCE4;",baseCls:"x-plain",labelWidth:70,items:this.idField=new Ext.form.TextField({value:"MyComponent",selectOnFocus:true,fieldLabel:"Class Name",anchor:"100%"})}];this.buttons=[{text:"OK",disabled:true,handler:this.onAccept,scope:this},{text:"Cancel",handler:this.close,scope:this}];this.view.on("selectionchange",this.onViewSelect,this);xds.CWindow.superclass.initComponent.call(this);},onViewSelect:function(){var b=this.view.getSelectedRecords()[0];if(b){this.buttons[0].enable();this.idField.setValue(xds.inspector.nextId(b.data.naming));}else{this.buttons[0].disable();}},onAccept:function(){var d=this.view.getSelectedRecords()[0],c=xds.Registry.get(d.id);xds.fireEvent("componentevent",{type:"new",component:(new c()).getSpec()});this.close();}});xds.types.Container=Ext.extend(xds.Component,{cid:"container",category:"容器",defaultName:"&lt;container&gt;",text:"Container",dtype:"xdcontainer",xtype:"container",xcls:"Ext.Container",iconCls:"icon-container",naming:"MyContainer",enableFlyout:true,isContainer:true,defaultConfig:{autoEl:"div"},initConfig:function(c,d){if(!d){c.width=400;c.height=250;}},isResizable:function(d,c){return !this.isFit()&&!this.isAnchored();},configs:[{name:"activeItem",group:"Ext.Container",ctype:"string"},{name:"autoDestroy",group:"Ext.Container",ctype:"boolean"},{name:"defaultType",group:"Ext.Container",ctype:"string"},{name:"hideBorders",group:"Ext.Container",ctype:"boolean"},{name:"layout",group:"Ext.Container",ctype:"string",editor:"options",options:xds.layouts},{name:"autoHeight",group:"Ext.BoxComponent",ctype:"boolean"},{name:"autoWidth",group:"Ext.BoxComponent",ctype:"boolean"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}],onFlyout:function(){var b=[{xtype:"flyoutselect",fieldLabel:"选择布局方式",data:xds.layouts,bindTo:{component:this,name:"layout",event:"select",defaultValue:"auto"}}];if(this.owner&&this.owner.hasConfig("layout","border")){b.push({xtype:"flyoutselect",fieldLabel:"Select a region",data:["north","east","center","south","west"],bindTo:{component:this,name:"region",event:"select"}});}return new xds.Flyout({title:this.getNode().text,component:this,items:b});}});xds.Registry.register(xds.types.Container);xds.Container=Ext.extend(Ext.Container,{});Ext.reg("xdcontainer",xds.Container);xds.PanelBase=Ext.extend(xds.Component,{category:"容器",isContainer:true,enableFlyout:true,isResizable:function(d,c){return !this.isFit()&&!this.isAnchored();},initConfig:function(c,d){if(!d){c.width=400;c.height=250;}},autoScrollable:true,layoutable:true,getFlyoutItems:function(){var b=[];if(this.layoutable){b.push({xtype:"flyoutselect",fieldLabel:"选择布局方式",data:xds.layouts,bindTo:{component:this,name:"layout",event:"select",defaultValue:"auto"}});}if(this.autoScrollable){b.push({xtype:"checkbox",boxLabel:"Enable autoScroll",hideLabel:true,bindTo:{component:this,name:"autoScroll",event:"check"}});}if(this.owner&&this.owner.hasConfig("layout","border")){b.push({xtype:"flyoutselect",fieldLabel:"Select a region",data:["north","east","center","south","west"],bindTo:{component:this,name:"region",event:"select"}});}if(this.hasConfig("layout","absolute")){b.push({xtype:"flyoutselect",fieldLabel:"Snap to grid",data:["(none)",5,10,15,20],bindTo:{component:this,name:"snapToGrid",event:"select"}});}return b;},onFlyout:function(){var b=this.getFlyoutItems();return new xds.Flyout({title:this.getNode().text,component:this,items:b});},getPanelHeader:function(){var b=this.getExtComponent();if(b.header&&b.headerAsText){return b.header.child("span");}return null;},onFilmDblClick:function(d){var c=this.getPanelHeader();if(c&&c.getRegion().contains(d.getPoint())){this.startTitleEdit(c);}else{xds.PanelBase.superclass.onFilmDblClick.call(this,d);}},startTitleEdit:function(b){xds.canvas.startEdit(this,b||this.getPanelHeader(),this.getConfigObject("title"),150);}});xds.types.FieldSet=Ext.extend(xds.Component,{cid:"fieldset",category:"容器",defaultName:"&lt;fieldset&gt;",text:"FieldSet",dtype:"xdfieldset",xtype:"fieldset",xcls:"Ext.form.FieldSet",iconCls:"icon-fieldset",naming:"MyFieldSet",isContainer:true,defaultConfig:{title:"My Fields",layout:"form"},initConfig:function(c,d){if(!d){c.width=400;}},onFilmDblClick:function(c){var d=this.getExtComponent();if(d.header&&d.header.getRegion().contains(c.getPoint())){xds.canvas.startEdit(this,d.header,this.getConfigObject("title"));}else{xds.types.Fieldset.superclass.onFilmDblClick.call(this,c);}},configs:[{name:"checkboxName",group:"Ext.form.FieldSet",ctype:"string"},{name:"checkboxToggle",group:"Ext.form.FieldSet",ctype:"boolean"},{name:"title",group:"Ext.form.FieldSet",ctype:"string"},{name:"animCollapse",group:"Ext.Panel",ctype:"boolean"},{name:"autoScroll",group:"Ext.Panel",ctype:"boolean"},{name:"baseCls",group:"Ext.Panel",ctype:"string"},{name:"bodyStyle",group:"Ext.Panel",ctype:"string"},{name:"collapsedCls",group:"Ext.Panel",ctype:"string"},{name:"collapsible",group:"Ext.Panel",ctype:"boolean"},{name:"html",group:"Ext.Panel",ctype:"string"},{name:"maskDisabled",group:"Ext.Panel",ctype:"boolean"},{name:"padding",group:"Ext.Panel",ctype:"string"},{name:"autoDestroy",group:"Ext.Container",ctype:"boolean"},{name:"defaultType",group:"Ext.Container",ctype:"string"},{name:"hideBorders",group:"Ext.Container",ctype:"boolean"},{name:"layout",group:"Ext.Container",ctype:"string",editor:"options",options:xds.layouts},{name:"autoHeight",group:"Ext.BoxComponent",ctype:"boolean"},{name:"autoWidth",group:"Ext.BoxComponent",ctype:"boolean"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.FieldSet);xds.FieldSet=Ext.extend(Ext.form.FieldSet,{});Ext.reg("xdfieldset",xds.FieldSet);xds.types.Form=Ext.extend(xds.PanelBase,{cid:"form",defaultName:"&lt;form&gt;",text:"Form Panel",dtype:"xdform",xtype:"formpanel",xcls:"Ext.form.FormPanel",iconCls:"icon-form",naming:"MyForm",defaultConfig:{title:"My Form",labelWidth:100,labelAlign:"left",layout:"form"},initConfig:function(c,d){if(!d){c.width=400;c.height=250;c.padding="10px";}},configs:[{name:"formId",group:"Ext.form.FormPanel",ctype:"string"},{name:"itemCls",group:"Ext.form.FormPanel",ctype:"string"},{name:"labelAlign",group:"Ext.form.FormPanel",ctype:"string",editor:"options",options:["left","right","top"],defaultValue:"left"},{name:"labelSeparator",group:"Ext.form.FormPanel",ctype:"string",defaultValue:":"},{name:"labelWidth",group:"Ext.form.FormPanel",ctype:"number"},{name:"monitorPoll",group:"Ext.form.FormPanel",ctype:"number"},{name:"monitorValid",group:"Ext.form.FormPanel",ctype:"boolean"},{name:"animCollapse",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"autoScroll",group:"Ext.Panel",ctype:"boolean"},{name:"baseCls",group:"Ext.Panel",ctype:"string"},{name:"bodyBorder",group:"Ext.Panel",ctype:"boolean"},{name:"bodyStyle",group:"Ext.Panel",ctype:"string"},{name:"border",group:"Ext.Panel",ctype:"boolean"},{name:"buttonAlign",group:"Ext.Panel",ctype:"string",editor:"options",options:["center","left","right"]},{name:"collapsedCls",group:"Ext.Panel",ctype:"string"},{name:"collapsible",group:"Ext.Panel",ctype:"boolean"},{name:"disabled",group:"Ext.Panel",ctype:"boolean"},{name:"elements",group:"Ext.Panel",ctype:"string"},{name:"footer",group:"Ext.Panel",ctype:"boolean"},{name:"frame",group:"Ext.Panel",ctype:"boolean"},{name:"header",group:"Ext.Panel",ctype:"boolean"},{name:"headerAsText",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"hideCollapseTool",group:"Ext.Panel",ctype:"boolean"},{name:"html",group:"Ext.Panel",ctype:"string"},{name:"iconCls",group:"Ext.Panel",ctype:"string"},{name:"maskDisabled",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"minButtonWidth",group:"Ext.Panel",ctype:"number"},{name:"padding",group:"Ext.Panel",ctype:"string"},{name:"shadow",group:"Ext.Panel",ctype:"string",editor:"options",options:["sides","drop","frame"]},{name:"shadowOffset",group:"Ext.Panel",ctype:"number"},{name:"tabTip",group:"Ext.Panel",ctype:"string"},{name:"title",group:"Ext.Panel",ctype:"string"},{name:"titleCollapse",group:"Ext.Panel",ctype:"boolean"},{name:"unstyled",group:"Ext.Panel",ctype:"boolean"},{name:"activeItem",group:"Ext.Container",ctype:"string"},{name:"autoDestroy",group:"Ext.Container",ctype:"boolean"},{name:"defaultType",group:"Ext.Container",ctype:"string"},{name:"hideBorders",group:"Ext.Container",ctype:"boolean"},{name:"layout",group:"Ext.Container",ctype:"string",editor:"options",options:xds.layouts},{name:"autoHeight",group:"Ext.BoxComponent",ctype:"boolean"},{name:"autoWidth",group:"Ext.BoxComponent",ctype:"boolean"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.Form);xds.FormPanel=Ext.extend(Ext.form.FormPanel,{});Ext.reg("xdform",xds.FormPanel);xds.types.Panel=Ext.extend(xds.PanelBase,{cid:"panel",defaultName:"&lt;panel&gt;",text:"Panel",dtype:"xdpanel",xtype:"panel",xcls:"Ext.Panel",iconCls:"icon-panel",naming:"MyPanel",defaultConfig:{title:"My Panel"},configs:[{name:"animCollapse",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"autoScroll",group:"Ext.Panel",ctype:"boolean"},{name:"baseCls",group:"Ext.Panel",ctype:"string"},{name:"bodyBorder",group:"Ext.Panel",ctype:"boolean"},{name:"bodyStyle",group:"Ext.Panel",ctype:"string"},{name:"border",group:"Ext.Panel",ctype:"boolean"},{name:"buttonAlign",group:"Ext.Panel",ctype:"string",editor:"options",options:["center","left","right"],defaultValue:"right"},{name:"collapsedCls",group:"Ext.Panel",ctype:"string"},{name:"collapsible",group:"Ext.Panel",ctype:"boolean"},{name:"disabled",group:"Ext.Panel",ctype:"boolean"},{name:"elements",group:"Ext.Panel",ctype:"string"},{name:"footer",group:"Ext.Panel",ctype:"boolean"},{name:"frame",group:"Ext.Panel",ctype:"boolean"},{name:"header",group:"Ext.Panel",ctype:"boolean"},{name:"headerAsText",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"hideCollapseTool",group:"Ext.Panel",ctype:"boolean"},{name:"html",group:"Ext.Panel",ctype:"string"},{name:"iconCls",group:"Ext.Panel",ctype:"string"},{name:"maskDisabled",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"minButtonWidth",group:"Ext.Panel",ctype:"number"},{name:"padding",group:"Ext.Panel",ctype:"string"},{name:"shadow",group:"Ext.Panel",ctype:"string",editor:"options",options:["sides","drop","frame"]},{name:"shadowOffset",group:"Ext.Panel",ctype:"number"},{name:"tabTip",group:"Ext.Panel",ctype:"string"},{name:"title",group:"Ext.Panel",ctype:"string",updateFn:"setTitle"},{name:"titleCollapse",group:"Ext.Panel",ctype:"boolean"},{name:"unstyled",group:"Ext.Panel",ctype:"boolean"},{name:"activeItem",group:"Ext.Container",ctype:"string"},{name:"autoDestroy",group:"Ext.Container",ctype:"boolean"},{name:"defaultType",group:"Ext.Container",ctype:"string"},{name:"hideBorders",group:"Ext.Container",ctype:"boolean"},{name:"layout",group:"Ext.Container",ctype:"string",editor:"options",options:xds.layouts},{name:"autoHeight",group:"Ext.BoxComponent",ctype:"boolean"},{name:"autoWidth",group:"Ext.BoxComponent",ctype:"boolean"},{name:"height",group:"Ext.BoxComponent",ctype:"number",updateFn:"setHeight"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.Panel);xds.Panel=Ext.extend(Ext.Panel,{});Ext.reg("xdpanel",xds.Panel);xds.types.TabPanel=Ext.extend(xds.PanelBase,{cid:"tabpanel",defaultName:"&lt;tabs&gt;",text:"TabPanel",dtype:"xdtabpanel",xtype:"tabpanel",xcls:"Ext.TabPanel",iconCls:"icon-tabs",naming:"MyTabs",layoutable:false,autoScrollable:false,defaultConfig:{activeTab:0},configs:[{name:"activeTab",group:"Ext.TabPanel",ctype:"string",updateFn:"setActiveTab"},{name:"baseCls",group:"Ext.Panel",ctype:"string"},{name:"bodyBorder",group:"Ext.Panel",ctype:"boolean"},{name:"bodyStyle",group:"Ext.Panel",ctype:"string"},{name:"border",group:"Ext.Panel",ctype:"boolean"},{name:"buttonAlign",group:"Ext.Panel",ctype:"string",editor:"options",options:["center","left","right"],defaultValue:"right"},{name:"collapsedCls",group:"Ext.Panel",ctype:"string"},{name:"collapsible",group:"Ext.Panel",ctype:"boolean"},{name:"disabled",group:"Ext.Panel",ctype:"boolean"},{name:"maskDisabled",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"minButtonWidth",group:"Ext.Panel",ctype:"number"},{name:"tabTip",group:"Ext.Panel",ctype:"string"},{name:"unstyled",group:"Ext.Panel",ctype:"boolean"},{name:"activeItem",group:"Ext.Container",ctype:"string"},{name:"autoDestroy",group:"Ext.Container",ctype:"boolean"},{name:"defaultType",group:"Ext.Container",ctype:"string"},{name:"hideBorders",group:"Ext.Container",ctype:"boolean"},{name:"autoHeight",group:"Ext.BoxComponent",ctype:"boolean"},{name:"autoWidth",group:"Ext.BoxComponent",ctype:"boolean"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}],getFlyoutItems:function(){var k=xds.types.TabPanel.superclass.getFlyoutItems.call(this),h=[],i=this,g=this.getNode().childNodes;for(var j=0,l;l=g[j];j++){if(!l.dock){h.push(l.component.getConfigValue("title"));}}k.unshift({xtype:"flyoutselect",fieldLabel:"Active Item",data:h,bindTo:{component:this,name:"activeTab",event:"select",get:function(){var a=i.getExtComponent(),b=a.getActiveTab();if(b){return h[a.items.indexOf(b)];}else{return h[0];}},set:function(b){var a=h.indexOf(b.getValue()),c=i.getConfigObject("activeTab");c.setValue(i,a);if(xds.active.component==i){xds.props.setValue("activeTab",a);}}}});return k;},getDefaultInternals:function(){return{cid:this.cid,cn:[{cid:"panel",userConfig:{title:"Tab 1"}},{cid:"panel",userConfig:{title:"Tab 2"}},{cid:"panel",userConfig:{title:"Tab 3"}}]};},getTabTarget:function(o){if(o.getTarget("b",1)){return false;}var m=this.getExtComponent();if(m){var k=o.getPoint(),n=m.stripWrap.getRegion();if(!n.contains(k)){return;}var j=m.stripWrap.dom.getElementsByTagName("li"),p=false;for(var r=0,q=j.length-1;r<q;r++){var l=j[r];if(Ext.fly(l).getRegion().contains(k)){p=r;break;}}return p;}return false;},getTabComponent:function(g){var f=0,j=this.getNode();for(var i=0,h;h=j.childNodes[i];i++){if(!h.dock){if(f===g){return h.component;}else{f++;}}}return null;},onFilmClick:function(h){var e=this.getTabTarget(h);if(e!==false){var g=this.getConfigObject("activeTab");g.setValue(this,e);if(xds.active&&xds.active.component==this){xds.props.setValue("activeTab",e);}var f=this.getTabComponent(e);if(f){f.getNode().select();return false;}}},onFilmDblClick:function(h){var g=this.getTabTarget(h);if(g!==false){var f=this.getTabComponent(g),e=this.getExtComponent().getTabEl(g);xds.canvas.startEdit(f,e,f.getConfigObject("title"),100);}}});xds.Registry.register(xds.types.TabPanel);xds.TabPanel=Ext.extend(Ext.TabPanel,{});Ext.reg("xdtabpanel",xds.TabPanel);xds.types.Button=Ext.extend(xds.Component,{cid:"button",category:"标准控件",defaultName:"&lt;button&gt;",text:"Button",dtype:"xdbutton",xtype:"button",xcls:"Ext.Button",iconCls:"icon-button",naming:"MyButton",isContainer:true,filmCls:"el-film-nolabel",validChildTypes:["menu"],defaultConfig:{text:"MyButton"},initConfig:function(c,d){},configs:[{name:"allowDepress",group:"Ext.Button",ctype:"boolean"},{name:"arrowAlign",group:"Ext.Button",ctype:"string",editor:"options",options:["bottom","left","right","top"]},{name:"clickEvent",group:"Ext.Button",ctype:"string",editor:"options",options:["click","mousedown"]},{name:"enableToggle",group:"Ext.Button",ctype:"boolean"},{name:"iconAlign",group:"Ext.Button",ctype:"string",editor:"options",options:["bottom","left","right","top"]},{name:"iconCls",group:"Ext.Button",ctype:"string"},{name:"menuAlign",group:"Ext.Button",ctype:"string"},{name:"minWidth",group:"Ext.Button",ctype:"number"},{name:"pressed",group:"Ext.Button",ctype:"boolean"},{name:"repeat",group:"Ext.Button",ctype:"boolean"},{name:"scale",group:"Ext.Button",ctype:"string",editor:"options",options:["small","medium","large"]},{name:"tabIndex",group:"Ext.Button",ctype:"number"},{name:"text",group:"Ext.Button",ctype:"string"},{name:"toggleGroup",group:"Ext.Button",ctype:"string"},{name:"tooltip",group:"Ext.Button",ctype:"string"},{name:"tooltipType",group:"Ext.Button",ctype:"string",editor:"options",options:["title","qtip"]},{name:"type",group:"Ext.Button",ctype:"string",editor:"options",options:["button","reset","submit"]},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}],onFilmDblClick:function(c){var d=this.getExtComponent();xds.canvas.startEdit(this,d.el.child(d.buttonSelector),this.getConfigObject("text"),80);}});xds.Registry.register(xds.types.Button);xds.Button=Ext.extend(Ext.Button,{});Ext.reg("xdbutton",xds.Button);xds.types.Label=Ext.extend(xds.Component,{cid:"label",category:"标准控件",defaultName:"&lt;label&gt;",text:"Label",dtype:"xdlabel",xtype:"label",xcls:"Ext.form.Label",iconCls:"icon-label",naming:"MyLabel",filmCls:"el-film-nolabel",defaultConfig:{text:"Label:"},isResizable:function(d,c){return d=="Right"&&!this.getConfigValue("anchor")&&(!this.owner||this.owner.getConfigValue("layout")!="form");},onFilmDblClick:function(c){var d=this.getExtComponent();xds.canvas.startEdit(this,d.el,this.getConfigObject("text"));},configs:[{name:"forId",group:"Ext.form.Labl",ctype:"string"},{name:"html",group:"Ext.form.Labl",ctype:"string"},{name:"text",group:"Ext.form.Labl",ctype:"string"},{name:"autoHeight",group:"Ext.BoxComponent",ctype:"boolean"},{name:"autoWidth",group:"Ext.BoxComponent",ctype:"boolean"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.Label);xds.Label=Ext.extend(Ext.form.Label,{});Ext.reg("xdlabel",xds.Label);xds.types.Toolbar=Ext.extend(xds.Component,{cid:"toolbar",category:"工具栏",defaultName:"&lt;toolbar&gt;",text:"Toolbar",dtype:"xdtoolbar",xtype:"toolbar",xcls:"Ext.Toolbar",iconCls:"icon-toolbar",naming:"MyToolbar",enableFlyout:true,isContainer:true,dock:"tbar",defaultConfig:{},initConfig:function(c,d){if(!d){c.width=400;}},configs:[{name:"autoDestroy",group:"Ext.Container",ctype:"boolean"},{name:"defaultType",group:"Ext.Container",ctype:"string"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}],getEditorConfigs:function(){if(!this.owner){return xds.types.Toolbar.superclass.getEditorConfigs.call(this);}return xds.dockConfigs;},onFlyout:function(){return new xds.Flyout({title:this.getNode().text,component:this,items:[{xtype:"flyoutselect",fieldLabel:"Dock in parent",data:["(none)","tbar","bbar","fbar"],bindTo:{component:this,name:"dock",event:"select",defaultValue:"(none)",clear:"(none)"}}]});},isValidParent:function(b){return !b||b.getExtComponent().isXType("panel");}});xds.Registry.register(xds.types.Toolbar);xds.Toolbar=Ext.extend(Ext.Toolbar,{afterRender:function(){if(!this.items||this.items.length<1){this.height=27;}xds.Toolbar.superclass.afterRender.call(this);}});Ext.reg("xdtoolbar",xds.Toolbar);xds.types.ButtonGroup=Ext.extend(xds.PanelBase,{cid:"buttongroup",category:"工具栏",defaultName:"&lt;buttongroup&gt;",text:"ButtonGroup",dtype:"xdbuttongroup",xtype:"buttongroup",xcls:"Ext.ButtonGroup",iconCls:"icon-toolbar",naming:"MyButtonGroup",enableFlyout:true,isContainer:true,defaultConfig:{title:"My ButtonGroup",columns:3},initConfig:function(c,d){if(!d){alert(true);c.width=400;}},configs:[{name:"title",group:"Ext.ButtonGroup",ctype:"string"},{name:"columns",group:"Ext.ButtonGroup",ctype:"number"},{name:"frame",group:"Ext.ButtonGroup",ctype:"boolean",defaultValue:true},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"icon",group:"Ext.BoxComponent",ctype:"string"},{name:"iconCls",group:"Ext.BoxComponent",ctype:"string"}],isValidParent:function(b){return !b||b.getExtComponent().isXType("toolbar");}});xds.Registry.register(xds.types.ButtonGroup);xds.ButtonGroup=Ext.extend(Ext.ButtonGroup,{});Ext.reg("xdbuttongroup",xds.ButtonGroup);xds.types.ToolbarSeparator=Ext.extend(xds.Component,{cid:"tbseparator",category:"工具栏",defaultName:"&lt;separator&gt;",text:"Separator",dtype:"xdtbseparator",xtype:"tbseparator",xcls:"Ext.Toolbar.Separator",iconCls:"icon-cmp",naming:"MySeparator",filmCls:"el-film-nolabel",isContainer:false,defaultConfig:{},configs:[{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.ToolbarSeparator);xds.ToolbarSeparator=Ext.extend(Ext.Toolbar.Separator,{});Ext.reg("xdtbseparator",xds.ToolbarSeparator);xds.types.ToolbarSpacer=Ext.extend(xds.Component,{cid:"tbspacer",category:"工具栏",defaultName:"&lt;spacer&gt;",text:"Spacer",dtype:"xdtbspacer",xtype:"tbspacer",xcls:"Ext.Toolbar.Spacer",iconCls:"icon-cmp",naming:"MySpacer",filmCls:"el-film-nolabel",isContainer:false,defaultConfig:{},configs:[{name:"width",group:"Ext.Toolbar.Spacer",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.ToolbarSpacer);xds.ToolbarSpacer=Ext.extend(Ext.Toolbar.Spacer,{});Ext.reg("xdtbspacer",xds.ToolbarSpacer);xds.types.ToolbarText=Ext.extend(xds.Component,{cid:"tbtext",category:"工具栏",defaultName:"&lt;text&gt;",text:"Text Item",dtype:"xdtbtext",xtype:"tbtext",xcls:"Ext.Toolbar.TextItem",iconCls:"icon-cmp",naming:"MyText",filmCls:"el-film-nolabel",isContainer:false,defaultConfig:{text:"Text Item"},configs:[{name:"text",group:"Ext.Toolbar.TextItem",ctype:"string"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"style",group:"Ext.Component",ctype:"string"}],onFilmDblClick:function(b){xds.canvas.startEdit(this,this.getExtComponent().el,this.getConfigObject("text"),80);}});xds.Registry.register(xds.types.ToolbarText);xds.ToolbarText=Ext.extend(Ext.Toolbar.TextItem,{});Ext.reg("xdtbtext",xds.ToolbarText);xds.types.ToolbarFill=Ext.extend(xds.Component,{cid:"tbfill",category:"工具栏",defaultName:"&lt;fill&gt;",text:"Fill",dtype:"xdtbfill",xtype:"tbfill",xcls:"Ext.Toolbar.Fill",iconCls:"icon-cmp",naming:"MyFill",filmCls:"el-film-nolabel",isContainer:false,defaultConfig:{},configs:[{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.ToolbarFill);xds.ToolbarFill=Ext.extend(Ext.Toolbar.Fill,{});Ext.reg("xdtbfill",xds.ToolbarFill);xds.types.GridPanel=Ext.extend(xds.PanelBase,{cid:"grid",category:"数据表格",defaultName:"&lt;grid&gt;",text:"Grid Panel",dtype:"xdgrid",xtype:"grid",xcls:"Ext.grid.GridPanel",iconCls:"icon-grid",naming:"MyGrid",isContainer:true,autoScrollable:false,layoutable:false,enableFlyout:false,validChildTypes:["gridcolumn","booleancolumn","numbercolumn","datecolumn","templatecolumn","jsonstore","arraystore","xmlstore","toolbar","pagingtoolbar"],defaultConfig:{title:"My Grid",store:"(none)"},initConfig:function(c,d){if(!d){c.width=400;c.height=250;}},isResizable:function(d,c){return !this.isFit()&&!this.isAnchored();},isValidChild:function(b){return this.supr().isValidChild.apply(this,arguments);},configs:[{name:"autoExpandColumn",group:"Ext.grid.GridPanel",ctype:"string"},{name:"autoExpandMax",group:"Ext.grid.GridPanel",ctype:"number"},{name:"autoExpandMin",group:"Ext.grid.GridPanel",ctype:"number"},{name:"columnLines",group:"Ext.grid.GridPanel",ctype:"boolean"},{name:"deferRowRender",group:"Ext.grid.GridPanel",ctype:"boolean",defaultValue:true},{name:"disableSelection",group:"Ext.grid.GridPanel",ctype:"boolean"},{name:"enableColumnHide",group:"Ext.grid.GridPanel",ctype:"boolean",defaultValue:true},{name:"enableColumnMove",group:"Ext.grid.GridPanel",ctype:"boolean",defaultValue:true},{name:"enableColumnResize",group:"Ext.grid.GridPanel",ctype:"boolean",defaultValue:true},{name:"enableHdMenu",group:"Ext.grid.GridPanel",ctype:"boolean",defaultValue:true},{name:"hideHeaders",group:"Ext.grid.GridPanel",ctype:"boolean"},{name:"loadMask",group:"Ext.grid.GridPanel",ctype:"boolean"},{name:"maxHeight",group:"Ext.grid.GridPanel",ctype:"number"},{name:"minColumnWidth",group:"Ext.grid.GridPanel",ctype:"number"},{name:"stripeRows",group:"Ext.grid.GridPanel",ctype:"boolean"},{name:"trackMouseOver",group:"Ext.grid.GridPanel",ctype:"boolean",defaultValue:true},{name:"animCollapse",group:"Ext.Panel",ctype:"boolean"},{name:"baseCls",group:"Ext.Panel",ctype:"string"},{name:"border",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"buttonAlign",group:"Ext.Panel",ctype:"string",editor:"options",options:["center","left","right"]},{name:"collapsedCls",group:"Ext.Panel",ctype:"string"},{name:"collapsible",group:"Ext.Panel",ctype:"boolean"},{name:"disabled",group:"Ext.Panel",ctype:"boolean"},{name:"elements",group:"Ext.Panel",ctype:"string"},{name:"floating",group:"Ext.Panel",ctype:"boolean"},{name:"footer",group:"Ext.Panel",ctype:"boolean"},{name:"frame",group:"Ext.Panel",ctype:"boolean"},{name:"header",group:"Ext.Panel",ctype:"boolean",defaultValue:true},{name:"headerAsText",group:"Ext.Panel",ctype:"boolean"},{name:"hideCollapseTool",group:"Ext.Panel",ctype:"boolean"},{name:"iconCls",group:"Ext.Panel",ctype:"string"},{name:"maskDisabled",group:"Ext.Panel",ctype:"boolean"},{name:"minButtonWidth",group:"Ext.Panel",ctype:"number"},{name:"shadow",group:"Ext.Panel",ctype:"string",editor:"options",options:["sides","drop","frame"]},{name:"shadowOffset",group:"Ext.Panel",ctype:"number"},{name:"tabTip",group:"Ext.Panel",ctype:"string"},{name:"title",group:"Ext.Panel",ctype:"string"},{name:"titleCollapse",group:"Ext.Panel",ctype:"boolean"},{name:"autoHeight",group:"Ext.BoxComponent",ctype:"boolean"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}],createCanvasConfig:function(m){var h=Ext.apply({},this.getConfig());h.xtype=this.dtype;h.stateful=false;h.viewerNode=m;this.activeCmpId=h.id=Ext.id();h.cls="x-panel-animated";h.columns=[];for(var j=0,l=m.childNodes.length,k,n;j<l;j++){n=m.childNodes[j].component;if(n.isStore){h.store=n.createCanvasConfig(m.childNodes[j]);}else{if(!this.assignDocked(h,n)&&n.xtype!="toolbar"){var i=n.getConfig();i.xtype=n.xtype;h.columns.push(i);}}}return h;},getTargetColumnIndex:function(q){var u=this.getExtComponent();if(u){var v=q.getPoint(),l=u.view.mainHd.getRegion();if(!l.contains(v)){return false;}var m=v.left,t=l.left,n=u.colModel.config,s=0,r=false;for(var s=0,o=n.length,p;p=n[s];s++){if(!p.hidden){t+=p.width;if(m<=t){r=s;break;}}}return r;}return false;},getTargetColumn:function(d){if(typeof d=="object"){d=this.getTargetColumnIndex(d);}if(d===false){return null;}var c=this.getColumnNodes();return c[d].component;},onFilmClick:function(c){var d=this.getTargetColumn(c);if(d){d.getNode().select();return false;}},onFilmDblClick:function(h){var g=this.getTargetColumnIndex(h);if(g!==false){var f=this.getExtComponent().view.getHeaderCell(g),e=this.getTargetColumn(g);xds.canvas.startEdit(e,f,e.getConfigObject("header"));}else{xds.types.GridPanel.superclass.onFilmDblClick.call(this,h);}},getDefaultInternals:function(){return{cid:this.cid,cn:[{cid:"gridcolumn",userConfig:{header:"Column 1",dataIndex:"data1"}},{cid:"gridcolumn",userConfig:{header:"Column 2",dataIndex:"data2"}},{cid:"gridcolumn",userConfig:{header:"Column 3",dataIndex:"data3"}}]};},getActions:function(){if(!this.actions){this.actions=[new Ext.Action({itemId:"auto-columns",text:"Auto columns",iconCls:"icon-auto-columns",handler:this.doAutoColumns,scope:this})];}return this.actions;},getColumnNodes:function(){var l=this.getNode(),j=l.childNodes,g=[];for(var i=0,k=j.length,h;h=j[i];i++){if(!h.component.dock&&!h.component.isStore){g.push(h);}}return g;},getStoreNode:function(){var b=this.getNode().firstChild;while(b){if(b.component.isStore){return b;}b=b.nextSibling;}return null;},doAutoColumns:function(){var k=this.getStoreNode(),q=this.getNode();if(!k){Ext.Msg.alert("Warning","Unable to read columns - no store has been defined.");return;}xds.canvas.beginUpdate();var l=this.getColumnNodes();for(var o=0,n;n=l[o];o++){n.parentNode.removeChild(n);}var p=k.childNodes;for(o=0;n=p[o];o++){var j=n.component,m=j.getConfigValue("type"),r=j.getConfigValue("name");switch(m){case"int":case"float":xds.inspector.restore({cid:"numbercolumn",userConfig:{header:r,dataIndex:r}},q);break;case"date":xds.inspector.restore({cid:"datecolumn",userConfig:{header:r,dataIndex:r}},q);break;case"boolean":xds.inspector.restore({cid:"booleancolumn",userConfig:{header:r,dataIndex:r}},q);break;default:xds.inspector.restore({cid:"gridcolumn",userConfig:{header:r,dataIndex:r}},q);break;}}xds.canvas.endUpdate();xds.fireEvent("componentchanged");}});xds.Registry.register(xds.types.GridPanel);xds.GridPanel=Ext.extend(Ext.grid.GridPanel,{afterRender:function(){xds.GridPanel.superclass.afterRender.call(this);if(false&&this.store&&this.store.viewerNode){this.createFloater(this.store.viewerNode.id,this.store.storeId,this.store.iconCls);}}});Ext.reg("xdgrid",xds.GridPanel);xds.GridPanel.DefaultStore=new Ext.data.JsonStore({storeId:"(none)",fields:["data1","data2","data3"],data:[{data1:"cell",data2:"cell",data3:"cell"},{data1:"cell",data2:"cell",data3:"cell"},{data1:"cell",data2:"cell",data3:"cell"}]});Ext.onReady(function(){xds.Config.editors.columns=new Ext.grid.GridEditor(new xds.MoreField({value:"(Collection)",setRawValue:function(b){this.value=b;},onMoreClick:function(c){var d=new xds.ColumnWindow();d.component=xds.active.component;d.show(c.target);}}));});xds.StoreBase=Ext.extend(xds.Component,{category:"数据",defaultName:"&lt;store&gt;",naming:"MyStore",isVisual:false,isContainer:true,isStore:true,validChildTypes:["datafield"],defaultConfig:{},initConfig:function(c,d){c.storeId=this.id;},setConfig:function(d,c){xds.StoreBase.superclass.setConfig.call(this,d,c);this.reconfigure();if(d=="url"&&this.actions){this.actions[0][c?"enable":"disable"]();this.actions[0].initialConfig.disabled=!c;}},reconfigure:function(h){var f=xds.StoreCache.get(this.owner.id),e=this.processConfig(f.viewerNode);e.cache=false;var g=this.createStore(e,false);f.reader=g.reader;f.proxy=g.proxy;if(f.proxy){f.proxy.on("loadexception",this.onLoadException,this);}f.remoteSort=g.remoteSort;f.sortDir=g.sortDir;f.sortField=g.sortField;f.url=g.url;if(h!==false&&f.dataCache){f.loadData(f.dataCache);}},createCanvasConfig:function(f){var e=xds.StoreCache.get(this.owner.id);if(!e){var d=this.processConfig(f);d.viewerNode=f;d.component=this.owner;e=this.createStore(d,true);}return e;},onLoadException:function(){xds.status.el.update("");Ext.Msg.alert("Error","Unable to load data using the supplied configuration.");this.setSuffix("load error","error");},processConfig:function(e){var h=Ext.apply({},this.getConfig());h.xtype=this.xtype;h.fields=[];h.autoLoad=false;h.iconCls=this.iconCls;if(e.hasChildNodes()){for(var f=0,g=e.childNodes.length;f<g;f++){h.fields.push(e.childNodes[f].component.getConfig());}}return h;},getActions:function(){if(!this.actions){var b=function(a){var f=[];for(var e=0;e<a;e++){xds.inspector.restore({cid:"datafield"},this.getNode());}};this.actions=[new Ext.Action({itemId:"store-load",text:"Load data",iconCls:"icon-load",handler:function(){var a=xds.StoreCache.get(this.owner.id);delete a.dataCache;a.reload();},scope:this,disabled:!this.getConfigValue("url")}),new Ext.Action({itemId:"quick-add",text:"Quick add",hideOnClick:false,menu:{zIndex:80001,items:[{text:"1 field",handler:b.createDelegate(this,[1])},{text:"2 fields",handler:b.createDelegate(this,[2])},{text:"3 fields",handler:b.createDelegate(this,[3])},{text:"4 fields",handler:b.createDelegate(this,[4])},{text:"5 fields",handler:b.createDelegate(this,[5])}]}})];}return this.actions;},isValidParent:function(b){if(b&&b.getStoreNode){return !b.getStoreNode();}return true;}});xds.types.JsonStore=Ext.extend(xds.StoreBase,{cid:"jsonstore",text:"Json Store",xtype:"jsonstore",dtype:"jsonstore",xcls:"Ext.data.JsonStore",iconCls:"icon-json",createStore:function(e,d){e=e||{};e.proxy=e.proxy||new Ext.data.HttpProxy(e);var f=new Ext.data.JsonStore(e);if(d){f.on("beforeload",function(){if(!f.proxy.conn.url){Ext.Msg.alert("Warning",'Could not load JsonStore, "url" has not been set.');return false;}if(f.dataCache){f.loadData(f.dataCache);return false;}else{xds.status.el.update("Loading store...");}});f.on("load",function(a){a.dataCache=a.reader.jsonData;xds.status.el.update("");this.setSuffix((a.data.length)+" records loaded","loaded");},this);f.proxy.on("loadexception",this.onLoadException,this);}return f;},defaultConfig:{autoLoad:true},configs:[{name:"idProperty",group:"Ext.data.JsonStore",ctype:"string"},{name:"root",group:"Ext.data.JsonStore",ctype:"string"},{name:"totalProperty",group:"Ext.data.JsonStore",ctype:"string"},{name:"autoLoad",group:"Ext.data.Store",ctype:"boolean"},{name:"remoteSort",group:"Ext.data.Store",ctype:"boolean"},{name:"sortDir",group:"Ext.data.Store",ctype:"string",editor:"options",options:["ASC","DESC"]},{name:"sortField",group:"Ext.data.Store",ctype:"string"},{name:"storeId",group:"Ext.data.Store",ctype:"string"},{name:"url",group:"Ext.data.Store",ctype:"string"}]});xds.Registry.register(xds.types.JsonStore);xds.types.ArrayStore=Ext.extend(xds.StoreBase,{cid:"arraystore",text:"Array Store",xtype:"arraystore",dtype:"arraystore",xcls:"Ext.data.Store",iconCls:"icon-array",createStore:function(e,d){e.reader=new Ext.data.ArrayReader({idIndex:e.idIndex,root:e.root,totalProperty:e.totalProperty},e.fields);var f=new Ext.data.Store(e);if(d){f.on("beforeload",function(){if(!f.proxy.conn.url){Ext.Msg.alert("Warning",'Could not load Array Store, "url" has not been set.');return false;}if(f.dataCache){f.loadData(f.dataCache);return false;}else{xds.status.el.update("Loading store...");}});f.on("load",function(){f.dataCache=f.reader.arrayData;xds.status.el.update("");this.setSuffix((f.dataCache?f.dataCache.length:0)+" records loaded","loaded");},this);if(f.proxy){f.proxy.on("loadexception",this.onLoadException,this);}}return f;},configs:[{name:"idIndex",group:"Ext.data.ArrayStore",ctype:"number"},{name:"root",group:"Ext.data.ArrayStore",ctype:"string"},{name:"totalProperty",group:"Ext.data.ArrayStore",ctype:"string"},{name:"autoLoad",group:"Ext.data.Store",ctype:"boolean"},{name:"remoteSort",group:"Ext.data.Store",ctype:"boolean"},{name:"sortDir",group:"Ext.data.Store",ctype:"string",editor:"options",options:["ASC","DESC"]},{name:"sortField",group:"Ext.data.Store",ctype:"string"},{name:"storeId",group:"Ext.data.Store",ctype:"string"},{name:"url",group:"Ext.data.Store",ctype:"string"}]});xds.Registry.register(xds.types.ArrayStore);xds.types.XmlStore=Ext.extend(xds.StoreBase,{cid:"xmlstore",text:"Xml Store",xtype:"xmlstore",dtype:"xmlstore",xcls:"Ext.data.XmlStore",iconCls:"icon-xml",createStore:function(e,d){e=e||{};e.proxy=e.proxy||new Ext.data.HttpProxy(e);var f=new Ext.data.XmlStore(e);if(d){f.on("beforeload",function(){if(!f.proxy.conn.url){Ext.Msg.alert("Warning",'Could not load XmlStore, "url" has not been set.');return false;}if(!f.reader.meta.record){Ext.Msg.alert("Warning",'Could not load XmlStore, "record" has not been set.');return false;}if(f.dataCache){f.loadData(f.dataCache);return false;}else{xds.status.el.update("Loading store...");}});f.on("load",function(){f.dataCache=f.reader.xmlData;xds.status.el.update("");this.setSuffix((f.data.length)+" records loaded","loaded");},this);f.proxy.on("loadexception",this.onLoadException,this);}return f;},configs:[{name:"idPath",group:"Ext.data.XmlStore",ctype:"string"},{name:"record",group:"Ext.data.XmlStore",ctype:"string"},{name:"totalRecords",group:"Ext.data.XmlStore",ctype:"string"},{name:"autoLoad",group:"Ext.data.Store",ctype:"boolean"},{name:"remoteSort",group:"Ext.data.Store",ctype:"boolean"},{name:"sortDir",group:"Ext.data.Store",ctype:"string",editor:"options",options:["ASC","DESC"]},{name:"sortField",group:"Ext.data.Store",ctype:"string"},{name:"storeId",group:"Ext.data.Store",ctype:"string"},{name:"url",group:"Ext.data.Store",ctype:"string"}]});xds.Registry.register(xds.types.XmlStore);xds.FieldBase=Ext.extend(xds.Component,{category:"表单控件",naming:"MyField",defaultConfig:{fieldLabel:"Label"},isResizable:function(d,c){return d=="Right"&&!this.isAnchored()&&!this.isFit()&&(!this.owner||this.owner.getConfigValue("layout")!="form");},initConfig:function(d,e){var f=this.owner?this.owner.getConfigValue("layout"):"";if(!e){d.width=200;}else{if(f=="form"||f=="anchor"||f=="absolute"){d.anchor="100%";}}}});xds.types.Checkbox=Ext.extend(xds.FieldBase,{cid:"checkbox",defaultName:"&lt;checkbox&gt;",text:"Checkbox",dtype:"xdcheckbox",xtype:"checkbox",xcls:"Ext.form.Checkbox",iconCls:"icon-checkbox",naming:"MyCheckbox",defaultConfig:{fieldLabel:"Label",boxLabel:"boxLabel"},configs:[{name:"boxLabel",group:"Ext.form.Checkbox",ctype:"string"},{name:"checked",group:"Ext.form.Checkbox",ctype:"boolean"},{name:"checkedCls",group:"Ext.form.Checkbox",ctype:"string"},{name:"inputValue",group:"Ext.form.Checkbox",ctype:"string"},{name:"mouseDownCls",group:"Ext.form.Checkbox",ctype:"string"},{name:"fieldClass",group:"Ext.form.Field",ctype:"string"},{name:"focusClass",group:"Ext.form.Field",ctype:"string"},{name:"inputType",group:"Ext.form.Field",ctype:"string"},{name:"invalidClass",group:"Ext.form.Field",ctype:"string"},{name:"invalidText",group:"Ext.form.Field",ctype:"string"},{name:"msgTarget",group:"Ext.form.Field",ctype:"string",editor:"options",options:["qtip","side","title","under"]},{name:"name",group:"Ext.form.Field",ctype:"string"},{name:"readOnly",group:"Ext.form.Field",ctype:"boolean"},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"validateOnBlur",group:"Ext.form.Field",ctype:"boolean"},{name:"validationEvent",group:"Ext.form.Field",ctype:"string",edtor:"options",options:["keyup","change","blur"]},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.Checkbox);xds.Checkbox=Ext.extend(Ext.form.Checkbox,{getFilmEl:xds.Component.getFilmEl});Ext.reg("xdcheckbox",xds.Checkbox);xds.types.DateField=Ext.extend(xds.FieldBase,{cid:"datefield",defaultName:"&lt;dateField&gt;",text:"Date Field",dtype:"xddatefield",xtype:"datefield",xcls:"Ext.form.DateField",iconCls:"icon-datefield",naming:"MyField",defaultConfig:{format:"Y-m-d",fieldLabel:"Label"},configs:[{name:"altFormats",group:"Ext.form.DateField",ctype:"string"},{name:"format",group:"Ext.form.DateField",ctype:"string"},{name:"maxText",group:"Ext.form.DateField",ctype:"string"},{name:"maxValue",group:"Ext.form.DateField",ctype:"string"},{name:"minText",group:"Ext.form.DateField",ctype:"string"},{name:"minValue",group:"Ext.form.DateField",ctype:"string"},{name:"showToday",group:"Ext.form.DateField",ctype:"boolean"},{name:"allowBlank",group:"Ext.form.TextField",ctype:"boolean"},{name:"blankText",group:"Ext.form.TextField",ctype:"string"},{name:"disableKeyFilter",group:"Ext.form.TextField",ctype:"boolean"},{name:"emptyClass",group:"Ext.form.TextField",ctype:"string"},{name:"emptyText",group:"Ext.form.TextField",ctype:"string"},{name:"maxLength",group:"Ext.form.TextField",ctype:"number"},{name:"maxLengthText",group:"Ext.form.TextField",ctype:"string"},{name:"selectOnFocus",group:"Ext.form.TextField",ctype:"boolean"},{name:"vtype",group:"Ext.form.TextField",ctype:"string"},{name:"vtypeText",group:"Ext.form.TextField",ctype:"string"},{name:"fieldClass",group:"Ext.form.Field",ctype:"string"},{name:"focusClass",group:"Ext.form.Field",ctype:"string"},{name:"inputType",group:"Ext.form.Field",ctype:"string"},{name:"invalidClass",group:"Ext.form.Field",ctype:"string"},{name:"invalidText",group:"Ext.form.Field",ctype:"string"},{name:"msgTarget",group:"Ext.form.Field",ctype:"string",editor:"options",options:["qtip","side","title","under"]},{name:"name",group:"Ext.form.Field",ctype:"string"},{name:"readOnly",group:"Ext.form.Field",ctype:"boolean"},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"validateOnBlur",group:"Ext.form.Field",ctype:"boolean"},{name:"validationEvent",group:"Ext.form.Field",ctype:"string",edtor:"options",options:["keyup","change","blur"]},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.DateField);xds.DateField=Ext.extend(Ext.form.DateField,{getFilmEl:xds.Component.getFilmEl});Ext.reg("xddatefield",xds.DateField);xds.types.HtmlEditor=Ext.extend(xds.FieldBase,{cid:"htmleditor",defaultName:"&lt;htmlEditor&gt;",text:"Html Editor",dtype:"xdhtmleditor",xtype:"htmleditor",xcls:"Ext.form.HtmlEditor",iconCls:"icon-html",defaultConfig:{anchor:"100%",fieldLabel:"Label",height:150,width:300},isResizable:function(d,c){return !this.getConfigValue("anchor")&&(!this.owner||this.owner.getConfigValue("layout")!="form");},configs:[{name:"createLinkText",group:"Ext.form.HtmlEditor",ctype:"string"},{name:"defaultLinkValue",group:"Ext.form.HtmlEditor",ctype:"string"},{name:"enableAlignments",group:"Ext.form.HtmlEditor",ctype:"boolean",defaultValue:true},{name:"enableColors",group:"Ext.form.HtmlEditor",ctype:"boolean",defaultValue:true},{name:"enableFont",group:"Ext.form.HtmlEditor",ctype:"boolean",defaultValue:true},{name:"enableFontSize",group:"Ext.form.HtmlEditor",ctype:"boolean",defaultValue:true},{name:"enableFormat",group:"Ext.form.HtmlEditor",ctype:"boolean",defaultValue:true},{name:"enableLinks",group:"Ext.form.HtmlEditor",ctype:"boolean",defaultValue:true},{name:"enableLists",group:"Ext.form.HtmlEditor",ctype:"boolean",defaultValue:true},{name:"enableSourceEdit",group:"Ext.form.HtmlEditor",ctype:"boolean",defaultValue:true},{name:"name",group:"Ext.form.Field",ctype:"string"},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.HtmlEditor);xds.HtmlEditor=Ext.extend(Ext.form.HtmlEditor,{getFilmEl:xds.Component.getFilmEl,createIFrame:function(){this.bogusFrame=this.wrap.createChild({cls:"xds-bogus-frame x-form-text"});},onResize:function(e,f){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.bogusFrame){if(typeof e=="number"){var h=e-this.wrap.getFrameWidth("lr");this.el.setWidth(this.adjustWidth("textarea",h));}if(typeof f=="number"){var g=f-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(this.adjustWidth("textarea",g));this.bogusFrame.dom.style.height=g+"px";}}}});Ext.reg("xdhtmleditor",xds.HtmlEditor);xds.types.NumberField=Ext.extend(xds.FieldBase,{cid:"numberfield",defaultName:"&lt;numberField&gt;",text:"Number Field",dtype:"xdnumberfield",xtype:"numberfield",xcls:"Ext.form.NumberField",iconCls:"icon-numfield",configs:[{name:"allowDecimals",group:"Ext.form.NumberField",ctype:"boolean"},{name:"allowNegative",group:"Ext.form.NumberField",ctype:"boolean"},{name:"decimalPrecision",group:"Ext.form.NumberField",ctype:"number"},{name:"decimalSeparator",group:"Ext.form.NumberField",ctype:"string"},{name:"maxText",group:"Ext.form.NumberField",ctype:"string"},{name:"maxValue",group:"Ext.form.NumberField",ctype:"number"},{name:"minText",group:"Ext.form.NumberField",ctype:"string"},{name:"minValue",group:"Ext.form.NumberField",ctype:"number"},{name:"nanText",group:"Ext.form.NumberField",ctype:"string"},{name:"allowBlank",group:"Ext.form.TextField",ctype:"boolean"},{name:"blankText",group:"Ext.form.TextField",ctype:"string"},{name:"disableKeyFilter",group:"Ext.form.TextField",ctype:"boolean"},{name:"emptyClass",group:"Ext.form.TextField",ctype:"string"},{name:"emptyText",group:"Ext.form.TextField",ctype:"string"},{name:"grow",group:"Ext.form.TextField",ctype:"boolean"},{name:"growMax",group:"Ext.form.TextField",ctype:"number"},{name:"growMin",group:"Ext.form.TextField",ctype:"number"},{name:"maxLength",group:"Ext.form.TextField",ctype:"number"},{name:"maxLengthText",group:"Ext.form.TextField",ctype:"string"},{name:"selectOnFocus",group:"Ext.form.TextField",ctype:"boolean"},{name:"vtype",group:"Ext.form.TextField",ctype:"string"},{name:"vtypeText",group:"Ext.form.TextField",ctype:"string"},{name:"fieldClass",group:"Ext.form.Field",ctype:"string"},{name:"focusClass",group:"Ext.form.Field",ctype:"string"},{name:"inputType",group:"Ext.form.Field",ctype:"string"},{name:"invalidClass",group:"Ext.form.Field",ctype:"string"},{name:"invalidText",group:"Ext.form.Field",ctype:"string"},{name:"msgTarget",group:"Ext.form.Field",ctype:"string",editor:"options",options:["qtip","side","title","under"]},{name:"name",group:"Ext.form.Field",ctype:"string"},{name:"readOnly",group:"Ext.form.Field",ctype:"boolean"},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"validateOnBlur",group:"Ext.form.Field",ctype:"boolean"},{name:"validationEvent",group:"Ext.form.Field",ctype:"string",edtor:"options",options:["keyup","change","blur"]},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.NumberField);xds.NumberField=Ext.extend(Ext.form.NumberField,{getFilmEl:xds.Component.getFilmEl});Ext.reg("xdnumberfield",xds.NumberField);xds.types.Radio=Ext.extend(xds.FieldBase,{cid:"radio",defaultName:"&lt;radio&gt;",text:"Radio",dtype:"xdradio",xtype:"radio",xcls:"Ext.form.Radio",iconCls:"icon-radio",naming:"MyRadio",defaultConfig:{fieldLabel:"Label",boxLabel:"boxLabel"},configs:[{name:"boxLabel",group:"Ext.form.Checkbox",ctype:"string"},{name:"checked",group:"Ext.form.Checkbox",ctype:"boolean"},{name:"checkedCls",group:"Ext.form.Checkbox",ctype:"string"},{name:"inputValue",group:"Ext.form.Checkbox",ctype:"string"},{name:"mouseDownCls",group:"Ext.form.Checkbox",ctype:"string"},{name:"fieldClass",group:"Ext.form.Field",ctype:"string"},{name:"focusClass",group:"Ext.form.Field",ctype:"string"},{name:"inputType",group:"Ext.form.Field",ctype:"string"},{name:"invalidClass",group:"Ext.form.Field",ctype:"string"},{name:"invalidText",group:"Ext.form.Field",ctype:"string"},{name:"msgTarget",group:"Ext.form.Field",ctype:"string",editor:"options",options:["qtip","side","title","under"]},{name:"name",group:"Ext.form.Field",ctype:"string"},{name:"readOnly",group:"Ext.form.Field",ctype:"boolean"},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"validateOnBlur",group:"Ext.form.Field",ctype:"boolean"},{name:"validationEvent",group:"Ext.form.Field",ctype:"string",edtor:"options",options:["keyup","change","blur"]},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.Radio);xds.Radio=Ext.extend(Ext.form.Radio,{getFilmEl:xds.Component.getFilmEl});Ext.reg("xdradio",xds.Radio);xds.types.TextField=Ext.extend(xds.FieldBase,{cid:"textfield",defaultName:"&lt;textField&gt;",text:"Text Field",dtype:"xdtextfield",xtype:"textfield",xcls:"Ext.form.TextField",iconCls:"icon-textfield",configs:[{name:"allowBlank",group:"Ext.form.TextField",ctype:"boolean"},{name:"blankText",group:"Ext.form.TextField",ctype:"string"},{name:"disableKeyFilter",group:"Ext.form.TextField",ctype:"boolean"},{name:"emptyClass",group:"Ext.form.TextField",ctype:"string"},{name:"emptyText",group:"Ext.form.TextField",ctype:"string"},{name:"grow",group:"Ext.form.TextField",ctype:"boolean"},{name:"growMax",group:"Ext.form.TextField",ctype:"number"},{name:"growMin",group:"Ext.form.TextField",ctype:"number"},{name:"maxLength",group:"Ext.form.TextField",ctype:"number"},{name:"maxLengthText",group:"Ext.form.TextField",ctype:"string"},{name:"selectOnFocus",group:"Ext.form.TextField",ctype:"boolean"},{name:"vtype",group:"Ext.form.TextField",ctype:"string"},{name:"vtypeText",group:"Ext.form.TextField",ctype:"string"},{name:"fieldClass",group:"Ext.form.Field",ctype:"string"},{name:"focusClass",group:"Ext.form.Field",ctype:"string"},{name:"inputType",group:"Ext.form.Field",ctype:"string"},{name:"invalidClass",group:"Ext.form.Field",ctype:"string"},{name:"invalidText",group:"Ext.form.Field",ctype:"string"},{name:"msgTarget",group:"Ext.form.Field",ctype:"string",editor:"options",options:["qtip","side","title","under"]},{name:"name",group:"Ext.form.Field",ctype:"string"},{name:"readOnly",group:"Ext.form.Field",ctype:"boolean"},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"validateOnBlur",group:"Ext.form.Field",ctype:"boolean"},{name:"validationEvent",group:"Ext.form.Field",ctype:"string",edtor:"options",options:["keyup","change","blur"]},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.TextField);xds.TextField=Ext.extend(Ext.form.TextField,{getFilmEl:xds.Component.getFilmEl});Ext.reg("xdtextfield",xds.TextField);xds.types.TextArea=Ext.extend(xds.FieldBase,{cid:"textarea",defaultName:"&lt;textArea&gt;",text:"Text Area",dtype:"xdtextarea",xtype:"textarea",xcls:"Ext.form.TextArea",iconCls:"icon-textarea",isResizable:function(d,c){return !this.getConfigValue("anchor")&&(!this.owner||this.owner.getConfigValue("layout")!="form");},configs:[{name:"preventScrollbars",group:"Ext.form.TextArea",ctype:"boolean"},{name:"allowBlank",group:"Ext.form.TextField",ctype:"boolean"},{name:"blankText",group:"Ext.form.TextField",ctype:"string"},{name:"disableKeyFilter",group:"Ext.form.TextField",ctype:"boolean"},{name:"emptyClass",group:"Ext.form.TextField",ctype:"string"},{name:"emptyText",group:"Ext.form.TextField",ctype:"string"},{name:"grow",group:"Ext.form.TextField",ctype:"boolean"},{name:"growMax",group:"Ext.form.TextField",ctype:"number"},{name:"growMin",group:"Ext.form.TextField",ctype:"number"},{name:"maxLength",group:"Ext.form.TextField",ctype:"number"},{name:"maxLengthText",group:"Ext.form.TextField",ctype:"string"},{name:"selectOnFocus",group:"Ext.form.TextField",ctype:"boolean"},{name:"vtype",group:"Ext.form.TextField",ctype:"string"},{name:"vtypeText",group:"Ext.form.TextField",ctype:"string"},{name:"fieldClass",group:"Ext.form.Field",ctype:"string"},{name:"focusClass",group:"Ext.form.Field",ctype:"string"},{name:"inputType",group:"Ext.form.Field",ctype:"string"},{name:"invalidClass",group:"Ext.form.Field",ctype:"string"},{name:"invalidText",group:"Ext.form.Field",ctype:"string"},{name:"msgTarget",group:"Ext.form.Field",ctype:"string",editor:"options",options:["qtip","side","title","under"]},{name:"name",group:"Ext.form.Field",ctype:"string"},{name:"readOnly",group:"Ext.form.Field",ctype:"boolean"},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"validateOnBlur",group:"Ext.form.Field",ctype:"boolean"},{name:"validationEvent",group:"Ext.form.Field",ctype:"string",edtor:"options",options:["keyup","change","blur"]},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.TextArea);xds.TextArea=Ext.extend(Ext.form.TextArea,{getFilmEl:xds.Component.getFilmEl});Ext.reg("xdtextarea",xds.TextArea);xds.types.TimeField=Ext.extend(xds.FieldBase,{cid:"timefield",defaultName:"&lt;timeField&gt;",text:"Time Field",dtype:"xdtimefield",xtype:"timefield",xcls:"Ext.form.TimeField",iconCls:"icon-timefield",configs:[{name:"altFormats",group:"Ext.form.TimeField",ctype:"string"},{name:"format",group:"Ext.form.TimeField",ctype:"string"},{name:"increment",group:"Ext.form.TimeField",ctype:"number"},{name:"maxText",group:"Ext.form.TimeField",ctype:"string"},{name:"maxValue",group:"Ext.form.TimeField",ctype:"string"},{name:"minText",group:"Ext.form.TimeField",ctype:"string"},{name:"minValue",group:"Ext.form.TimeField",ctype:"string"},{name:"allowBlank",group:"Ext.form.TextField",ctype:"boolean"},{name:"blankText",group:"Ext.form.TextField",ctype:"string"},{name:"disableKeyFilter",group:"Ext.form.TextField",ctype:"boolean"},{name:"emptyClass",group:"Ext.form.TextField",ctype:"string"},{name:"emptyText",group:"Ext.form.TextField",ctype:"string"},{name:"maxLength",group:"Ext.form.TextField",ctype:"number"},{name:"maxLengthText",group:"Ext.form.TextField",ctype:"string"},{name:"selectOnFocus",group:"Ext.form.TextField",ctype:"boolean"},{name:"vtype",group:"Ext.form.TextField",ctype:"string"},{name:"vtypeText",group:"Ext.form.TextField",ctype:"string"},{name:"fieldClass",group:"Ext.form.Field",ctype:"string"},{name:"focusClass",group:"Ext.form.Field",ctype:"string"},{name:"inputType",group:"Ext.form.Field",ctype:"string"},{name:"invalidClass",group:"Ext.form.Field",ctype:"string"},{name:"invalidText",group:"Ext.form.Field",ctype:"string"},{name:"msgTarget",group:"Ext.form.Field",ctype:"string",editor:"options",options:["qtip","side","title","under"]},{name:"name",group:"Ext.form.Field",ctype:"string"},{name:"readOnly",group:"Ext.form.Field",ctype:"boolean"},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"validateOnBlur",group:"Ext.form.Field",ctype:"boolean"},{name:"validationEvent",group:"Ext.form.Field",ctype:"string",edtor:"options",options:["keyup","change","blur"]},{name:"tabIndex",group:"Ext.form.Field",ctype:"number"},{name:"height",group:"Ext.BoxComponent",ctype:"number"},{name:"pageX",group:"Ext.BoxComponent",ctype:"number"},{name:"pageY",group:"Ext.BoxComponent",ctype:"number"},{name:"width",group:"Ext.BoxComponent",ctype:"number"},{name:"x",group:"Ext.BoxComponent",ctype:"number"},{name:"y",group:"Ext.BoxComponent",ctype:"number"},{name:"cls",group:"Ext.Component",ctype:"string"},{name:"ctCls",group:"Ext.Component",ctype:"string"},{name:"disabled",group:"Ext.Component",ctype:"boolean"},{name:"disabledClass",group:"Ext.Component",ctype:"string"},{name:"hidden",group:"Ext.Component",ctype:"boolean"},{name:"hideMode",group:"Ext.Component",ctype:"string",editor:"options",options:["display","offsets","visibility"]},{name:"id",group:"Ext.Component",ctype:"string"},{name:"itemId",group:"Ext.Component",ctype:"string"},{name:"overCls",group:"Ext.Component",ctype:"string"},{name:"stateful",group:"Ext.Component",ctype:"boolean"},{name:"style",group:"Ext.Component",ctype:"string"}]});xds.Registry.register(xds.types.TimeField);xds.TimeField=Ext.extend(Ext.form.TimeField,{getFilmEl:xds.Component.getFilmEl});Ext.reg("xdtimefield",xds.TimeField);xds.ColumnBase=Ext.extend(xds.Component,{category:"数据表格",defaultName:"&lt;column&gt;",naming:"MyColumn",isVisual:false,setConfig:function(e,f){xds.ColumnBase.superclass.setConfig.call(this,e,f);if(e=="dataIndex"){var d=this.getConfigValue("id");this.setName(d?d:(f||this.defaultName));}},defaultConfig:{header:"column",sortable:true,resizable:true,dataIndex:"",width:100},initConfig:function(c,d){}});xds.types.GridColumn=Ext.extend(xds.ColumnBase,{cid:"gridcolumn",text:"Grid Column",xtype:"gridcolumn",dtype:"xdgridcolumn",xcls:"Ext.grid.Column",iconCls:"icon-grid-column",configs:[{name:"align",group:"Ext.grid.Column",ctype:"string",editor:"options",options:["center","left","right"]},{name:"css",group:"Ext.grid.Column",ctype:"string"},{name:"dataIndex",group:"Ext.grid.Column",ctype:"string"},{name:"fixed",group:"Ext.grid.Column",ctype:"boolean"},{name:"header",group:"Ext.grid.Column",ctype:"string"},{name:"hidden",group:"Ext.grid.Column",ctype:"boolean"},{name:"id",group:"Ext.grid.Column",ctype:"string"},{name:"menuDisabled",group:"Ext.grid.Column",ctype:"boolean"},{name:"resizable",group:"Ext.grid.Column",ctype:"boolean"},{name:"tooltip",group:"Ext.grid.Column",ctype:"string"},{name:"width",group:"Ext.grid.Column",ctype:"number"}]});xds.Registry.register(xds.types.GridColumn);xds.types.BooleanColumn=Ext.extend(xds.ColumnBase,{cid:"booleancolumn",defaultName:"&lt;booleanColumn&gt;",text:"Boolean Column",xtype:"booleancolumn",dtype:"xdbooleancolumn",xcls:"Ext.grid.BooleanColumn",iconCls:"icon-grid-bool",configs:[{name:"align",group:"Ext.grid.Column",ctype:"string",editor:"options",options:["center","left","right"]},{name:"css",group:"Ext.grid.Column",ctype:"string"},{name:"dataIndex",group:"Ext.grid.Column",ctype:"string"},{name:"fixed",group:"Ext.grid.Column",ctype:"boolean"},{name:"header",group:"Ext.grid.Column",ctype:"string"},{name:"hidden",group:"Ext.grid.Column",ctype:"boolean"},{name:"id",group:"Ext.grid.Column",ctype:"string"},{name:"menuDisabled",group:"Ext.grid.Column",ctype:"boolean"},{name:"resizable",group:"Ext.grid.Column",ctype:"boolean"},{name:"tooltip",group:"Ext.grid.Column",ctype:"string"},{name:"width",group:"Ext.grid.Column",ctype:"number"}]});xds.Registry.register(xds.types.BooleanColumn);xds.types.NumberColumn=Ext.extend(xds.ColumnBase,{cid:"numbercolumn",defaultName:"&lt;numberColumn&gt;",text:"Number Column",xtype:"numbercolumn",dtype:"xdnumbercolumn",xcls:"Ext.grid.NumberColumn",iconCls:"icon-grid-num",defaultConfig:{header:"column",sortable:true,resizable:true,dataIndex:"",width:100,format:"0,000.00"},configs:[{name:"align",group:"Ext.grid.Column",ctype:"string",editor:"options",options:["center","left","right"]},{name:"css",group:"Ext.grid.Column",ctype:"string"},{name:"dataIndex",group:"Ext.grid.Column",ctype:"string"},{name:"fixed",group:"Ext.grid.Column",ctype:"boolean"},{name:"format",group:"Ext.grid.NumberColumn",ctype:"string"},{name:"header",group:"Ext.grid.Column",ctype:"string"},{name:"hidden",group:"Ext.grid.Column",ctype:"boolean"},{name:"id",group:"Ext.grid.Column",ctype:"string"},{name:"menuDisabled",group:"Ext.grid.Column",ctype:"boolean"},{name:"resizable",group:"Ext.grid.Column",ctype:"boolean"},{name:"tooltip",group:"Ext.grid.Column",ctype:"string"},{name:"width",group:"Ext.grid.Column",ctype:"number"}]});xds.Registry.register(xds.types.NumberColumn);xds.types.DateColumn=Ext.extend(xds.ColumnBase,{cid:"datecolumn",defaultName:"&lt;dateColumn&gt;",text:"Date Column",xtype:"datecolumn",dtype:"xddatecolumn",xcls:"Ext.grid.DateColumn",iconCls:"icon-grid-date",defaultConfig:{header:"column",sortable:true,resizable:true,dataIndex:"",width:100,format:"m/d/Y"},configs:[{name:"align",group:"Ext.grid.Column",ctype:"string",editor:"options",options:["center","left","right"]},{name:"css",group:"Ext.grid.Column",ctype:"string"},{name:"dataIndex",group:"Ext.grid.Column",ctype:"string"},{name:"fixed",group:"Ext.grid.Column",ctype:"boolean"},{name:"format",group:"Ext.grid.DateColumn",ctype:"string"},{name:"header",group:"Ext.grid.Column",ctype:"string"},{name:"hidden",group:"Ext.grid.Column",ctype:"boolean"},{name:"id",group:"Ext.grid.Column",ctype:"string"},{name:"menuDisabled",group:"Ext.grid.Column",ctype:"boolean"},{name:"resizable",group:"Ext.grid.Column",ctype:"boolean"},{name:"tooltip",group:"Ext.grid.Column",ctype:"string"},{name:"width",group:"Ext.grid.Column",ctype:"number"}]});xds.Registry.register(xds.types.DateColumn);xds.types.TemplateColumn=Ext.extend(xds.ColumnBase,{cid:"templatecolumn",defaultName:"&lt;templateColumn&gt;",text:"Template Column",xtype:"templatecolumn",dtype:"xdtemplatecolumn",xcls:"Ext.grid.TemplateColumn",iconCls:"icon-grid-tpl",defaultConfig:{header:"column",sortable:true,resizable:true,dataIndex:"",width:100,tpl:""},configs:[{name:"align",group:"Ext.grid.Column",ctype:"string",editor:"options",options:["center","left","right"]},{name:"css",group:"Ext.grid.Column",ctype:"string"},{name:"dataIndex",group:"Ext.grid.Column",ctype:"string"},{name:"fixed",group:"Ext.grid.Column",ctype:"boolean"},{name:"tpl",group:"Ext.grid.TemplateColumn",ctype:"string"},{name:"header",group:"Ext.grid.Column",ctype:"string"},{name:"hidden",group:"Ext.grid.Column",ctype:"boolean"},{name:"id",group:"Ext.grid.Column",ctype:"string"},{name:"menuDisabled",group:"Ext.grid.Column",ctype:"boolean"},{name:"resizable",group:"Ext.grid.Column",ctype:"boolean"},{name:"tooltip",group:"Ext.grid.Column",ctype:"string"},{name:"width",group:"Ext.grid.Column",ctype:"number"}]});xds.Registry.register(xds.types.TemplateColumn);xds.types.DataField=Ext.extend(xds.Component,{cid:"datafield",category:"数据",name:"DataField",text:"Data Field",xtype:"datafield",dtype:"xddatafield",xcls:"Ext.data.DataField",iconCls:"icon-data-field",naming:"MyField",isVisual:false,defaultConfig:{name:"field",type:"auto"},initConfig:function(c,d){c.storeId=this.id;},setConfig:function(d,c){this.supr().setConfig.call(this,d,c);this.owner.reconfigure();},configs:[{name:"dateFormat",group:"Ext.data.DataField",ctype:"string"},{name:"mapping",group:"Ext.data.DataField",ctype:"string"},{name:"name",group:"Ext.data.DataField",ctype:"string"},{name:"sortDir",group:"Ext.data.DataField",ctype:"string",editor:"options",options:["ASC","DESC"]},{name:"sortType",group:"Ext.data.DataField",ctype:"string"},{name:"type",group:"Ext.data.DataField",ctype:"string",editor:"options",options:["auto","boolean","date","float","int","string"]}]});xds.Registry.register(xds.types.DataField);xds.File=function(){return{saveProject:function(h,i,g){var f=window.parentSandboxBridge;f.save({fullPath:xds.Project.file,contents:Ext.util.JSON.encode(h)});if(i){var j=i.scope||this;if(i.callback){Ext.callback(i.callback,j);}}},saveProjectAs:function(f,g,e){var h=window.parentSandboxBridge;h.saveAs({contents:Ext.util.JSON.encode(f)},function(b){xds.Project.file=b;xds.File.setTitle(b.nativePath);if(g){var a=g.scope||this;if(g.callback){Ext.callback(g.callback,a,b.nativePath);}}});},openProject:function(e,d){var f=window.parentSandboxBridge;f.browse({filterText:"Ext Designer Project File",filter:"*.epj",scope:this},function(a){xds.File.setTitle(a.nativePath);var c=f.getContents(a.nativePath),b=Ext.decode(c);xds.Project.file=a;e(b);});},getComponents:function(d,c){},saveUserComponent:function(f,e,d){},removeUserComponent:function(f,e,d){},setTitle:function(c){var d=window.parentSandboxBridge.setTitle(c);}};}();